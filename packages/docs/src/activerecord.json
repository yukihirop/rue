{
  "ActiveRecord$Associations$Core": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/associations/core.ts",
      "updatedAt": "2021/02/25 23:31:44 +09:00"
    },
    "static": {
      "belongsTo": {
        "text": "static belongsTo<T extends ActiveRecord$Associations$Core = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: string\n  ) {\n    Registry.create(this.name, Association.belongsTo, {\n      [relationName]: (self: T) => (klass as any).findBy({ primaryKey: self[foreignKey] }),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mbelongsTo\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations$Core \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mbelongsTo\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          22,
          30
        ]
      },
      "hasOne": {
        "text": "static hasOne<T extends ActiveRecord$Associations$Core = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasOne, {\n      [relationName]: (self: T) => (klass as any).findBy({ [foreignKey]: self.primaryKey }),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations$Core \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasOne\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          32,
          40
        ]
      },
      "hasMany": {
        "text": "static hasMany<T extends ActiveRecord$Associations$Core = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ [foreignKey]: self.primaryKey }).toPromiseArray(),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations$Core \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          42,
          51
        ]
      },
      "hasAndBelongsToMany": {
        "text": "static hasAndBelongsToMany<T extends ActiveRecord$Associations$Core = any>(\n    relationName,\n    klass: Function\n  ) {\n    const foreignKeysFn = (self: T) => {\n      const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n        this.name,\n        klass.name,\n        'array'\n      );\n      return tables.reduce((acc, pair) => {\n        if (pair[0] == self.primaryKey) {\n          acc.push(pair[1]);\n        }\n        return acc;\n      }, []);\n    };\n\n    IntermediateTable.create(this.name, klass.name, []);\n    Registry.create(this.name, Association.hasAndBelongsToMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ primaryKey: foreignKeysFn(self) }).toPromiseArray(),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations$Core \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'array'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m tables\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m pair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasAndBelongsToMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          53,
          76
        ]
      }
    },
    "instance": {
      "hasAndBelongsToMany": {
        "text": "hasAndBelongsToMany<T extends ActiveRecord$Associations$Core = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameLeft,\n      'array'\n    );\n\n    if (Array.isArray(tables)) {\n      IntermediateTable.create(klassNameLeft, klassNameRight, [\n        [this.primaryKey, record.primaryKey],\n      ]);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations$Core \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtables\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          53,
          76
        ]
      },
      "releaseAndBelongsToMany": {
        "text": "releaseAndBelongsToMany<T extends ActiveRecord$Associations$Core = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const beforeIntermediateTable = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameRight\n    );\n\n    if (Array.isArray(beforeIntermediateTable)) {\n      let leavedData = [];\n      let deleteData = [];\n      beforeIntermediateTable.forEach((pair) => {\n        if (this.primaryKey == pair[0] && record.primaryKey == pair[1]) {\n          deleteData.push(pair);\n        } else {\n          leavedData.push(pair);\n        }\n      });\n      IntermediateTable.update(klassNameLeft, klassNameRight, leavedData);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations$Core \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m beforeIntermediateTable \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameRight\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mbeforeIntermediateTable\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      beforeIntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          106,
          138
        ]
      },
      "defineAssociations": {
        "text": "protected defineAssociations() {\n    const allAssociations = Registry.data[this.constructor.name];\n\n    if (allAssociations == undefined) return;\n\n    Object.keys(allAssociations).forEach((associationName: string) => {\n      const relationData = allAssociations[associationName];\n\n      Object.keys(relationData).forEach((relationName: string) => {\n        const relationFn = relationData[relationName];\n\n        Object.defineProperty(this, relationName, {\n          enumerable: true,\n          configurable: false,\n          value: () => relationFn(this),\n        });\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allAssociations \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mallAssociations \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mallAssociations\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relationData \u001b[38;2;248;248;242m=\u001b[39m allAssociations\u001b[38;2;248;248;242m[\u001b[39massociationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m relationFn \u001b[38;2;248;248;242m=\u001b[39m relationData\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m relationName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          enumerable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          configurable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;230;219;116mvalue\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          140,
          158
        ]
      }
    }
  },
  "ActiveRecord$Filters$WhereChain": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/filters/where_chain.ts",
      "updatedAt": "2021/02/25 23:31:44 +09:00"
    },
    "instance": {
      "where": {
        "text": "where<_U = any>(params: t.WhereParams): ActiveRecord$Filters$WhereChain<T> {\n    Object.assign(this.params, params);\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m_U \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mWhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Filters$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m params\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          13,
          16
        ]
      },
      "rewhere": {
        "text": "rewhere<_U = any>(params: t.WhereParams): ActiveRecord$Filters$WhereChain<T> {\n    this.params = params;\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m_U \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mWhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Filters$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          19,
          22
        ]
      },
      "inspect": {
        "text": "inspect(): string {\n    const klassName = this.constructor.name;\n    let sorted = {};\n\n    const keys = Object.keys(this).sort();\n    keys.forEach(function (key) {\n      sorted[key] = this[key];\n    }, this);\n\n    return `${klassName} ${JSON.stringify(sorted, null, 2)}`;\n  }",
        "highlightText": "\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m sorted \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m keys \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    keys\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mfunction\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      sorted\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mklassName\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39msorted\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          24,
          34
        ]
      },
      "toPromiseArray": {
        "text": "toPromiseArray(): Promise<T[]> {\n    return this.allPromiseFn().then((records: T[]) => {\n      const result = records.reduce((acc: Array<T>, record: T) => {\n        const isMatch = Object.keys(this.params)\n          .map((key: string) => {\n            const val = this.params[key];\n            if (Array.isArray(val)) {\n              return val.includes(record[key]);\n            } else {\n              return (record as any)[key] === val;\n            }\n          })\n          .every(Boolean);\n        if (isMatch) acc.push(record);\n        return acc;\n      }, [] as Array<T>);\n      return Promise.resolve(result);\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m isMatch \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m val \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m val\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misMatch\u001b[38;2;248;248;242m)\u001b[39m acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          36,
          54
        ]
      },
      "toPA": {
        "text": "toPA(): Promise<T[]> {\n    return this.toPromiseArray();\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          57,
          59
        ]
      }
    }
  },
  "ActiveRecord$Core": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/core.ts",
      "updatedAt": "2021/02/25 23:31:44 +09:00"
    },
    "static": {
      "objType": {
        "text": "static objType(): t.ObjType {\n    return 'record';\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'record'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          30,
          32
        ]
      },
      "fetchAll": {
        "text": "protected static fetchAll<T = any>(): Promise<Array<T>> {\n    throw \"Please implement '[static] fetchAll' in Inherited Class\";\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement '[static] fetchAll' in Inherited Class\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          34,
          36
        ]
      },
      "resetCache": {
        "text": "static resetCache() {\n    const klassName = this.name;\n    Cache.destroy(klassName);\n    Cache.create(klassName, RECORD_ALL, []);\n    Cache.create(klassName, RECORD_AUTO_INCREMENNT_ID, 1);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mresetCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_AUTO_INCREMENNT_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          38,
          43
        ]
      },
      "all": {
        "text": "static all<T extends ActiveRecord$Core>(): Promise<Array<T>> {\n    const klassName = this.name;\n\n    if (Cache.read<T[]>(klassName, RECORD_ALL, 'array').length > 0) {\n      return Promise.resolve(Cache.read<T[]>(klassName, RECORD_ALL, 'array'));\n    } else {\n      return new Promise((resolve, reject) => {\n        this.fetchAll<T>()\n          .then((data) => {\n            const records = data.map((d) => {\n              const record = new this(d);\n\n              record.save();\n\n              return record;\n            }) as Array<T>;\n\n            return resolve(records);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Core\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mcatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          45,
          69
        ]
      },
      "where": {
        "text": "static where<T extends ActiveRecord$Core>(params: ft.Filter$WhereParams): Filter$WhereChain {\n    const whereChain = new Filter$WhereChain<T>(() => this.all<T>());\n    return whereChain.where<T>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Core\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m ft\u001b[38;2;248;248;242m.\u001b[39mFilter$WhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Filter$WhereChain \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereChain \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mFilter$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m whereChain\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          71,
          74
        ]
      }
    }
  },
  "ActiveRecord$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/impl.ts",
      "updatedAt": "2021/02/25 23:31:44 +09:00"
    },
    "instance": {
      "save": {
        "text": "save(): boolean;",
        "highlightText": "\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          22,
          0
        ]
      },
      "saveOrThrow": {
        "text": "saveOrThrow(): void | boolean;",
        "highlightText": "\u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          23,
          0
        ]
      },
      "destroy": {
        "text": "destroy(): Record;",
        "highlightText": "\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Record\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          24,
          0
        ]
      }
    }
  }
}