{
  "ActiveRecord$Error": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/errors/base.ts",
      "updatedAt": "2021/03/20 17:30:09 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Error extends ActiveModel$Error {}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Error\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveModel$Error\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          12,
          12
        ]
      }
    ]
  },
  "ActiveRecord$Base": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/base.ts",
      "updatedAt": "2021/03/20 17:30:09 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Base<P extends t.Params = t.Params> extends ActiveRecord$Impl<P> {\n  public errors: t.Validations$Errors;\n\n  constructor(data?: P) {\n    super();\n\n    (this as any)[RUE_RECORD_ID] = undefined;\n\n    if (data) {\n      Object.keys(data).forEach((key) => {\n        (this as any)[key] = data[key];\n      });\n    }\n\n    this._newRecord = true;\n    this._destroyed = false;\n    this._associationCache = {};\n\n    ActiveRecord$Impl.defineAssociations(this);\n  }\n\n  // override\n  static objType(): t.ObjType {\n    return 'record';\n  }\n\n  protected fetchAll(): Promise<Array<P>> {\n    throw \"Please implement 'fetchAll' in Inherited Class\";\n  }\n\n  // All starting points\n  protected static fetchAll(): Promise<Array<t.Params>> {\n    const instance = new this();\n    return instance.fetchAll();\n  }\n\n  static resetRecordCache() {\n    const klassName = this.name;\n    RecordCache.destroy(klassName);\n    RecordCache.create(klassName, RECORD_ALL, []);\n    RecordCache.create(klassName, RUE_AUTO_INCREMENT_RECORD_ID, 1);\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Impl\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mValidations$Errors\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_destroyed \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_associationCache \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    ActiveRecord$Impl\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// override\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'record'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement 'fetchAll' in Inherited Class\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// All starting points\u001b[39m\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mt\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m instance \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m instance\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mresetRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          16,
          58
        ]
      }
    ],
    "static": {
      "objType": {
        "text": "static objType(): t.ObjType {\n    return 'record';\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'record'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          38,
          40
        ]
      },
      "fetchAll": {
        "text": "protected static fetchAll(): Promise<Array<t.Params>> {\n    const instance = new this();\n    return instance.fetchAll();\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mt\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m instance \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m instance\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          47,
          50
        ]
      },
      "resetRecordCache": {
        "text": "static resetRecordCache() {\n    const klassName = this.name;\n    RecordCache.destroy(klassName);\n    RecordCache.create(klassName, RECORD_ALL, []);\n    RecordCache.create(klassName, RUE_AUTO_INCREMENT_RECORD_ID, 1);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mresetRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          52,
          57
        ]
      }
    },
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<Array<P>> {\n    throw \"Please implement 'fetchAll' in Inherited Class\";\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement 'fetchAll' in Inherited Class\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          42,
          44
        ]
      }
    },
    "$constructor": {
      "text": "constructor(data?: P) {\n    super();\n\n    (this as any)[RUE_RECORD_ID] = undefined;\n\n    if (data) {\n      Object.keys(data).forEach((key) => {\n        (this as any)[key] = data[key];\n      });\n    }\n\n    this._newRecord = true;\n    this._destroyed = false;\n    this._associationCache = {};\n\n    ActiveRecord$Impl.defineAssociations(this);\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_destroyed \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_associationCache \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    ActiveRecord$Impl\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        19,
        35
      ]
    }
  },
  "ActiveRecord$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/impl.ts",
      "updatedAt": "2021/03/20 17:30:09 +09:00"
    },
    "class": [
      {
        "text": "abstract class ActiveRecord$Impl<P extends t.Params = t.Params> extends ActiveModel$Base {\n  // Prepared for checking with hasOwnProperty ()\n  static __rue_impl_class__ = Support$ImplBase.__rue_impl_class__;\n\n  // Instance vairalbes\n  public errors: t.Validations$Errors;\n  protected _destroyed: boolean;\n  protected _newRecord: boolean;\n  _associationCache: act.AssociationCache;\n\n  // ActiveRecord$Persistence\n  static RUE_RECORD_ID = ActiveRecord$Persistence.RUE_RECORD_ID;\n  static RUE_CREATED_AT = ActiveRecord$Persistence.RUE_CREATED_AT;\n  static RUE_UPDATED_AT = ActiveRecord$Persistence.RUE_UPDATED_AT;\n  static RECORD_ALL = ActiveRecord$Persistence.RECORD_ALL;\n  static RUE_AUTO_INCREMENT_RECORD_ID = ActiveRecord$Persistence.RUE_AUTO_INCREMENT_RECORD_ID;\n  static create: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ) => T | T[];\n  static createOrThrow: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ) => T | T[];\n  static delete: (id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[]) => number;\n  static destroy: <T extends ActiveRecord$Base<t.Params>>(\n    id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[]\n  ) => T | T[];\n  static update: <T extends ActiveRecord$Base, U>(\n    id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[] | 'all',\n    params: Partial<U> | Array<Partial<U>>\n  ) => T | T[];\n  // ActiveRecord$Associations\n  static belongsTo: (relationName: string, klass: Function, foreignKey: string) => void;\n  static hasOne: (\n    relationName: string,\n    klass: Function,\n    foreignKey: at.Associations$ForeignKey\n  ) => void;\n  static hasMany: <T extends ActiveRecord$Base>(\n    relationName: string,\n    opts: at.Associations$HasManyOptions<T>,\n    scope?: at.Associations$HasManyScope<T>\n  ) => void;\n  static hasAndBelongsToMany: <T extends ActiveRecord$Base>(\n    relationName: string,\n    opts: at.Associations$HasAndBelongsToManyOptions<T>,\n    scope?: at.Associations$HasAndBelongsToMany<T>\n  ) => void;\n  protected static defineAssociations<T extends ActiveRecord$Base>(self: T) {\n    ActiveRecord$Associations._defineAssociations(self);\n  }\n  // ActiveRecord$Scoping\n  static all: <T extends ActiveRecord$Base<t.Params>>() => ActiveRecord$Relation<T>;\n  static scope: <T extends ActiveRecord$Base>(\n    scopeName: string,\n    fn: (self: typeof ActiveRecord$Base, ...args: any[]) => mt.Scoping$ScopeVal<T>\n  ) => void;\n  // ActiveRecord$Core\n  static find: <T extends ActiveRecord$Base<t.Params>>(\n    ...ids: at.Associations$PrimaryKey[]\n  ) => T | T[];\n  // ActiveRecord$Querying\n  // static find: <T extends ActiveRecord$Base, U = { [key: string]: any }>(\n  //   ...ids: at.Associations$PrimaryKey[]\n  // ) => Promise<T | T[]>;\n  static findBy: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>\n  ) => Promise<T>;\n  static findByOrThrow: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>\n  ) => Promise<T>;\n  static take: <T extends ActiveRecord$Base<t.Params>>(limit?: number) => Promise<T | T[]>;\n  static takeOrThrow: <T extends ActiveRecord$Base<t.Params>>(limit?: number) => Promise<T | T[]>;\n  static first: <T extends ActiveRecord$Base<t.Params>>(limit?: number) => Promise<T | T[]>;\n  static firstOrThrow: <T extends ActiveRecord$Base<t.Params>>(limit?: number) => Promise<T | T[]>;\n  static last: <T extends ActiveRecord$Base<t.Params>>(limit?: number) => Promise<T | T[]>;\n  static lastOrThrow: <T extends ActiveRecord$Base<t.Params>>(limit?: number) => Promise<T | T[]>;\n  static isExists: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    condition?: rmt.FinderMethods$ExistsCondition<U>\n  ) => Promise<boolean>;\n  static isAny: <T extends ActiveRecord$Base<t.Params>>(\n    filter?: (record: T) => boolean\n  ) => Promise<boolean>;\n  static isMany: <T extends ActiveRecord$Base<t.Params>>(\n    filter?: (record: T) => boolean\n  ) => Promise<boolean>;\n  static isNone: <T extends ActiveRecord$Base<t.Params>>(\n    filter?: (record: T) => boolean\n  ) => Promise<boolean>;\n  static isOne: <T extends ActiveRecord$Base<t.Params>>(\n    filter?: (record: T) => boolean\n  ) => Promise<boolean>;\n  static findOrCreateBy: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ) => Promise<T>;\n  static findOrCreateByOrThrow: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ) => Promise<T>;\n  static findOrInitializeBy: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ) => Promise<T>;\n  static createOrFindBy: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>\n  ) => Promise<T>;\n  static createOrFindByOrThrow: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>\n  ) => Promise<T>;\n  static destroyAll: <T extends ActiveRecord$Base<t.Params>>() => Promise<T[]>;\n  static deleteAll: <T extends ActiveRecord$Base<t.Params>>() => Promise<number>;\n  static updateAll: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>\n  ) => Promise<number>;\n  static touchAll: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params?: Partial<U>,\n    opts?: { withCreatedAt?: boolean; time?: string }\n  ) => Promise<number>;\n  static destroyBy: <T extends ActiveRecord$Base<t.Params>>(\n    filter?: (self: T) => boolean\n  ) => Promise<T[]>;\n  static deleteBy: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params?: Partial<U>\n  ) => Promise<number>;\n  static where: <T extends ActiveRecord$Base<U>, U extends t.Params = t.Params>(\n    params: Partial<U>\n  ) => ActiveRecord$Relation<T>;\n  static rewhere: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    params: Partial<U>\n  ) => ActiveRecord$Relation<T>;\n  static order: <\n    T extends ActiveRecord$Base<t.Params>,\n    U = { [key: string]: rmt.QueryMethods$Directions }\n  >(\n    params: Partial<U>\n  ) => ActiveRecord$Relation<T>;\n  static reorder: <\n    T extends ActiveRecord$Base<t.Params>,\n    U = { [key: string]: rmt.QueryMethods$Directions }\n  >(\n    params: Partial<U>\n  ) => ActiveRecord$Relation<T>;\n  static offset: <T extends ActiveRecord$Base<t.Params>>(value: number) => ActiveRecord$Relation<T>;\n  static limit: <T extends ActiveRecord$Base<t.Params>>(value: number) => ActiveRecord$Relation<T>;\n  static group: <T extends ActiveRecord$Base<U>, U extends t.Params>(\n    ...props: Array<keyof U>\n  ) => ActiveRecord$Relation<T>;\n  static unscope: <T extends ActiveRecord$Base<t.Params>>(\n    ...scopeMethods: rmt.QueryMethods$ScopeMethods[]\n  ) => ActiveRecord$Relation<T>;\n\n  /**\n   * prototype\n   */\n\n  // ActiveRecord$Persistence\n  public isNewRecord: () => boolean;\n  public isPersisted: () => boolean;\n  public saveSync: (opts?: { validate: boolean }) => boolean;\n  public saveSyncOrThrow: () => void | boolean;\n  public destroySync: () => this;\n  public isDestroyed: () => boolean;\n  public touch: (opts?: { withCreatedAt?: boolean; time?: string }) => boolean;\n  public update: (params?: Partial<P>) => boolean;\n  public updateOrThrow: (params?: Partial<P>) => boolean;\n  public updateAttribute: (name: string, value: any) => boolean;\n  /**\n   * @alias updateAttribute\n   */\n  public updateProperty: (name: string, value: any) => boolean;\n  /**\n   * @alias updateAttribute\n   */\n  public updateProp: (name: string, value: any) => boolean;\n\n  // ActiveRecord$Associations$Persistence\n  public destroy: () => Promise<this | boolean>;\n  protected _destroyAssociations: () => Promise<this[]>;\n  public save: (opts?: { validate: boolean }) => Promise<boolean>;\n  public saveOrThrow: (opts?: { validate: boolean }) => Promise<boolean>;\n\n  // ActiveRecord$Associations\n  public id: at.Associations$PrimaryKey;\n  public hasAndBelongsToMany: <T extends ActiveRecord$Base<P>>(\n    record: T\n  ) => { [key: string]: at.Associations$ForeignKey };\n  public releaseAndBelongsToMany: <T extends ActiveRecord$Base<P>>(\n    record: T\n  ) => { [key: string]: at.Associations$ForeignKey };\n}",
        "highlightText": "\u001b[38;2;102;217;239mabstract\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Impl\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveModel$Base\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// Prepared for checking with hasOwnProperty ()\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m __rue_impl_class__ \u001b[38;2;248;248;242m=\u001b[39m Support$ImplBase\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;130;146;162m// Instance vairalbes\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mValidations$Errors\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprotected\u001b[39m _destroyed\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprotected\u001b[39m _newRecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  _associationCache\u001b[38;2;248;248;242m:\u001b[39m act\u001b[38;2;248;248;242m.\u001b[39mAssociationCache\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;130;146;162m// ActiveRecord$Persistence\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m create\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m createOrThrow\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdelete\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m destroy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m update\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'all'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Associations\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mbelongsTo\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m foreignKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasOne\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m hasMany\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$HasManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    scope\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$HasManyScope\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m hasAndBelongsToMany\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$HasAndBelongsToManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    scope\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$HasAndBelongsToMany\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    ActiveRecord$Associations\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_defineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Scoping\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m all\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    scopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m...\u001b[39margs\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m mt\u001b[38;2;248;248;242m.\u001b[39mScoping$ScopeVal\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Core\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m find\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Querying\u001b[39m\n  \u001b[38;2;130;146;162m// static find: <T extends ActiveRecord$Base, U = { [key: string]: any }>(\u001b[39m\n  \u001b[38;2;130;146;162m//   ...ids: at.Associations$PrimaryKey[]\u001b[39m\n  \u001b[38;2;130;146;162m// ) => Promise<T | T[]>;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m findBy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m findByOrThrow\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m take\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m takeOrThrow\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m first\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m firstOrThrow\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m last\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m lastOrThrow\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m isExists\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    condition\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mFinderMethods$ExistsCondition\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m isAny\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    filter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m isMany\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    filter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m isNone\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    filter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m isOne\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    filter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m findOrCreateBy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m findOrCreateByOrThrow\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m findOrInitializeBy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m createOrFindBy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m createOrFindByOrThrow\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m destroyAll\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m deleteAll\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m updateAll\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m touchAll\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m destroyBy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    filter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m deleteBy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m where\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m=\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m rewhere\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m order\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\n    \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m reorder\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\n    \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m offset\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m limit\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m group\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m unscope\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$ScopeMethods\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * prototype\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n\n  \u001b[38;2;130;146;162m// ActiveRecord$Persistence\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116misNewRecord\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116misPersisted\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116misDestroyed\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116mtouch\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116mupdateOrThrow\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116mupdateAttribute\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @alias updateAttribute\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116mupdateProperty\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @alias updateAttribute\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116mupdateProp\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;130;146;162m// ActiveRecord$Associations$Persistence\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116m_destroyAssociations\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;130;146;162m// ActiveRecord$Associations\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m hasAndBelongsToMany\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m releaseAndBelongsToMany\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          25,
          216
        ]
      }
    ],
    "static": {
      "defineAssociations": {
        "text": "protected static defineAssociations<T extends ActiveRecord$Base>(self: T) {\n    ActiveRecord$Associations._defineAssociations(self);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    ActiveRecord$Associations\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_defineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          74,
          76
        ]
      }
    }
  },
  "ActiveRecord$Relation$Base": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/relations/base.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Relation$Base<\n  T extends ActiveRecord$Base,\n  H extends ActiveRecord$Relation$Holder<T> = ActiveRecord$Relation$Holder<T>,\n  S = PromiseLike<T[]>\n> extends ActiveRecord$Relation$Impl<T, H> {\n  protected recordKlass: ct.Constructor<T>;\n\n  constructor(executor: t.PromiseExecutor<T, H, S>) {\n    super((resolve, reject) => {\n      // @ts-expect-error\n      return executor(resolve, reject);\n    });\n  }\n\n  // instead of constructor\n  protected _init(recordKlass: ct.Constructor<T>): this {\n    this.recordKlass = recordKlass;\n    return this;\n  }\n\n  /**\n   * @see https://gist.github.com/domenic/8ed6048b187ee8f2ec75\n   * @description Method for getting results. Do not call it in any other method.\n   */\n  rueThen(onFulfilled: t.PromiseResolve<T, S>, onRejected?: t.PromiseReject<any>) {\n    return super.then((value) => {\n      /**\n       * If you use the `ActiveRecord$QueryMethods` methods, it will enter this branch\n       * There are times when 「 value['holder'] instanceof ActiveRecord$Relation$Holder 」 cannot evaluate correctly. (Cause unknown)\n       */\n      if (\n        typeof value === 'object' &&\n        value != null &&\n        value['holder'] &&\n        value['holder']['isHolder']\n      ) {\n        const { holder, scope } = value;\n\n        if (scope instanceof Promise) {\n          scope.then((r) => {\n            holder.scope = r;\n            Evaluator.all(holder);\n\n            if (Object.keys(holder.groupedRecords).length > 0) {\n              return onFulfilled(holder.groupedRecords);\n            } else {\n              return onFulfilled(holder.scope);\n            }\n          });\n        } else {\n          holder.scope = scope as T[];\n\n          Evaluator.all(holder);\n\n          if (Object.keys(holder.groupedRecords).length > 0) {\n            return onFulfilled(holder.groupedRecords);\n          } else {\n            return onFulfilled(holder.scope);\n          }\n        }\n      } else {\n        /**\n         * value is records ((e.g.) T | T[])\n         * @description type error\n         */\n        // @ts-expect-error\n        return onFulfilled(value);\n      }\n    }, onRejected);\n  }\n\n  /**\n   * @see https://gist.github.com/domenic/8ed6048b187ee8f2ec75\n   * @alias rueThen\n   */\n  // @ts-expect-error\n  then(onFulfilled: t.PromiseResolve<T, S>, onRejected?: t.PromiseReject<any>) {\n    return this.rueThen(onFulfilled, onRejected);\n  }\n\n  protected superThen(\n    onFulfilled: t.PromiseResolveHolder<T, H, S>,\n    onRejected?: t.PromiseReject<any>\n  ) {\n    // @ts-expect-error\n    return super.__rue_then__(onFulfilled, onRejected);\n  }\n\n  /**\n   * @alias rueCatch\n   */\n  // @ts-expect-error\n  catch(errFn: (err: any) => void | PromiseLike<void>) {\n    return this.rueCatch(errFn);\n  }\n\n  rueCatch(errFn: (err: any) => void | PromiseLike<void>) {\n    return (\n      super\n        // @ts-expect-error\n        .__rue_then__((value) => {\n          if (\n            typeof value === 'object' &&\n            value != null &&\n            value['holder'] &&\n            value['holder']['isHolder']\n          ) {\n            const { holder } = value;\n            Evaluator.all(holder);\n            holder.errors.forEach((err) => {\n              throw err;\n            });\n          }\n        })\n        .__rue_catch__(errFn)\n    );\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-scoping\n   */\n  scoping<U>(callback: (holder: H) => U | Promise<U>): Promise<U> {\n    return super.then(({ holder, scope }) => {\n      if (scope instanceof Promise) {\n        return scope.then((records) => {\n          holder.scope = records;\n          Evaluator.all(holder);\n          return callback(holder);\n        });\n      } else {\n        holder.scope = scope as T[];\n        Evaluator.all(holder);\n        return callback(holder);\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-many-3F\n   */\n  isMany(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.filter(filter || Boolean).length > 1;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-none-3F\n   */\n  isNone(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.filter(filter || Boolean).length === 0;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-one-3F\n   */\n  isOne(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.filter(filter || Boolean).length === 1;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-size\n   */\n  size(): Promise<number | { [key: string]: number }> {\n    return this.scoping<number | { [key: string]: number }>((holder) => {\n      if (isPresent(holder.groupedRecords)) {\n        return Object.keys(holder.groupedRecords).reduce((acc, key) => {\n          const records = holder.groupedRecords[key];\n          acc[key] = records.length;\n          return acc;\n        }, {});\n      } else {\n        return holder.scope.length;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-any-3F\n   */\n  isAny(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.filter(filter || Boolean).length > 0;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-blank-3F\n   * Returns true if relation is blank.\n   */\n  isBlank(): Promise<boolean> {\n    return this.superThen(({ scope }) => {\n      if (scope instanceof Promise) {\n        return scope.then((r) => {\n          return r.length === 0;\n        });\n      } else {\n        return (scope as T[]).length === 0;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-empty-3F\n   */\n  isEmpty(): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.length === 0;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-build\n   */\n  build<U>(params?: Partial<U> | Array<Partial<U>>, yielder?: (self: T) => void): Promise<T | T[]> {\n    return this.scoping((holder) => {\n      if (Array.isArray(params)) {\n        return params.map((param) => {\n          const record = new this.recordKlass(param);\n          if (yielder) yielder(record);\n          holder.scope.push(record);\n          return record;\n        });\n      } else {\n        const record = new this.recordKlass(params);\n        if (yielder) yielder(record);\n        holder.scope.push(record);\n        return record;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-create\n   */\n  create<U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): Promise<T | T[]> {\n    return this.scoping((holder) => {\n      // @ts-ignore\n      return this.recordKlass.create(params, (self) => {\n        if (yielder) yielder(self);\n        holder.scope.push(self);\n      });\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-create-21\n   */\n  createOrThrow<U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    return this.scoping((holder) => {\n      // @ts-expect-error\n      return this.recordKlass.createOrThrow(params, (self) => {\n        if (yielder) yielder(self);\n        holder.scope.push(self);\n      });\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-create_or_find_by\n   * @todo Support yielder\n   */\n  createOrFindBy<U>(params: Partial<U>): Promise<T> {\n    // @ts-ignore\n    return (this.recordKlass as typeof ActiveRecord$Base).findBy(params).then((record) => {\n      if (record) {\n        return record;\n      } else {\n        return this.create<Partial<U>>(params);\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-create_or_find_by-21\n   * @todo Support yielder\n   */\n  createOrFindByOrThrow<U>(params: Partial<U>): Promise<T> {\n    // @ts-ignore\n    return (this.recordKlass as typeof ActiveRecord$Base).findBy<T, U>(params).then((record) => {\n      if (record) {\n        return record;\n      } else {\n        return this.createOrThrow<U>(params);\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-delete_by\n   */\n  deleteBy<U>(params?: Partial<U>): Promise<number> {\n    const deleteRecordFn = (record: T): boolean => {\n      return !!record.destroySync();\n    };\n\n    return (\n      this.recordKlass\n        // @ts-ignore\n        .where<T, U>(params)\n        .superThen(({ holder }) => {\n          Evaluator.all(holder);\n          return Promise.all(holder.scope.map(deleteRecordFn)).then((result) => {\n            return result.filter(Boolean).length;\n          });\n        })\n    );\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-delete_all\n   */\n  deleteAll(): Promise<number> {\n    return this.scoping<number>((holder) => {\n      const deleteCount = holder.scope.length;\n      RecordCache.update(this.recordKlass.name, RECORD_ALL, []);\n      holder.scope = [];\n      return deleteCount;\n    });\n  }\n\n  /**\n   * @see https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/relation.rb#L613-L615\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-destroy_by\n   * @todo Use ActiveRecord$QueryMethods#where\n   */\n  destroyBy(filter?: (self: T) => boolean): Promise<T[]> {\n    return this.superThen(({ holder }) => {\n      let leavedData = [];\n      let deleteData = [];\n\n      holder.scope.forEach((record) => {\n        if (filter) {\n          if (filter(record)) {\n            deleteData.push(record);\n          } else {\n            leavedData.push(record);\n          }\n        } else {\n          deleteData.push(record);\n        }\n      });\n\n      RecordCache.update(this.recordKlass.name, RECORD_ALL, leavedData);\n      holder.scope = leavedData;\n\n      Evaluator.all(holder);\n\n      deleteData.forEach((record) => {\n        record._destroyed = true;\n        Object.freeze(record);\n      });\n      return deleteData;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-destroy_all\n   */\n  destroyAll(): Promise<T[]> {\n    return this.scoping((holder) => {\n      const destroyed = holder.scope.map((record: T) => {\n        const destroyed = record.destroySync();\n        Object.freeze(destroyed);\n        return destroyed;\n      });\n      holder.scope = [];\n      return destroyed;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-find_or_create_by\n   */\n  findOrCreateBy<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    return this.findBy<U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return record;\n      } else {\n        return this.create<Partial<U>>(params).then((createdRecord: T) => {\n          if (yielder) yielder(createdRecord);\n          return createdRecord;\n        });\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-find_or_create_by-21\n   */\n  findOrCreateByOrThrow<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return record;\n      } else {\n        return this.createOrThrow<Partial<U>>(params).then((createdRecord) => {\n          if (yielder) yielder(createdRecord);\n          return createdRecord;\n        });\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-find_or_initialize_by\n   */\n  findOrInitializeBy<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return record;\n      } else {\n        const newRecord = new this.recordKlass(params);\n        // @ts-expect-error\n        newRecord._newRecord = true;\n        if (yielder) yielder(newRecord);\n        return newRecord;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-update_all\n   */\n  updateAll<U>(params: Partial<U>): Promise<number> {\n    const updateFn = (record: T): boolean => {\n      return record.update(params);\n    };\n\n    return this.scoping<number>((holder) => {\n      return Promise.all(holder.scope.map(updateFn)).then((result) => {\n        return result.filter(Boolean).length;\n      });\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-touch_all\n   */\n  touchAll<U>(\n    params?: Partial<U>,\n    opts?: { withCreatedAt?: boolean; time?: string }\n  ): Promise<number> {\n    const updateProps =\n      opts && opts.withCreatedAt ? [RUE_CREATED_AT, RUE_UPDATED_AT] : [RUE_UPDATED_AT];\n    const datetime = opts && opts.time ? dayjs(opts.time).format() : dayjs().format();\n\n    const touchFn = (record: T): boolean => {\n      updateProps.forEach((timestamp) => {\n        record.update({ [timestamp]: datetime });\n      });\n      return true;\n    };\n\n    return (\n      this.recordKlass\n        // @ts-expect-error\n        .where<T, U>(params)\n        .superThen(({ holder }) => {\n          Evaluator.all(holder);\n          return Promise.all(holder.scope.map(touchFn)).then((result) => {\n            holder.scope = RecordCache.read(holder.recordKlass.name, RECORD_ALL, 'array');\n            return result.filter(Boolean).length;\n          });\n        })\n    );\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-to_a\n   */\n  toA(): Promise<T[]> {\n    return this.scoping((holder) => {\n      return holder.scope;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-to_a\n   */\n  toArray(): Promise<T[]> {\n    return this.toA();\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m PromiseLike\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation$Impl\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mprotected\u001b[39m recordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mexecutor\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseExecutor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mexecutor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// instead of constructor\u001b[39m\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116m_init\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;248;248;242m=\u001b[39m recordKlass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://gist.github.com/domenic/8ed6048b187ee8f2ec75\u001b[39m\n\u001b[38;2;130;146;162m   * @description Method for getting results. Do not call it in any other method.\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mrueThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39monFulfilled\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseResolve\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseReject\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * If you use the `ActiveRecord$QueryMethods` methods, it will enter this branch\u001b[39m\n\u001b[38;2;130;146;162m       * There are times when 「 value['holder'] instanceof ActiveRecord$Relation$Holder 」 cannot evaluate correctly. (Cause unknown)\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mtypeof\u001b[39m value \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'isHolder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m r\u001b[38;2;248;248;242m;\u001b[39m\n            Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m scope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * value is records ((e.g.) T | T[])\u001b[39m\n\u001b[38;2;130;146;162m         * @description type error\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://gist.github.com/domenic/8ed6048b187ee8f2ec75\u001b[39m\n\u001b[38;2;130;146;162m   * @alias rueThen\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39monFulfilled\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseResolve\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseReject\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrueThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39monFulfilled\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    onFulfilled\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseResolveHolder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    onRejected\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseReject\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__rue_then__\u001b[39m\u001b[38;2;248;248;242m(\u001b[39monFulfilled\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @alias rueCatch\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;102;217;239mcatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116merrFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m PromiseLike\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrueCatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merrFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mrueCatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116merrFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m PromiseLike\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239msuper\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__rue_then__\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n            \u001b[38;2;102;217;239mtypeof\u001b[39m value \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n            value \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n            value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n            value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'isHolder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n          \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n            Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mthrow\u001b[39m err\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__rue_catch__\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merrFn\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-scoping\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m;\u001b[39m\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m scope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-many-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-none-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misNone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-one-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misOne\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-size\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116msize\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          acc\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-any-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-blank-3F\u001b[39m\n\u001b[38;2;130;146;162m   * Returns true if relation is blank.\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misBlank\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-empty-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misEmpty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-build\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mbuild\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m params\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-create\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-create-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-create_or_find_by\u001b[39m\n\u001b[38;2;130;146;162m   * @todo Support yielder\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mcreateOrFindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-create_or_find_by-21\u001b[39m\n\u001b[38;2;130;146;162m   * @todo Support yielder\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mcreateOrFindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-delete_by\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mdeleteBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m deleteRecordFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\n        \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdeleteRecordFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-delete_all\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mdeleteAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m deleteCount \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n      RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m deleteCount\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/relation.rb#L613-L615\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-destroy_by\u001b[39m\n\u001b[38;2;130;146;162m   * @todo Use ActiveRecord$QueryMethods#where\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mdestroyBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m leavedData\u001b[38;2;248;248;242m;\u001b[39m\n\n      Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m_destroyed \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m deleteData\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-destroy_all\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m destroyed \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m destroyed \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdestroyed\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m destroyed\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m destroyed\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-find_or_create_by\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mfindOrCreateBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m createdRecord\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-find_or_create_by-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mfindOrCreateByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m createdRecord\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-find_or_initialize_by\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mfindOrInitializeBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        newRecord\u001b[38;2;248;248;242m.\u001b[39m_newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m newRecord\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-update_all\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mupdateAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m updateFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mupdateFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/v6.1.3/classes/ActiveRecord/Relation.html#method-i-touch_all\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mtouchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m updateProps \u001b[38;2;248;248;242m=\u001b[39m\n      opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mwithCreatedAt \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m datetime \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mtime \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mtime\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m touchFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      updateProps\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtimestamp\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mtimestamp\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m datetime \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtouchFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-to_a\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-to_a\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mtoArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          34,
          531
        ]
      }
    ],
    "instance": {
      "_init": {
        "text": "protected _init(recordKlass: ct.Constructor<T>): this {\n    this.recordKlass = recordKlass;\n    return this;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116m_init\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;248;248;242m=\u001b[39m recordKlass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          49,
          52
        ]
      },
      "rueThen": {
        "text": "rueThen(onFulfilled: t.PromiseResolve<T, S>, onRejected?: t.PromiseReject<any>) {\n    return super.then((value) => {\n      /**\n       * If you use the `ActiveRecord$QueryMethods` methods, it will enter this branch\n       * There are times when 「 value['holder'] instanceof ActiveRecord$Relation$Holder 」 cannot evaluate correctly. (Cause unknown)\n       */\n      if (\n        typeof value === 'object' &&\n        value != null &&\n        value['holder'] &&\n        value['holder']['isHolder']\n      ) {\n        const { holder, scope } = value;\n\n        if (scope instanceof Promise) {\n          scope.then((r) => {\n            holder.scope = r;\n            Evaluator.all(holder);\n\n            if (Object.keys(holder.groupedRecords).length > 0) {\n              return onFulfilled(holder.groupedRecords);\n            } else {\n              return onFulfilled(holder.scope);\n            }\n          });\n        } else {\n          holder.scope = scope as T[];\n\n          Evaluator.all(holder);\n\n          if (Object.keys(holder.groupedRecords).length > 0) {\n            return onFulfilled(holder.groupedRecords);\n          } else {\n            return onFulfilled(holder.scope);\n          }\n        }\n      } else {\n        /**\n         * value is records ((e.g.) T | T[])\n         * @description type error\n         */\n        // @ts-expect-error\n        return onFulfilled(value);\n      }\n    }, onRejected);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mrueThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39monFulfilled\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseResolve\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseReject\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * If you use the `ActiveRecord$QueryMethods` methods, it will enter this branch\u001b[39m\n\u001b[38;2;130;146;162m       * There are times when 「 value['holder'] instanceof ActiveRecord$Relation$Holder 」 cannot evaluate correctly. (Cause unknown)\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mtypeof\u001b[39m value \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'isHolder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m r\u001b[38;2;248;248;242m;\u001b[39m\n            Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m scope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * value is records ((e.g.) T | T[])\u001b[39m\n\u001b[38;2;130;146;162m         * @description type error\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          58,
          103
        ]
      },
      "then": {
        "text": "then(onFulfilled: t.PromiseResolve<T, S>, onRejected?: t.PromiseReject<any>) {\n    return this.rueThen(onFulfilled, onRejected);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39monFulfilled\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseResolve\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseReject\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrueThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39monFulfilled\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          110,
          112
        ]
      },
      "superThen": {
        "text": "protected superThen(\n    onFulfilled: t.PromiseResolveHolder<T, H, S>,\n    onRejected?: t.PromiseReject<any>\n  ) {\n    // @ts-expect-error\n    return super.__rue_then__(onFulfilled, onRejected);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    onFulfilled\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseResolveHolder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    onRejected\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseReject\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__rue_then__\u001b[39m\u001b[38;2;248;248;242m(\u001b[39monFulfilled\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          114,
          120
        ]
      },
      "catch": {
        "text": "catch(errFn: (err: any) => void | PromiseLike<void>) {\n    return this.rueCatch(errFn);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mcatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116merrFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m PromiseLike\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrueCatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merrFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          126,
          128
        ]
      },
      "rueCatch": {
        "text": "rueCatch(errFn: (err: any) => void | PromiseLike<void>) {\n    return (\n      super\n        // @ts-expect-error\n        .__rue_then__((value) => {\n          if (\n            typeof value === 'object' &&\n            value != null &&\n            value['holder'] &&\n            value['holder']['isHolder']\n          ) {\n            const { holder } = value;\n            Evaluator.all(holder);\n            holder.errors.forEach((err) => {\n              throw err;\n            });\n          }\n        })\n        .__rue_catch__(errFn)\n    );\n  }",
        "highlightText": "\u001b[38;2;230;219;116mrueCatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116merrFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m PromiseLike\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239msuper\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__rue_then__\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n            \u001b[38;2;102;217;239mtypeof\u001b[39m value \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n            value \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n            value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n            value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'isHolder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n          \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n            Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mthrow\u001b[39m err\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__rue_catch__\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merrFn\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          130,
          150
        ]
      },
      "scoping": {
        "text": "scoping<U>(callback: (holder: H) => U | Promise<U>): Promise<U> {\n    return super.then(({ holder, scope }) => {\n      if (scope instanceof Promise) {\n        return scope.then((records) => {\n          holder.scope = records;\n          Evaluator.all(holder);\n          return callback(holder);\n        });\n      } else {\n        holder.scope = scope as T[];\n        Evaluator.all(holder);\n        return callback(holder);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m;\u001b[39m\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m scope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          155,
          169
        ]
      },
      "isMany": {
        "text": "isMany(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.filter(filter || Boolean).length > 1;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          174,
          178
        ]
      },
      "isNone": {
        "text": "isNone(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.filter(filter || Boolean).length === 0;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misNone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          183,
          187
        ]
      },
      "isOne": {
        "text": "isOne(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.filter(filter || Boolean).length === 1;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misOne\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          192,
          196
        ]
      },
      "size": {
        "text": "size(): Promise<number | { [key: string]: number }> {\n    return this.scoping<number | { [key: string]: number }>((holder) => {\n      if (isPresent(holder.groupedRecords)) {\n        return Object.keys(holder.groupedRecords).reduce((acc, key) => {\n          const records = holder.groupedRecords[key];\n          acc[key] = records.length;\n          return acc;\n        }, {});\n      } else {\n        return holder.scope.length;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116msize\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          acc\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          201,
          213
        ]
      },
      "isAny": {
        "text": "isAny(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.filter(filter || Boolean).length > 0;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          218,
          222
        ]
      },
      "isBlank": {
        "text": "isBlank(): Promise<boolean> {\n    return this.superThen(({ scope }) => {\n      if (scope instanceof Promise) {\n        return scope.then((r) => {\n          return r.length === 0;\n        });\n      } else {\n        return (scope as T[]).length === 0;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misBlank\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          228,
          238
        ]
      },
      "isEmpty": {
        "text": "isEmpty(): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.scope.length === 0;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misEmpty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          243,
          247
        ]
      },
      "build": {
        "text": "build<U>(params?: Partial<U> | Array<Partial<U>>, yielder?: (self: T) => void): Promise<T | T[]> {\n    return this.scoping((holder) => {\n      if (Array.isArray(params)) {\n        return params.map((param) => {\n          const record = new this.recordKlass(param);\n          if (yielder) yielder(record);\n          holder.scope.push(record);\n          return record;\n        });\n      } else {\n        const record = new this.recordKlass(params);\n        if (yielder) yielder(record);\n        holder.scope.push(record);\n        return record;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mbuild\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m params\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          252,
          268
        ]
      },
      "create": {
        "text": "create<U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): Promise<T | T[]> {\n    return this.scoping((holder) => {\n      // @ts-ignore\n      return this.recordKlass.create(params, (self) => {\n        if (yielder) yielder(self);\n        holder.scope.push(self);\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          273,
          284
        ]
      },
      "createOrThrow": {
        "text": "createOrThrow<U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    return this.scoping((holder) => {\n      // @ts-expect-error\n      return this.recordKlass.createOrThrow(params, (self) => {\n        if (yielder) yielder(self);\n        holder.scope.push(self);\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          289,
          300
        ]
      },
      "createOrFindBy": {
        "text": "createOrFindBy<U>(params: Partial<U>): Promise<T> {\n    // @ts-ignore\n    return (this.recordKlass as typeof ActiveRecord$Base).findBy(params).then((record) => {\n      if (record) {\n        return record;\n      } else {\n        return this.create<Partial<U>>(params);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreateOrFindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          306,
          315
        ]
      },
      "createOrFindByOrThrow": {
        "text": "createOrFindByOrThrow<U>(params: Partial<U>): Promise<T> {\n    // @ts-ignore\n    return (this.recordKlass as typeof ActiveRecord$Base).findBy<T, U>(params).then((record) => {\n      if (record) {\n        return record;\n      } else {\n        return this.createOrThrow<U>(params);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreateOrFindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          321,
          330
        ]
      },
      "deleteBy": {
        "text": "deleteBy<U>(params?: Partial<U>): Promise<number> {\n    const deleteRecordFn = (record: T): boolean => {\n      return !!record.destroySync();\n    };\n\n    return (\n      this.recordKlass\n        // @ts-ignore\n        .where<T, U>(params)\n        .superThen(({ holder }) => {\n          Evaluator.all(holder);\n          return Promise.all(holder.scope.map(deleteRecordFn)).then((result) => {\n            return result.filter(Boolean).length;\n          });\n        })\n    );\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdeleteBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m deleteRecordFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\n        \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdeleteRecordFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          335,
          351
        ]
      },
      "deleteAll": {
        "text": "deleteAll(): Promise<number> {\n    return this.scoping<number>((holder) => {\n      const deleteCount = holder.scope.length;\n      RecordCache.update(this.recordKlass.name, RECORD_ALL, []);\n      holder.scope = [];\n      return deleteCount;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdeleteAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m deleteCount \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n      RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m deleteCount\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          356,
          363
        ]
      },
      "destroyBy": {
        "text": "destroyBy(filter?: (self: T) => boolean): Promise<T[]> {\n    return this.superThen(({ holder }) => {\n      let leavedData = [];\n      let deleteData = [];\n\n      holder.scope.forEach((record) => {\n        if (filter) {\n          if (filter(record)) {\n            deleteData.push(record);\n          } else {\n            leavedData.push(record);\n          }\n        } else {\n          deleteData.push(record);\n        }\n      });\n\n      RecordCache.update(this.recordKlass.name, RECORD_ALL, leavedData);\n      holder.scope = leavedData;\n\n      Evaluator.all(holder);\n\n      deleteData.forEach((record) => {\n        record._destroyed = true;\n        Object.freeze(record);\n      });\n      return deleteData;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroyBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m leavedData\u001b[38;2;248;248;242m;\u001b[39m\n\n      Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m_destroyed \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m deleteData\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          370,
          398
        ]
      },
      "destroyAll": {
        "text": "destroyAll(): Promise<T[]> {\n    return this.scoping((holder) => {\n      const destroyed = holder.scope.map((record: T) => {\n        const destroyed = record.destroySync();\n        Object.freeze(destroyed);\n        return destroyed;\n      });\n      holder.scope = [];\n      return destroyed;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m destroyed \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m destroyed \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdestroyed\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m destroyed\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m destroyed\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          403,
          413
        ]
      },
      "findOrCreateBy": {
        "text": "findOrCreateBy<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    return this.findBy<U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return record;\n      } else {\n        return this.create<Partial<U>>(params).then((createdRecord: T) => {\n          if (yielder) yielder(createdRecord);\n          return createdRecord;\n        });\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfindOrCreateBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m createdRecord\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          418,
          430
        ]
      },
      "findOrCreateByOrThrow": {
        "text": "findOrCreateByOrThrow<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return record;\n      } else {\n        return this.createOrThrow<Partial<U>>(params).then((createdRecord) => {\n          if (yielder) yielder(createdRecord);\n          return createdRecord;\n        });\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfindOrCreateByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m createdRecord\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          435,
          448
        ]
      },
      "findOrInitializeBy": {
        "text": "findOrInitializeBy<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return record;\n      } else {\n        const newRecord = new this.recordKlass(params);\n        // @ts-expect-error\n        newRecord._newRecord = true;\n        if (yielder) yielder(newRecord);\n        return newRecord;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfindOrInitializeBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        newRecord\u001b[38;2;248;248;242m.\u001b[39m_newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m newRecord\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          453,
          467
        ]
      },
      "updateAll": {
        "text": "updateAll<U>(params: Partial<U>): Promise<number> {\n    const updateFn = (record: T): boolean => {\n      return record.update(params);\n    };\n\n    return this.scoping<number>((holder) => {\n      return Promise.all(holder.scope.map(updateFn)).then((result) => {\n        return result.filter(Boolean).length;\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdateAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m updateFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mupdateFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          472,
          482
        ]
      },
      "touchAll": {
        "text": "touchAll<U>(\n    params?: Partial<U>,\n    opts?: { withCreatedAt?: boolean; time?: string }\n  ): Promise<number> {\n    const updateProps =\n      opts && opts.withCreatedAt ? [RUE_CREATED_AT, RUE_UPDATED_AT] : [RUE_UPDATED_AT];\n    const datetime = opts && opts.time ? dayjs(opts.time).format() : dayjs().format();\n\n    const touchFn = (record: T): boolean => {\n      updateProps.forEach((timestamp) => {\n        record.update({ [timestamp]: datetime });\n      });\n      return true;\n    };\n\n    return (\n      this.recordKlass\n        // @ts-expect-error\n        .where<T, U>(params)\n        .superThen(({ holder }) => {\n          Evaluator.all(holder);\n          return Promise.all(holder.scope.map(touchFn)).then((result) => {\n            holder.scope = RecordCache.read(holder.recordKlass.name, RECORD_ALL, 'array');\n            return result.filter(Boolean).length;\n          });\n        })\n    );\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtouchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m updateProps \u001b[38;2;248;248;242m=\u001b[39m\n      opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mwithCreatedAt \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m datetime \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mtime \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mtime\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m touchFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      updateProps\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtimestamp\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mtimestamp\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m datetime \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtouchFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          487,
          514
        ]
      },
      "toA": {
        "text": "toA(): Promise<T[]> {\n    return this.scoping((holder) => {\n      return holder.scope;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          519,
          523
        ]
      },
      "toArray": {
        "text": "toArray(): Promise<T[]> {\n    return this.toA();\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          528,
          530
        ]
      }
    },
    "$constructor": {
      "text": "constructor(executor: t.PromiseExecutor<T, H, S>) {\n    super((resolve, reject) => {\n      // @ts-expect-error\n      return executor(resolve, reject);\n    });\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mexecutor\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPromiseExecutor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mexecutor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        41,
        46
      ]
    }
  },
  "ActiveRecord$Relation$Holder": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/relations/holder.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Relation$Holder<T extends ActiveRecord$Base> {\n  public recordKlass: ct.Constructor<T>;\n  public scope: T[];\n  public scopeParams: {\n    where: { [key: string]: any };\n    order: { [key: string]: mt.QueryMethods$Directions };\n    offset?: number;\n    limit?: number;\n    group: string[];\n  };\n  public groupedRecords: { [key: string]: T[] };\n  public errors: et.ErrObj[];\n  private readonly _defaultScopeParams: any;\n  public readonly isHolder = true;\n\n  constructor(recordKlass: ct.Constructor<T>, records: T[]) {\n    this.recordKlass = recordKlass;\n    this.scope = Array.from(records || []);\n    this._defaultScopeParams = {\n      where: {},\n      order: {},\n      offset: undefined,\n      limit: undefined,\n      group: [],\n    };\n    Object.freeze(this._defaultScopeParams);\n    // Must be passed by value\n    this.scopeParams = Object.assign({}, JSON.parse(JSON.stringify(this._defaultScopeParams)));\n    this.groupedRecords = {};\n    this.errors = [];\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m recordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m scopeParams\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    where\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    order\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m mt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    offset\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    limit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    group\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m groupedRecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m et\u001b[38;2;248;248;242m.\u001b[39mErrObj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m _defaultScopeParams\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m isHolder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;248;248;242m=\u001b[39m recordKlass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      where\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      order\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      offset\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      limit\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      group\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// Must be passed by value\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mparse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          9,
          40
        ]
      }
    ],
    "$constructor": {
      "text": "constructor(recordKlass: ct.Constructor<T>, records: T[]) {\n    this.recordKlass = recordKlass;\n    this.scope = Array.from(records || []);\n    this._defaultScopeParams = {\n      where: {},\n      order: {},\n      offset: undefined,\n      limit: undefined,\n      group: [],\n    };\n    Object.freeze(this._defaultScopeParams);\n    // Must be passed by value\n    this.scopeParams = Object.assign({}, JSON.parse(JSON.stringify(this._defaultScopeParams)));\n    this.groupedRecords = {};\n    this.errors = [];\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;248;248;242m=\u001b[39m recordKlass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      where\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      order\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      offset\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      limit\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      group\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// Must be passed by value\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mparse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        24,
        39
      ]
    }
  },
  "ActiveRecord$Relation$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/relations/impl.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "abstract class ActiveRecord$Relation$Impl<\n  T extends ActiveRecord$Base,\n  H extends ActiveRecord$Relation$Holder<T>\n> extends Promise<{ holder: H; scope: T[] | PromiseLike<T[]> }> {\n  // Prepared for checking with hasOwnProperty ()\n  static __rue_impl_class__ = ActiveSupport$ImplBase.__rue_impl_class__;\n\n  /**\n   * prototype\n   */\n\n  // ActiveRecord$FinderMethods\n  find: <P = { [key: string]: any }>(...ids: at.Associations$PrimaryKey[]) => Promise<T | T[]>;\n  isExists: <P>(condition?: mt.FinderMethods$ExistsCondition<P>) => Promise<boolean>;\n  findBy: <P>(params: Partial<P>) => Promise<T>;\n  findByOrThrow: <P>(params: Partial<P>) => Promise<T>;\n  first: (limit?: number) => Promise<T | T[]>;\n  firstOrThrow: (limit?: number) => Promise<T | T[]>;\n  isInclude: (record: T | T[] | Promise<T | T[]>) => Promise<boolean>;\n  isMember: (record: T) => Promise<boolean>;\n  last: (limit?: number) => Promise<T | T[]>;\n  lastOrThrow: (limit?: number) => Promise<T | T[]>;\n  take: (limit?: number) => Promise<T | T[]>;\n  takeOrThrow: (limit?: number) => Promise<T | T[]>;\n  // ActiveRecord$QueryMethods\n  where: <U>(params: Partial<U>) => this;\n  rewhere: <U>(params: Partial<U>) => this;\n  order: <U = { [key: string]: 'desc' | 'asc' | 'DESC' | 'ASC' }>(params: Partial<U>) => this;\n  reorder: <U = { [key: string]: 'desc' | 'asc' | 'DESC' | 'ASC' }>(params: Partial<U>) => this;\n  reverseOrder: () => this;\n  offset: (value: number) => this;\n  limit: (value: number) => this;\n  group: <U = { [key: string]: any }>(...props: Array<keyof U>) => this;\n  unscope: (...scopeMethods: mt.QueryMethods$ScopeMethods[]) => this;\n}",
        "highlightText": "\u001b[38;2;102;217;239mabstract\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation$Impl\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m holder\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m;\u001b[39m\u001b[38;2;230;219;116m scope\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m PromiseLike\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// Prepared for checking with hasOwnProperty ()\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m __rue_impl_class__ \u001b[38;2;248;248;242m=\u001b[39m ActiveSupport$ImplBase\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * prototype\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n\n  \u001b[38;2;130;146;162m// ActiveRecord$FinderMethods\u001b[39m\n  find\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  isExists\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m mt\u001b[38;2;248;248;242m.\u001b[39mFinderMethods$ExistsCondition\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  findBy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  findByOrThrow\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mfirstOrThrow\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116misInclude\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116misMember\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mlastOrThrow\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$QueryMethods\u001b[39m\n  where\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  rewhere\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  order\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'desc'\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  reorder\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'desc'\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mreverseOrder\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  group\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m:\u001b[39m mt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$ScopeMethods\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          21,
          55
        ]
      }
    ]
  },
  "CollectionProxyRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.collection_proxy.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class CollectionProxyRecord extends ActiveRecord$Base<CollectionProxyRecordParams> {\n  public id: CollectionProxyRecordParams['id'];\n  public name: CollectionProxyRecordParams['name'];\n  public age: CollectionProxyRecordParams['age'];\n  public children: t.Record$HasMany<CollectionProxyChildRecord>;\n\n  protected fetchAll(): Promise<CollectionProxyRecordParams[]> {\n    return Promise.resolve([\n      { id: 1, name: 'name_1', age: 1 },\n      { id: 2, name: 'name_2', age: 2 },\n      { id: 3, name: 'name_3', age: 3 },\n      { id: 4, name: 'name_4', age: 4 },\n    ]);\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mCollectionProxyRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mCollectionProxyRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m CollectionProxyRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m CollectionProxyRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m CollectionProxyRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m children\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRecord$HasMany\u001b[38;2;248;248;242m<\u001b[39mCollectionProxyChildRecord\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mCollectionProxyRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          23,
          37
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<CollectionProxyRecordParams[]> {\n    return Promise.resolve([\n      { id: 1, name: 'name_1', age: 1 },\n      { id: 2, name: 'name_2', age: 2 },\n      { id: 3, name: 'name_3', age: 3 },\n      { id: 4, name: 'name_4', age: 4 },\n    ]);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mCollectionProxyRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          29,
          36
        ]
      }
    }
  },
  "CollectionProxyChildRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.collection_proxy.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class CollectionProxyChildRecord extends ActiveRecord$Base<CollectionProxyChildRecordParams> {\n  public id: CollectionProxyChildRecordParams['id'];\n  public parentId: CollectionProxyChildRecordParams['parentId'];\n  public childName: CollectionProxyChildRecordParams['childName'];\n  public childAge: CollectionProxyChildRecordParams['childAge'];\n\n  protected fetchAll(): Promise<CollectionProxyChildRecordParams[]> {\n    return Promise.resolve([\n      { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n      { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n      { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n      { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n    ]);\n  }\n\n  static translate(key: string, opts?: any): string {\n    return key;\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mCollectionProxyChildRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mCollectionProxyChildRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m CollectionProxyChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m CollectionProxyChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'parentId'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m CollectionProxyChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childName'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m CollectionProxyChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childAge'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mCollectionProxyChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m key\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          39,
          57
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<CollectionProxyChildRecordParams[]> {\n    return Promise.resolve([\n      { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n      { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n      { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n      { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n    ]);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mCollectionProxyChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          45,
          52
        ]
      }
    },
    "static": {
      "translate": {
        "text": "static translate(key: string, opts?: any): string {\n    return key;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m key\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          54,
          56
        ]
      }
    }
  },
  "PersistenceRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class PersistenceRecord extends ActiveRecord$Base<PersistenceRecordParams> {\n  public id: PersistenceRecordParams['id'];\n  public name: PersistenceRecordParams['name'];\n  public age: PersistenceRecordParams['age'];\n  public children: t.Record$HasMany<PersistenceChildRecord>;\n\n  protected fetchAll(): Promise<PersistenceRecordParams[]> {\n    return Promise.resolve([\n      { id: 1, name: 'name_1', age: 1 },\n      { id: 2, name: 'name_2', age: 2 },\n      { id: 3, name: 'name_3', age: 3 },\n      { id: 4, name: 'name_4', age: 4 },\n    ]);\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mPersistenceRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m children\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRecord$HasMany\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecord\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          15,
          29
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceRecordParams[]> {\n    return Promise.resolve([\n      { id: 1, name: 'name_1', age: 1 },\n      { id: 2, name: 'name_2', age: 2 },\n      { id: 3, name: 'name_3', age: 3 },\n      { id: 4, name: 'name_4', age: 4 },\n    ]);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          21,
          28
        ]
      }
    }
  },
  "PersistenceChildRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class PersistenceChildRecord extends ActiveRecord$Base<PersistenceChildRecordParams> {\n  public id: PersistenceChildRecordParams['id'];\n  public parentId: PersistenceChildRecordParams['parentId'];\n  public childName: PersistenceChildRecordParams['childName'];\n  public childAge: PersistenceChildRecordParams['childAge'];\n\n  protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n    return Promise.resolve([\n      { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n      { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n      { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n      { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n    ]);\n  }\n\n  static translate(key: string, opts?: any): string {\n    return key;\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mPersistenceChildRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceChildRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'parentId'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childName'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childAge'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m key\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          41,
          59
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n    return Promise.resolve([\n      { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n      { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n      { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n      { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n    ]);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          47,
          54
        ]
      }
    },
    "static": {
      "translate": {
        "text": "static translate(key: string, opts?: any): string {\n    return key;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m key\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          56,
          58
        ]
      }
    }
  },
  "DependentUndefinnedRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentUndefinnedRecord extends ActiveRecord$Base<PersistenceRecordParams> {\n        public id: PersistenceRecordParams['id'];\n        public name: PersistenceRecordParams['name'];\n        public age: PersistenceRecordParams['age'];\n        public dependentUndefined: t.Record$HasMany<DependentUndefinnedChildRecord>;\n\n        protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentUndefinnedRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m dependentUndefined\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRecord$HasMany\u001b[38;2;248;248;242m<\u001b[39mDependentUndefinnedChildRecord\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          224,
          238
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          21,
          167
        ]
      }
    }
  },
  "DependentUndefinnedChildRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentUndefinnedChildRecord extends ActiveRecord$Base<PersistenceChildRecordParams> {\n        public id: PersistenceChildRecordParams['id'];\n        public parentId: PersistenceChildRecordParams['parentId'];\n        public childName: PersistenceChildRecordParams['childName'];\n        public childAge: PersistenceChildRecordParams['childAge'];\n\n        protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentUndefinnedChildRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceChildRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'parentId'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childName'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childAge'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          240,
          254
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          47,
          167
        ]
      }
    }
  },
  "DependentNullifyRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentNullifyRecord extends ActiveRecord$Base<PersistenceRecordParams> {\n        public id: PersistenceRecordParams['id'];\n        public name: PersistenceRecordParams['name'];\n        public age: PersistenceRecordParams['age'];\n        public dependentNullify: t.Record$HasMany<DependentNullifyChildRecord>;\n\n        protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentNullifyRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m dependentNullify\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRecord$HasMany\u001b[38;2;248;248;242m<\u001b[39mDependentNullifyChildRecord\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          274,
          288
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          21,
          167
        ]
      }
    }
  },
  "DependentNullifyChildRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentNullifyChildRecord extends ActiveRecord$Base<PersistenceChildRecordParams> {\n        public id: PersistenceChildRecordParams['id'];\n        public parentId: PersistenceChildRecordParams['parentId'];\n        public childName: PersistenceChildRecordParams['childName'];\n        public childAge: PersistenceChildRecordParams['childAge'];\n\n        protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentNullifyChildRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceChildRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'parentId'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childName'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childAge'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          290,
          304
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          47,
          167
        ]
      }
    }
  },
  "DependentDestroyRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentDestroyRecord extends ActiveRecord$Base<PersistenceRecordParams> {\n        public id: PersistenceRecordParams['id'];\n        public name: PersistenceRecordParams['name'];\n        public age: PersistenceRecordParams['age'];\n        public dependentDestroy: t.Record$HasMany<DependentDestroyChildRecord>;\n\n        protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentDestroyRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m dependentDestroy\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRecord$HasMany\u001b[38;2;248;248;242m<\u001b[39mDependentDestroyChildRecord\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          374,
          388
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          21,
          167
        ]
      }
    }
  },
  "DependentDestroyChildRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentDestroyChildRecord extends ActiveRecord$Base<PersistenceChildRecordParams> {\n        public id: PersistenceChildRecordParams['id'];\n        public parentId: PersistenceChildRecordParams['parentId'];\n        public childName: PersistenceChildRecordParams['childName'];\n        public childAge: PersistenceChildRecordParams['childAge'];\n\n        protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentDestroyChildRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceChildRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'parentId'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childName'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childAge'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          390,
          404
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          47,
          167
        ]
      }
    }
  },
  "DependentDeleteAllRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentDeleteAllRecord extends ActiveRecord$Base<PersistenceRecordParams> {\n        public id: PersistenceRecordParams['id'];\n        public name: PersistenceRecordParams['name'];\n        public age: PersistenceRecordParams['age'];\n        public dependentDeleteAll: t.Record$HasMany<DependentDeleteAllChildRecord>;\n\n        protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentDeleteAllRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m dependentDeleteAll\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRecord$HasMany\u001b[38;2;248;248;242m<\u001b[39mDependentDeleteAllChildRecord\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          435,
          449
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          21,
          167
        ]
      }
    }
  },
  "DependentDeleteAllChildRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentDeleteAllChildRecord extends ActiveRecord$Base<PersistenceChildRecordParams> {\n        public id: PersistenceChildRecordParams['id'];\n        public parentId: PersistenceChildRecordParams['parentId'];\n        public childName: PersistenceChildRecordParams['childName'];\n        public childAge: PersistenceChildRecordParams['childAge'];\n\n        protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentDeleteAllChildRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceChildRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'parentId'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childName'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childAge'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          451,
          465
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          47,
          167
        ]
      }
    }
  },
  "DependentRestrictWithExceptionRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentRestrictWithExceptionRecord extends ActiveRecord$Base<PersistenceRecordParams> {\n        public id: PersistenceRecordParams['id'];\n        public name: PersistenceRecordParams['name'];\n        public age: PersistenceRecordParams['age'];\n        public dependentDeleteAll: t.Record$HasMany<DependentRestrictWithExceptionChildRecord>;\n\n        protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentRestrictWithExceptionRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m dependentDeleteAll\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRecord$HasMany\u001b[38;2;248;248;242m<\u001b[39mDependentRestrictWithExceptionChildRecord\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          496,
          510
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          21,
          167
        ]
      }
    }
  },
  "DependentRestrictWithExceptionChildRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentRestrictWithExceptionChildRecord extends ActiveRecord$Base<PersistenceChildRecordParams> {\n        public id: PersistenceChildRecordParams['id'];\n        public parentId: PersistenceChildRecordParams['parentId'];\n        public childName: PersistenceChildRecordParams['childName'];\n        public childAge: PersistenceChildRecordParams['childAge'];\n\n        protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentRestrictWithExceptionChildRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceChildRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'parentId'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childName'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childAge'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          512,
          526
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          47,
          167
        ]
      }
    }
  },
  "DependentRestrictWithErrorRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentRestrictWithErrorRecord extends ActiveRecord$Base<PersistenceRecordParams> {\n        public id: PersistenceRecordParams['id'];\n        public name: PersistenceRecordParams['name'];\n        public age: PersistenceRecordParams['age'];\n        public dependentDeleteAll: t.Record$HasMany<DependentRestrictWithErrorChildRecord>;\n\n        protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentRestrictWithErrorRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m PersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m dependentDeleteAll\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRecord$HasMany\u001b[38;2;248;248;242m<\u001b[39mDependentRestrictWithErrorChildRecord\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          547,
          561
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, name: 'name_1', age: 1 },\n            { id: 2, name: 'name_2', age: 2 },\n            { id: 3, name: 'name_3', age: 3 },\n            { id: 4, name: 'name_4', age: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          21,
          167
        ]
      }
    }
  },
  "DependentRestrictWithErrorChildRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/associations/base.persistence.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class DependentRestrictWithErrorChildRecord extends ActiveRecord$Base<PersistenceChildRecordParams> {\n        public id: PersistenceChildRecordParams['id'];\n        public parentId: PersistenceChildRecordParams['parentId'];\n        public childName: PersistenceChildRecordParams['childName'];\n        public childAge: PersistenceChildRecordParams['childAge'];\n\n        protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }\n      }",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mDependentRestrictWithErrorChildRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPersistenceChildRecordParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'parentId'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childName'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mpublic\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m PersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'childAge'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          563,
          577
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<PersistenceChildRecordParams[]> {\n          return Promise.resolve([\n            { id: 1, parentId: 1, childName: 'child_name_1', childAge: 1 },\n            { id: 2, parentId: 1, childName: 'child_name_2', childAge: 2 },\n            { id: 3, parentId: 1, childName: 'child_name_3', childAge: 3 },\n            { id: 4, parentId: 2, childName: 'child_name_4', childAge: 4 },\n          ]);\n        }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPersistenceChildRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_1'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_2'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_3'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m3\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m parentId\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m'child_name_4'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m childAge\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255m4\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          47,
          167
        ]
      }
    }
  },
  "QueryingRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/quering/base.relation.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class QueryingRecord extends Record {\n  public id: QueryingRecordParams['id'];\n  public name: QueryingRecordParams['name'];\n  public age: QueryingRecordParams['age'];\n\n  protected fetchAll(): Promise<QueryingRecordParams[]> {\n    return Promise.resolve([]);\n  }\n\n  static translate(key: string, opts?: any): string {\n    return key;\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mQueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m key\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          16,
          28
        ]
      },
      {
        "text": "class QueryingRecord extends Record {\n  public id: QueryingRecordParams['id'];\n  public name: QueryingRecordParams['name'];\n  public age: QueryingRecordParams['age'];\n\n  protected fetchAll(): Promise<QueryingRecordParams[]> {\n    return Promise.resolve([]);\n  }\n\n  static translate(key: string, opts?: any): string {\n    return key;\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mQueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m key\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          18,
          30
        ]
      },
      {
        "text": "class QueryingRecord extends Record {\n  public id: QueryingRecordParams['id'];\n  public name: QueryingRecordParams['name'];\n  public age: QueryingRecordParams['age'];\n\n  protected fetchAll(): Promise<QueryingRecordParams[]> {\n    return Promise.resolve([]);\n  }\n\n  static translate(key: string, opts?: any): string {\n    return key;\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m name\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m age\u001b[38;2;248;248;242m:\u001b[39m QueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'age'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mQueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m key\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          17,
          29
        ]
      }
    ],
    "instance": {
      "fetchAll": {
        "text": "protected fetchAll(): Promise<QueryingRecordParams[]> {\n    return Promise.resolve([]);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mQueryingRecordParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          22,
          24
        ]
      }
    },
    "static": {
      "translate": {
        "text": "static translate(key: string, opts?: any): string {\n    return key;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m key\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          26,
          28
        ]
      }
    }
  },
  "StaticFindOrCreateByRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/quering/base.relation.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class StaticFindOrCreateByRecord extends QueryingRecord {}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mStaticFindOrCreateByRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          169,
          0
        ]
      }
    ]
  },
  "StaticFindOrCreateByOrThrowRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/quering/base.relation.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class StaticFindOrCreateByOrThrowRecord extends QueryingRecord {}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mStaticFindOrCreateByOrThrowRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          290,
          0
        ]
      }
    ]
  },
  "StaticCreateOrFindByOrThrowRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/quering/base.relation.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class StaticCreateOrFindByOrThrowRecord extends QueryingRecord {}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mStaticCreateOrFindByOrThrowRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          514,
          0
        ]
      }
    ]
  },
  "StaticUpdateAllRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/quering/base.relation.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class StaticUpdateAllRecord extends QueryingRecord {}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mStaticUpdateAllRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          682,
          0
        ]
      }
    ]
  },
  "StaticTouchAllRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/quering/base.relation.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class StaticTouchAllRecord extends QueryingRecord {}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mStaticTouchAllRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          719,
          0
        ]
      }
    ]
  },
  "StaticDeleteByRecord": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/__tests__/quering/base.relation.test.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "class StaticDeleteByRecord extends QueryingRecord {}",
        "highlightText": "\u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mStaticDeleteByRecord\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mQueryingRecord\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          934,
          0
        ]
      }
    ]
  },
  "ActiveRecord$Associations$CollectionProxy$Base": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/associations/collection_proxy/base.ts",
      "updatedAt": "2021/03/20 17:30:10 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Associations$CollectionProxy$Base<\n  T extends ActiveRecord$Base\n> extends ActiveRecord$Associations$CollectionProxy$Impl<T> {\n  /**\n   * @see https://gist.github.com/domenic/8ed6048b187ee8f2ec75\n   * @description Method for getting results. Do not call it in any other method.\n   */\n  rueThen(\n    onFulfilled: rt.PromiseResolve<T, ActiveRecord$Relation<T>>,\n    onRejected?: rt.PromiseReject<any>\n  ) {\n    return this.superThen((value) => {\n      /**\n       * If you use the `ActiveRecord$QueryMethods` methods, it will enter this branch\n       * There are times when 「 value['holder'] instanceof ActiveRecord$Relation$Holder 」 cannot evaluate correctly. (Cause unknown)\n       */\n      if (\n        typeof value === 'object' &&\n        value != null &&\n        value['holder'] &&\n        value['holder']['isHolder']\n      ) {\n        const { holder, scope } = value;\n\n        if (scope instanceof Promise) {\n          scope.then((r) => {\n            holder.scope = r as T[];\n            Evaluator.all(holder);\n\n            if (Object.keys(holder.groupedRecords).length > 0) {\n              return onFulfilled(holder.groupedRecords);\n            } else {\n              return onFulfilled(holder.scope);\n            }\n          });\n        } else {\n          holder.scope = scope as T[];\n\n          Evaluator.all(holder);\n\n          if (Object.keys(holder.groupedRecords).length > 0) {\n            return onFulfilled(holder.groupedRecords);\n          } else {\n            return onFulfilled(holder.scope);\n          }\n        }\n      } else {\n        /**\n         * value is records ((e.g.) T | T[])\n         * @description type error\n         */\n        // @ts-expect-error\n        return onFulfilled(value);\n      }\n    }, onRejected);\n  }\n\n  /**\n   * @description All methods are delegated to this instance\n   * @see https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/associations/collection_proxy.rb#L1100-L1109\n   */\n  scope(): ActiveRecord$Associations$Relation<\n    T,\n    ActiveRecord$Associations$CollectionProxy$Holder<T>,\n    ActiveRecord$Relation<T>\n  > {\n    return this.superThen(({ holder, scope }) => {\n      return { scope, holder };\n    });\n  }\n\n  /**\n   * @see https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/associations/collection_proxy.rb#L1100-L1109\n   */\n  scoping<U>(\n    callback: (holder: ActiveRecord$Associations$CollectionProxy$Holder<T>) => U | Promise<U>\n  ): Promise<U> {\n    return this.superThen(({ holder, scope }) => {\n      if (scope instanceof Promise) {\n        return scope.then((records) => {\n          holder.scope = records as T[];\n          /**\n           * @description Pass by value so that 「proxy === record」 does not occur\n           */\n          if (Object.keys(holder.proxy).length === 0) holder.proxy = Array.from(records as T[]);\n          Evaluator.all(holder);\n          return callback(holder);\n        });\n      } else {\n        holder.scope = scope as T[];\n        /**\n         * @description Pass by value so that 「proxy === record」 does not occur\n         */\n        if (Object.keys(holder.proxy).length === 0) holder.proxy = Array.from(scope);\n        Evaluator.all(holder);\n        return callback(holder);\n      }\n    });\n  }\n\n  /**\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  where<U extends it.Record$Params>(params: Partial<U>): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      Object.assign(holder.scopeParams.where, params || {});\n    });\n\n    return this;\n  }\n\n  /**\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  rewhere<U extends it.Record$Params>(params: Partial<U>): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      holder.scopeParams.where = params || {};\n      Object.assign(params, holder.foreignKeyData);\n    });\n\n    return this;\n  }\n\n  /**\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  order<U = { [key: string]: rmt.QueryMethods$Directions }>(params: U): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      Object.assign(holder.scopeParams.order, params || {});\n    });\n\n    return this;\n  }\n\n  /**\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  reorder<U = { [key: string]: rmt.QueryMethods$Directions }>(params: U): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      holder.scopeParams.order = params || {};\n    });\n\n    return this;\n  }\n\n  /**\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  reverseOrder(): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      const orderParams = holder.scopeParams.order;\n      if (isPresent(orderParams)) {\n        Object.keys(orderParams).forEach((propName) => {\n          const direction = orderParams[propName];\n          if (['desc', 'DESC'].includes(direction)) {\n            holder.scopeParams.order[propName] = 'asc';\n          } else if (['asc', 'ASC'].includes(direction)) {\n            holder.scopeParams.order[propName] = 'desc';\n          }\n        });\n      } else {\n        holder.scopeParams.order['id'] = 'asc';\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  offset(value: number): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      holder.scopeParams.offset = value;\n    });\n\n    return this;\n  }\n\n  /**\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  limit(value: number): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      holder.scopeParams.limit = value;\n    });\n\n    return this;\n  }\n\n  /**\n   * @description Behavior is different from rails group\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  group<U = { [key: string]: any }>(...props: Array<keyof U>): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      // @ts-expect-error\n      holder.scopeParams.group = props;\n    });\n\n    return this;\n  }\n\n  /**\n   * @description delegate to `scope`\n   */\n  // @ts-expect-error\n  unscope(...scopeMethods: rmt.QueryMethods$ScopeMethods[]): this {\n    const { SCOPE_METHODS } = ActiveRecord$QueryMethods;\n\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      if (scopeMethods.length === 0) {\n        const err = errObj({\n          code: ErrCodes.ARGUMENT_IS_INVALID,\n          message: `'unscope()' must contain arguments.`,\n        });\n        holder.errors.push(err);\n      } else if (isSuperset(SCOPE_METHODS, scopeMethods)) {\n        scopeMethods.forEach((scopeMethod) => {\n          // @ts-expect-error\n          if (holder._defaultScopeParams[scopeMethod]) {\n            holder.scopeParams[scopeMethod] = Object.assign(\n              {},\n              // @ts-expect-error\n              JSON.parse(JSON.stringify(holder._defaultScopeParams[scopeMethod]))\n            );\n          } else {\n            holder.scopeParams[scopeMethod] = undefined;\n          }\n        });\n      } else {\n        const err = errObj({\n          code: ErrCodes.ARGUMENT_IS_INVALID,\n          message: `Called 'unscope()' with invalid unscoping argument '[${scopeMethods}]'. Valid arguments are '[${SCOPE_METHODS}]'.`,\n        });\n        holder.errors.push(err);\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-empty-3F\n   * @description use holder.proxy\n   */\n  isEmpty(): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.proxy.length === 0;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-find\n   */\n  // @ts-expect-error\n  find<U extends it.Record$Params>(...ids: it.Record$PrimaryKey[]): Promise<T | T[]> {\n    if (ids.length === 0) {\n      throw errObj({\n        code: ErrCodes.RECORD_NOT_FOUND,\n        message: `Could'nt find '${this.recordKlass.name}' without an 'id'`,\n      });\n    } else {\n      // @ts-expect-error\n      return this.where<U>({ id: ids }).scoping((holder) => {\n        if (holder.scope.length === 0) {\n          if (ids.length === 1) {\n            throw errObj({\n              code: ErrCodes.RECORD_NOT_FOUND,\n              params: {\n                resource: this.recordKlass.name,\n                id: ids[0],\n              },\n            });\n          } else {\n            throw errObj({\n              code: ErrCodes.RECORD_NOT_FOUND,\n              message: `Could't find all '${this.recordKlass.name}' with 'id': [${ids}] (found 0 results, but was looking for ${ids.length})`,\n            });\n          }\n        } else if (holder.scope.length === 1) {\n          return holder.scope[0];\n        } else {\n          return holder.scope;\n        }\n      });\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-any-3F\n   * @description use holder.proxy\n   */\n  isAny(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.proxy.filter(filter || Boolean).length > 0;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-build\n   * @description use holder.proxy\n   */\n  build<U>(params?: Partial<U> | Array<Partial<U>>, yielder?: (self: T) => void): Promise<T | T[]> {\n    return this.scoping((holder) => {\n      holder.flags.useProxy = true;\n      if (Array.isArray(params)) {\n        return params.map((param) => {\n          const merged = Object.assign(param || {}, holder.foreignKeyData);\n          const record = new this.recordKlass(merged);\n          if (yielder) yielder(record);\n          holder.proxy.push(record);\n          return record;\n        });\n      } else {\n        const merged = Object.assign(params || {}, holder.foreignKeyData);\n        const record = new this.recordKlass(merged);\n        if (yielder) yielder(record);\n        holder.proxy.push(record);\n        return record;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-create\n   * @description use holder.proxy\n   */\n  create<U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): Promise<T | T[]> {\n    return this.scoping((holder) => {\n      const merged = Object.assign(params || {}, holder.foreignKeyData);\n      // @ts-ignore\n      return this.recordKlass.create(merged, (self) => {\n        if (yielder) yielder(self);\n        holder.scope.push(self);\n        holder.proxy.push(self);\n      });\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-create-21\n   * @description use holder.proxy\n   */\n  createOrThrow<U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    return this.scoping((holder) => {\n      const merged = Object.assign(params || {}, holder.foreignKeyData);\n      // @ts-expect-error\n      return this.recordKlass.createOrThrow(merged, (self) => {\n        if (yielder) yielder(self);\n        holder.scope.push(self);\n        holder.proxy.push(self);\n      });\n    });\n  }\n\n  /**\n   * The return value type is different from that of rails.\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-delete\n   */\n  delete(...recordsOrIds: T[] | it.Record$PrimaryKey[]): Promise<T[]> {\n    return this.scoping<T[]>((holder) => {\n      let recordIds: it.Record$PrimaryKey[] = [];\n\n      recordsOrIds.forEach((recordOrId) => {\n        if (recordOrId instanceof ActiveRecord$Base) {\n          recordIds.push((recordOrId as T).id);\n        } else {\n          recordIds.push(recordOrId);\n        }\n      });\n\n      return this.find<T>(...recordIds).then((records: T[]) => {\n        const foreignKey = Object.keys(holder.foreignKeyData)[0];\n        const deletedRecords = records.map((record) => {\n          // dependent: 'nullify'\n          record.update({ [foreignKey]: undefined });\n          return record;\n        });\n        const destroyedIds = deletedRecords.map((r) => r.id);\n        const newScope = Array.from(holder.scope).reduce((acc, record) => {\n          if (!destroyedIds.includes(record.id)) {\n            acc.push(record);\n          }\n          return acc;\n        }, []);\n        holder.scope = Array.from(newScope);\n        holder.proxy = Array.from(newScope);\n        return deletedRecords;\n      });\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-destroy\n   * @description use holder.proxy\n   */\n  destroy(...recordsOrIds: T[] | it.Record$PrimaryKey[]): Promise<T[] | null> {\n    return this.scoping((holder) => {\n      let recordIds: it.Record$PrimaryKey[] = [];\n\n      recordsOrIds.forEach((recordOrId) => {\n        if (recordOrId instanceof ActiveRecord$Base) {\n          recordIds.push((recordOrId as T).id);\n        } else {\n          recordIds.push(recordOrId);\n        }\n      });\n\n      if (recordIds.length === 0) {\n        /**\n         * @description Make it behave the same as rails\n         */\n        return null;\n      } else {\n        return this.find<T>(...recordIds).then((records: T[]) => {\n          const destroyedRecords = records.map((record) => {\n            return record.destroySync();\n          });\n          const destroyedIds = destroyedRecords.map((r) => r.id);\n          const newScope = Array.from(holder.scope).reduce((acc, record) => {\n            if (!destroyedIds.includes(record.id)) {\n              acc.push(record);\n            }\n            return acc;\n          }, []);\n          holder.scope = Array.from(newScope);\n          holder.proxy = Array.from(newScope);\n          return destroyedRecords;\n        });\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-pluck\n   * @description use holder.proxy\n   */\n  pluck<U extends it.Record$Params>(...propNames: Array<keyof U>): Promise<Array<ct.valueOf<U>>> {\n    return this.scoping<Array<ct.valueOf<U>>>((holder) => {\n      const plucked = holder.proxy.map((record) => {\n        let result;\n\n        if (propNames.length === 0) {\n          result = Object.keys(record).reduce((acc, propName: string) => {\n            if (\n              !propName.startsWith('_') &&\n              !(typeof record[propName] === 'function') &&\n              !(propName == 'errors')\n            ) {\n              acc.push(record[propName]);\n            }\n            return acc;\n          }, [] as Array<ct.valueOf<U>>);\n        } else {\n          result = propNames.reduce((acc, propName: string) => {\n            acc.push(record[propName]);\n            return acc;\n          }, [] as Array<ct.valueOf<U>>);\n        }\n        return result;\n      });\n\n      if (propNames.length === 1) {\n        return plucked.flat();\n      } else {\n        return plucked;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-count\n   */\n  count<U extends it.Record$Params>(\n    propName?: keyof U,\n    filter?: (self: T) => boolean\n  ): Promise<number | { [key: string]: number }> {\n    return this.superThen(({ holder }) => {\n      // @ts-expect-error\n      return this.recordKlass.all().superThen(({ holder: newHolder }) => {\n        // deep coppy\n        newHolder.scopeParams = Object.assign({}, JSON.parse(JSON.stringify(holder.scopeParams)));\n        Object.assign(newHolder.scopeParams.where, holder.foreignKeyData);\n        Evaluator.all(newHolder);\n\n        if (isPresent(newHolder.groupedRecords)) {\n          return Object.keys(newHolder.groupedRecords).reduce((acc, key) => {\n            const records = newHolder.groupedRecords[key];\n            acc[key] = records.length;\n            return acc;\n          }, {});\n        } else {\n          let result;\n\n          if (propName) {\n            result = newHolder.scope.filter((record) => record[propName]);\n          } else {\n            result = newHolder.scope;\n          }\n\n          if (filter) result = result.filter(filter);\n          return result.length;\n        }\n      });\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-first\n   * @description use holder.proxy\n   */\n  // @ts-expect-error\n  first(limit?: number): Promise<T | T[]> {\n    if (!limit) limit = 1;\n    return this.scoping((holder) => {\n      const records = holder.proxy;\n      if (records.length === 0) {\n        return null;\n      } else {\n        const slicedRecords = records.slice(0, limit);\n\n        if (limit === 1) return slicedRecords[0];\n        return slicedRecords;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-include-3F\n   * @description use holder.proxy\n   */\n  // @ts-expect-error\n  isInclude(record: T | T[] | Promise<T | T[]>): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      const allRecordIds = holder.proxy.map((r) => r['id']);\n      if (record instanceof Promise) {\n        return record.then((recordVal) => {\n          if (recordVal && !Array.isArray(recordVal)) {\n            return allRecordIds.includes(recordVal['id']);\n          } else {\n            /**\n             * @description Same specifications as rails\n             */\n            return false;\n          }\n        });\n      } else {\n        if (record && !Array.isArray(record)) {\n          return allRecordIds.includes(record['id']);\n        } else {\n          /**\n           * @description Same specifications as rails\n           */\n          return false;\n        }\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-last\n   * @description use holder.proxy\n   */\n  // @ts-expect-error\n  last(limit?: number): Promise<T | T[]> {\n    if (!limit) limit = 1;\n    return this.scoping((holder) => {\n      const records = holder.proxy;\n      if (records.length === 0) {\n        return null;\n      } else {\n        const slicedRecords = records.reverse().slice(0, limit).reverse();\n\n        if (limit === 1) return slicedRecords[0];\n        return slicedRecords;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-many-3F\n   * @description use holder.proxy\n   */\n  isMany(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.proxy.filter(filter || Boolean).length > 1;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-size\n   * @description use holder.proxy\n   */\n  size(): Promise<number | { [key: string]: number }> {\n    return this.scoping<number | { [key: string]: number }>((holder) => {\n      if (isPresent(holder.groupedRecords)) {\n        return Object.keys(holder.groupedRecords).reduce((acc, key) => {\n          const records = holder.groupedRecords[key];\n          acc[key] = records.length;\n          return acc;\n        }, {});\n      } else {\n        return holder.proxy.length;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-to_a\n   */\n  toA(): Promise<T[]> {\n    return this.scoping((holder) => {\n      return holder.scope;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-to_a\n   */\n  toArray(): Promise<T[]> {\n    return this.toA();\n  }\n\n  _currentScope(): Promise<T[]> {\n    return this.scoping((holder) => {\n      if (holder.flags.useProxy) {\n        return holder.proxy;\n      } else {\n        return holder.scope;\n      }\n    });\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$CollectionProxy$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[39m\n\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$CollectionProxy$Impl\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://gist.github.com/domenic/8ed6048b187ee8f2ec75\u001b[39m\n\u001b[38;2;130;146;162m   * @description Method for getting results. Do not call it in any other method.\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mrueThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    onFulfilled\u001b[38;2;248;248;242m:\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mPromiseResolve\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    onRejected\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mPromiseReject\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * If you use the `ActiveRecord$QueryMethods` methods, it will enter this branch\u001b[39m\n\u001b[38;2;130;146;162m       * There are times when 「 value['holder'] instanceof ActiveRecord$Relation$Holder 」 cannot evaluate correctly. (Cause unknown)\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mtypeof\u001b[39m value \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'isHolder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m r \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m scope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * value is records ((e.g.) T | T[])\u001b[39m\n\u001b[38;2;130;146;162m         * @description type error\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description All methods are delegated to this instance\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/associations/collection_proxy.rb#L1100-L1109\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Associations$Relation\u001b[38;2;248;248;242m<\u001b[39m\n    \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    ActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m scope\u001b[38;2;248;248;242m,\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/associations/collection_proxy.rb#L1100-L1109\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m           * @description Pass by value so that 「proxy === record」 does not occur\u001b[39m\n\u001b[38;2;130;146;162m           */\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m scope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * @description Pass by value so that 「proxy === record」 does not occur\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere\u001b[38;2;248;248;242m,\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m rmt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m,\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mreorder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m rmt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mreverseOrder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m orderParams \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m direction \u001b[38;2;248;248;242m=\u001b[39m orderParams\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39moffset \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mlimit \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description Behavior is different from rails group\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mgroup \u001b[38;2;248;248;242m=\u001b[39m props\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description delegate to `scope`\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$ScopeMethods\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$QueryMethods\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscopeMethods\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mARGUMENT_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m'unscope()' must contain arguments.\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misSuperset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m scopeMethods\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        scopeMethods\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscopeMethod\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n              \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n              \u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mparse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mARGUMENT_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCalled 'unscope()' with invalid unscoping argument '[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mscopeMethods\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]'. Valid arguments are '[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]'.\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-empty-3F\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misEmpty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-find\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould'nt find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' without an 'id'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m ids \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n              code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                resource\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                id\u001b[38;2;248;248;242m:\u001b[39m ids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n              code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould't find all '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' with 'id': [\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m] (found 0 results, but was looking for \u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-any-3F\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-build\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mbuild\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mflags\u001b[38;2;248;248;242m.\u001b[39museProxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m params\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m merged \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmerged\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m merged \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmerged\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-create\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m merged \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmerged\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-create-21\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m merged \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmerged\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * The return value type is different from that of rails.\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-delete\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mdelete\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mrecordsOrIds\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m recordIds\u001b[38;2;248;248;242m:\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      recordsOrIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordOrId \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          recordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          recordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mrecordIds\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m foreignKey \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m deletedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m// dependent: 'nullify'\u001b[39m\n          record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m destroyedIds \u001b[38;2;248;248;242m=\u001b[39m deletedRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m newScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mdestroyedIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewScope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewScope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m deletedRecords\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-destroy\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mrecordsOrIds\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m recordIds\u001b[38;2;248;248;242m:\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      recordsOrIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordOrId \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          recordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          recordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordIds\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * @description Make it behave the same as rails\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mrecordIds\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m destroyedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m destroyedIds \u001b[38;2;248;248;242m=\u001b[39m destroyedRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m newScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mdestroyedIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewScope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewScope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m destroyedRecords\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-pluck\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mpluck\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mpropNames\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mct\u001b[38;2;248;248;242m.\u001b[39mvalueOf\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mct\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalueOf\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m plucked \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mlet\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpropNames\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          result \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m propName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n              \u001b[38;2;248;248;242m!\u001b[39mpropName\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstartsWith\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m'_'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n              \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m record\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'function'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n              \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;166;226;46m'errors'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mct\u001b[38;2;248;248;242m.\u001b[39mvalueOf\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          result \u001b[38;2;248;248;242m=\u001b[39m propNames\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m propName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mct\u001b[38;2;248;248;242m.\u001b[39mvalueOf\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpropNames\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m plucked\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mflat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m plucked\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-count\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mcount\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    propName\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    filter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m:\u001b[39m newHolder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m// deep coppy\u001b[39m\n        newHolder\u001b[38;2;248;248;242m.\u001b[39mscopeParams \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mparse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewHolder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewHolder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewHolder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewHolder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m newHolder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            acc\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mlet\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            result \u001b[38;2;248;248;242m=\u001b[39m newHolder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m record\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            result \u001b[38;2;248;248;242m=\u001b[39m newHolder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-first\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m limit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m slicedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-include-3F\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116misInclude\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allRecordIds \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordVal \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m allRecordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m             * @description Same specifications as rails\u001b[39m\n\u001b[38;2;130;146;162m             */\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m allRecordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m           * @description Same specifications as rails\u001b[39m\n\u001b[38;2;130;146;162m           */\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-last\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n  \u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m limit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m slicedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreverse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreverse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-many-3F\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/CollectionProxy.html#method-i-size\u001b[39m\n\u001b[38;2;130;146;162m   * @description use holder.proxy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116msize\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          acc\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-to_a\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-to_a\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mtoArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116m_currentScope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mflags\u001b[38;2;248;248;242m.\u001b[39museProxy\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          18,
          674
        ]
      }
    ],
    "instance": {
      "rueThen": {
        "text": "rueThen(\n    onFulfilled: rt.PromiseResolve<T, ActiveRecord$Relation<T>>,\n    onRejected?: rt.PromiseReject<any>\n  ) {\n    return this.superThen((value) => {\n      /**\n       * If you use the `ActiveRecord$QueryMethods` methods, it will enter this branch\n       * There are times when 「 value['holder'] instanceof ActiveRecord$Relation$Holder 」 cannot evaluate correctly. (Cause unknown)\n       */\n      if (\n        typeof value === 'object' &&\n        value != null &&\n        value['holder'] &&\n        value['holder']['isHolder']\n      ) {\n        const { holder, scope } = value;\n\n        if (scope instanceof Promise) {\n          scope.then((r) => {\n            holder.scope = r as T[];\n            Evaluator.all(holder);\n\n            if (Object.keys(holder.groupedRecords).length > 0) {\n              return onFulfilled(holder.groupedRecords);\n            } else {\n              return onFulfilled(holder.scope);\n            }\n          });\n        } else {\n          holder.scope = scope as T[];\n\n          Evaluator.all(holder);\n\n          if (Object.keys(holder.groupedRecords).length > 0) {\n            return onFulfilled(holder.groupedRecords);\n          } else {\n            return onFulfilled(holder.scope);\n          }\n        }\n      } else {\n        /**\n         * value is records ((e.g.) T | T[])\n         * @description type error\n         */\n        // @ts-expect-error\n        return onFulfilled(value);\n      }\n    }, onRejected);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mrueThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    onFulfilled\u001b[38;2;248;248;242m:\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mPromiseResolve\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    onRejected\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mPromiseReject\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * If you use the `ActiveRecord$QueryMethods` methods, it will enter this branch\u001b[39m\n\u001b[38;2;130;146;162m       * There are times when 「 value['holder'] instanceof ActiveRecord$Relation$Holder 」 cannot evaluate correctly. (Cause unknown)\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mtypeof\u001b[39m value \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n        value\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'holder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'isHolder'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m r \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m scope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * value is records ((e.g.) T | T[])\u001b[39m\n\u001b[38;2;130;146;162m         * @description type error\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116monFulfilled\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m onRejected\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          25,
          73
        ]
      },
      "scope": {
        "text": "scope(): ActiveRecord$Associations$Relation<\n    T,\n    ActiveRecord$Associations$CollectionProxy$Holder<T>,\n    ActiveRecord$Relation<T>\n  > {\n    return this.superThen(({ holder, scope }) => {\n      return { scope, holder };\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Associations$Relation\u001b[38;2;248;248;242m<\u001b[39m\n    \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    ActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m scope\u001b[38;2;248;248;242m,\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          79,
          87
        ]
      },
      "scoping": {
        "text": "scoping<U>(\n    callback: (holder: ActiveRecord$Associations$CollectionProxy$Holder<T>) => U | Promise<U>\n  ): Promise<U> {\n    return this.superThen(({ holder, scope }) => {\n      if (scope instanceof Promise) {\n        return scope.then((records) => {\n          holder.scope = records as T[];\n          /**\n           * @description Pass by value so that 「proxy === record」 does not occur\n           */\n          if (Object.keys(holder.proxy).length === 0) holder.proxy = Array.from(records as T[]);\n          Evaluator.all(holder);\n          return callback(holder);\n        });\n      } else {\n        holder.scope = scope as T[];\n        /**\n         * @description Pass by value so that 「proxy === record」 does not occur\n         */\n        if (Object.keys(holder.proxy).length === 0) holder.proxy = Array.from(scope);\n        Evaluator.all(holder);\n        return callback(holder);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m scope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m           * @description Pass by value so that 「proxy === record」 does not occur\u001b[39m\n\u001b[38;2;130;146;162m           */\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m scope \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * @description Pass by value so that 「proxy === record」 does not occur\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mcallback\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          92,
          116
        ]
      },
      "where": {
        "text": "where<U extends it.Record$Params>(params: Partial<U>): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      Object.assign(holder.scopeParams.where, params || {});\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere\u001b[38;2;248;248;242m,\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          122,
          129
        ]
      },
      "rewhere": {
        "text": "rewhere<U extends it.Record$Params>(params: Partial<U>): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      holder.scopeParams.where = params || {};\n      Object.assign(params, holder.foreignKeyData);\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          135,
          143
        ]
      },
      "order": {
        "text": "order<U = { [key: string]: rmt.QueryMethods$Directions }>(params: U): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      Object.assign(holder.scopeParams.order, params || {});\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m rmt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m,\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          149,
          156
        ]
      },
      "reorder": {
        "text": "reorder<U = { [key: string]: rmt.QueryMethods$Directions }>(params: U): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      holder.scopeParams.order = params || {};\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mreorder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m rmt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          162,
          169
        ]
      },
      "reverseOrder": {
        "text": "reverseOrder(): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      const orderParams = holder.scopeParams.order;\n      if (isPresent(orderParams)) {\n        Object.keys(orderParams).forEach((propName) => {\n          const direction = orderParams[propName];\n          if (['desc', 'DESC'].includes(direction)) {\n            holder.scopeParams.order[propName] = 'asc';\n          } else if (['asc', 'ASC'].includes(direction)) {\n            holder.scopeParams.order[propName] = 'desc';\n          }\n        });\n      } else {\n        holder.scopeParams.order['id'] = 'asc';\n      }\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mreverseOrder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m orderParams \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m direction \u001b[38;2;248;248;242m=\u001b[39m orderParams\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          175,
          194
        ]
      },
      "offset": {
        "text": "offset(value: number): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      holder.scopeParams.offset = value;\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39moffset \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          200,
          207
        ]
      },
      "limit": {
        "text": "limit(value: number): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      holder.scopeParams.limit = value;\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mlimit \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          213,
          220
        ]
      },
      "group": {
        "text": "group<U = { [key: string]: any }>(...props: Array<keyof U>): this {\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      // @ts-expect-error\n      holder.scopeParams.group = props;\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mgroup \u001b[38;2;248;248;242m=\u001b[39m props\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          227,
          235
        ]
      },
      "unscope": {
        "text": "unscope(...scopeMethods: rmt.QueryMethods$ScopeMethods[]): this {\n    const { SCOPE_METHODS } = ActiveRecord$QueryMethods;\n\n    // @ts-expect-error\n    this.scope().superThen(({ holder }) => {\n      if (scopeMethods.length === 0) {\n        const err = errObj({\n          code: ErrCodes.ARGUMENT_IS_INVALID,\n          message: `'unscope()' must contain arguments.`,\n        });\n        holder.errors.push(err);\n      } else if (isSuperset(SCOPE_METHODS, scopeMethods)) {\n        scopeMethods.forEach((scopeMethod) => {\n          // @ts-expect-error\n          if (holder._defaultScopeParams[scopeMethod]) {\n            holder.scopeParams[scopeMethod] = Object.assign(\n              {},\n              // @ts-expect-error\n              JSON.parse(JSON.stringify(holder._defaultScopeParams[scopeMethod]))\n            );\n          } else {\n            holder.scopeParams[scopeMethod] = undefined;\n          }\n        });\n      } else {\n        const err = errObj({\n          code: ErrCodes.ARGUMENT_IS_INVALID,\n          message: `Called 'unscope()' with invalid unscoping argument '[${scopeMethods}]'. Valid arguments are '[${SCOPE_METHODS}]'.`,\n        });\n        holder.errors.push(err);\n      }\n    });\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$ScopeMethods\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$QueryMethods\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscopeMethods\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mARGUMENT_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m'unscope()' must contain arguments.\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misSuperset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m scopeMethods\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        scopeMethods\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscopeMethod\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n              \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n              \u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mparse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mARGUMENT_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCalled 'unscope()' with invalid unscoping argument '[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mscopeMethods\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]'. Valid arguments are '[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]'.\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          241,
          275
        ]
      },
      "isEmpty": {
        "text": "isEmpty(): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.proxy.length === 0;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misEmpty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          281,
          285
        ]
      },
      "find": {
        "text": "find<U extends it.Record$Params>(...ids: it.Record$PrimaryKey[]): Promise<T | T[]> {\n    if (ids.length === 0) {\n      throw errObj({\n        code: ErrCodes.RECORD_NOT_FOUND,\n        message: `Could'nt find '${this.recordKlass.name}' without an 'id'`,\n      });\n    } else {\n      // @ts-expect-error\n      return this.where<U>({ id: ids }).scoping((holder) => {\n        if (holder.scope.length === 0) {\n          if (ids.length === 1) {\n            throw errObj({\n              code: ErrCodes.RECORD_NOT_FOUND,\n              params: {\n                resource: this.recordKlass.name,\n                id: ids[0],\n              },\n            });\n          } else {\n            throw errObj({\n              code: ErrCodes.RECORD_NOT_FOUND,\n              message: `Could't find all '${this.recordKlass.name}' with 'id': [${ids}] (found 0 results, but was looking for ${ids.length})`,\n            });\n          }\n        } else if (holder.scope.length === 1) {\n          return holder.scope[0];\n        } else {\n          return holder.scope;\n        }\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould'nt find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' without an 'id'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m ids \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n              code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                resource\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                id\u001b[38;2;248;248;242m:\u001b[39m ids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n              code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould't find all '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' with 'id': [\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m] (found 0 results, but was looking for \u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          291,
          322
        ]
      },
      "isAny": {
        "text": "isAny(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.proxy.filter(filter || Boolean).length > 0;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          328,
          332
        ]
      },
      "build": {
        "text": "build<U>(params?: Partial<U> | Array<Partial<U>>, yielder?: (self: T) => void): Promise<T | T[]> {\n    return this.scoping((holder) => {\n      holder.flags.useProxy = true;\n      if (Array.isArray(params)) {\n        return params.map((param) => {\n          const merged = Object.assign(param || {}, holder.foreignKeyData);\n          const record = new this.recordKlass(merged);\n          if (yielder) yielder(record);\n          holder.proxy.push(record);\n          return record;\n        });\n      } else {\n        const merged = Object.assign(params || {}, holder.foreignKeyData);\n        const record = new this.recordKlass(merged);\n        if (yielder) yielder(record);\n        holder.proxy.push(record);\n        return record;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mbuild\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mflags\u001b[38;2;248;248;242m.\u001b[39museProxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m params\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m merged \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmerged\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m merged \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmerged\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          338,
          357
        ]
      },
      "create": {
        "text": "create<U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): Promise<T | T[]> {\n    return this.scoping((holder) => {\n      const merged = Object.assign(params || {}, holder.foreignKeyData);\n      // @ts-ignore\n      return this.recordKlass.create(merged, (self) => {\n        if (yielder) yielder(self);\n        holder.scope.push(self);\n        holder.proxy.push(self);\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m merged \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmerged\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          363,
          376
        ]
      },
      "createOrThrow": {
        "text": "createOrThrow<U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    return this.scoping((holder) => {\n      const merged = Object.assign(params || {}, holder.foreignKeyData);\n      // @ts-expect-error\n      return this.recordKlass.createOrThrow(merged, (self) => {\n        if (yielder) yielder(self);\n        holder.scope.push(self);\n        holder.proxy.push(self);\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m merged \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmerged\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          382,
          395
        ]
      },
      "delete": {
        "text": "delete(...recordsOrIds: T[] | it.Record$PrimaryKey[]): Promise<T[]> {\n    return this.scoping<T[]>((holder) => {\n      let recordIds: it.Record$PrimaryKey[] = [];\n\n      recordsOrIds.forEach((recordOrId) => {\n        if (recordOrId instanceof ActiveRecord$Base) {\n          recordIds.push((recordOrId as T).id);\n        } else {\n          recordIds.push(recordOrId);\n        }\n      });\n\n      return this.find<T>(...recordIds).then((records: T[]) => {\n        const foreignKey = Object.keys(holder.foreignKeyData)[0];\n        const deletedRecords = records.map((record) => {\n          // dependent: 'nullify'\n          record.update({ [foreignKey]: undefined });\n          return record;\n        });\n        const destroyedIds = deletedRecords.map((r) => r.id);\n        const newScope = Array.from(holder.scope).reduce((acc, record) => {\n          if (!destroyedIds.includes(record.id)) {\n            acc.push(record);\n          }\n          return acc;\n        }, []);\n        holder.scope = Array.from(newScope);\n        holder.proxy = Array.from(newScope);\n        return deletedRecords;\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mdelete\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mrecordsOrIds\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m recordIds\u001b[38;2;248;248;242m:\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      recordsOrIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordOrId \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          recordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          recordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mrecordIds\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m foreignKey \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m deletedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m// dependent: 'nullify'\u001b[39m\n          record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m destroyedIds \u001b[38;2;248;248;242m=\u001b[39m deletedRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m newScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mdestroyedIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewScope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewScope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m deletedRecords\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          401,
          432
        ]
      },
      "destroy": {
        "text": "destroy(...recordsOrIds: T[] | it.Record$PrimaryKey[]): Promise<T[] | null> {\n    return this.scoping((holder) => {\n      let recordIds: it.Record$PrimaryKey[] = [];\n\n      recordsOrIds.forEach((recordOrId) => {\n        if (recordOrId instanceof ActiveRecord$Base) {\n          recordIds.push((recordOrId as T).id);\n        } else {\n          recordIds.push(recordOrId);\n        }\n      });\n\n      if (recordIds.length === 0) {\n        /**\n         * @description Make it behave the same as rails\n         */\n        return null;\n      } else {\n        return this.find<T>(...recordIds).then((records: T[]) => {\n          const destroyedRecords = records.map((record) => {\n            return record.destroySync();\n          });\n          const destroyedIds = destroyedRecords.map((r) => r.id);\n          const newScope = Array.from(holder.scope).reduce((acc, record) => {\n            if (!destroyedIds.includes(record.id)) {\n              acc.push(record);\n            }\n            return acc;\n          }, []);\n          holder.scope = Array.from(newScope);\n          holder.proxy = Array.from(newScope);\n          return destroyedRecords;\n        });\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mrecordsOrIds\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m recordIds\u001b[38;2;248;248;242m:\u001b[39m it\u001b[38;2;248;248;242m.\u001b[39mRecord$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      recordsOrIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordOrId \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          recordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          recordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordOrId\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordIds\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * @description Make it behave the same as rails\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mrecordIds\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m destroyedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m destroyedIds \u001b[38;2;248;248;242m=\u001b[39m destroyedRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m newScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mdestroyedIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewScope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewScope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m destroyedRecords\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          438,
          473
        ]
      },
      "pluck": {
        "text": "pluck<U extends it.Record$Params>(...propNames: Array<keyof U>): Promise<Array<ct.valueOf<U>>> {\n    return this.scoping<Array<ct.valueOf<U>>>((holder) => {\n      const plucked = holder.proxy.map((record) => {\n        let result;\n\n        if (propNames.length === 0) {\n          result = Object.keys(record).reduce((acc, propName: string) => {\n            if (\n              !propName.startsWith('_') &&\n              !(typeof record[propName] === 'function') &&\n              !(propName == 'errors')\n            ) {\n              acc.push(record[propName]);\n            }\n            return acc;\n          }, [] as Array<ct.valueOf<U>>);\n        } else {\n          result = propNames.reduce((acc, propName: string) => {\n            acc.push(record[propName]);\n            return acc;\n          }, [] as Array<ct.valueOf<U>>);\n        }\n        return result;\n      });\n\n      if (propNames.length === 1) {\n        return plucked.flat();\n      } else {\n        return plucked;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mpluck\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mpropNames\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mct\u001b[38;2;248;248;242m.\u001b[39mvalueOf\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mct\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalueOf\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m plucked \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mlet\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpropNames\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          result \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m propName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n              \u001b[38;2;248;248;242m!\u001b[39mpropName\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstartsWith\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m'_'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n              \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m record\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'function'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n              \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;166;226;46m'errors'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mct\u001b[38;2;248;248;242m.\u001b[39mvalueOf\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          result \u001b[38;2;248;248;242m=\u001b[39m propNames\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m propName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mct\u001b[38;2;248;248;242m.\u001b[39mvalueOf\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpropNames\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m plucked\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mflat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m plucked\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          479,
          510
        ]
      },
      "count": {
        "text": "count<U extends it.Record$Params>(\n    propName?: keyof U,\n    filter?: (self: T) => boolean\n  ): Promise<number | { [key: string]: number }> {\n    return this.superThen(({ holder }) => {\n      // @ts-expect-error\n      return this.recordKlass.all().superThen(({ holder: newHolder }) => {\n        // deep coppy\n        newHolder.scopeParams = Object.assign({}, JSON.parse(JSON.stringify(holder.scopeParams)));\n        Object.assign(newHolder.scopeParams.where, holder.foreignKeyData);\n        Evaluator.all(newHolder);\n\n        if (isPresent(newHolder.groupedRecords)) {\n          return Object.keys(newHolder.groupedRecords).reduce((acc, key) => {\n            const records = newHolder.groupedRecords[key];\n            acc[key] = records.length;\n            return acc;\n          }, {});\n        } else {\n          let result;\n\n          if (propName) {\n            result = newHolder.scope.filter((record) => record[propName]);\n          } else {\n            result = newHolder.scope;\n          }\n\n          if (filter) result = result.filter(filter);\n          return result.length;\n        }\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcount\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m it\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRecord$Params\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    propName\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    filter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m:\u001b[39m newHolder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m// deep coppy\u001b[39m\n        newHolder\u001b[38;2;248;248;242m.\u001b[39mscopeParams \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mparse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewHolder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere\u001b[38;2;248;248;242m,\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        Evaluator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewHolder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewHolder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewHolder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m newHolder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            acc\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mlet\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            result \u001b[38;2;248;248;242m=\u001b[39m newHolder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m record\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            result \u001b[38;2;248;248;242m=\u001b[39m newHolder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          515,
          547
        ]
      },
      "first": {
        "text": "first(limit?: number): Promise<T | T[]> {\n    if (!limit) limit = 1;\n    return this.scoping((holder) => {\n      const records = holder.proxy;\n      if (records.length === 0) {\n        return null;\n      } else {\n        const slicedRecords = records.slice(0, limit);\n\n        if (limit === 1) return slicedRecords[0];\n        return slicedRecords;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m limit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m slicedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          554,
          567
        ]
      },
      "isInclude": {
        "text": "isInclude(record: T | T[] | Promise<T | T[]>): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      const allRecordIds = holder.proxy.map((r) => r['id']);\n      if (record instanceof Promise) {\n        return record.then((recordVal) => {\n          if (recordVal && !Array.isArray(recordVal)) {\n            return allRecordIds.includes(recordVal['id']);\n          } else {\n            /**\n             * @description Same specifications as rails\n             */\n            return false;\n          }\n        });\n      } else {\n        if (record && !Array.isArray(record)) {\n          return allRecordIds.includes(record['id']);\n        } else {\n          /**\n           * @description Same specifications as rails\n           */\n          return false;\n        }\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misInclude\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allRecordIds \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordVal \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m allRecordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m             * @description Same specifications as rails\u001b[39m\n\u001b[38;2;130;146;162m             */\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m allRecordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m           * @description Same specifications as rails\u001b[39m\n\u001b[38;2;130;146;162m           */\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          574,
          599
        ]
      },
      "last": {
        "text": "last(limit?: number): Promise<T | T[]> {\n    if (!limit) limit = 1;\n    return this.scoping((holder) => {\n      const records = holder.proxy;\n      if (records.length === 0) {\n        return null;\n      } else {\n        const slicedRecords = records.reverse().slice(0, limit).reverse();\n\n        if (limit === 1) return slicedRecords[0];\n        return slicedRecords;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m limit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m slicedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreverse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreverse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          606,
          619
        ]
      },
      "isMany": {
        "text": "isMany(filter?: (record: T) => boolean): Promise<boolean> {\n    return this.scoping<boolean>((holder) => {\n      return holder.proxy.filter(filter || Boolean).length > 1;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          625,
          629
        ]
      },
      "size": {
        "text": "size(): Promise<number | { [key: string]: number }> {\n    return this.scoping<number | { [key: string]: number }>((holder) => {\n      if (isPresent(holder.groupedRecords)) {\n        return Object.keys(holder.groupedRecords).reduce((acc, key) => {\n          const records = holder.groupedRecords[key];\n          acc[key] = records.length;\n          return acc;\n        }, {});\n      } else {\n        return holder.proxy.length;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116msize\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          acc\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          635,
          647
        ]
      },
      "toA": {
        "text": "toA(): Promise<T[]> {\n    return this.scoping((holder) => {\n      return holder.scope;\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          652,
          656
        ]
      },
      "toArray": {
        "text": "toArray(): Promise<T[]> {\n    return this.toA();\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          661,
          663
        ]
      },
      "_currentScope": {
        "text": "_currentScope(): Promise<T[]> {\n    return this.scoping((holder) => {\n      if (holder.flags.useProxy) {\n        return holder.proxy;\n      } else {\n        return holder.scope;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116m_currentScope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mflags\u001b[38;2;248;248;242m.\u001b[39museProxy\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          665,
          673
        ]
      }
    }
  },
  "ActiveRecord$Associations$CollectionProxy$Holder": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/associations/collection_proxy/holder.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Associations$CollectionProxy$Holder<\n  T extends ActiveRecord$Base\n> extends ActiveRecord$Relation$Holder<T> {\n  public associationData: t.HolderAssociationData;\n  public foreignKeyData: t.HolderAssociationData['foreignKeyData'];\n  public proxy: T[];\n  public flags: {\n    useProxy: boolean;\n  };\n\n  constructor(\n    recordKlass: ct.Constructor<T>,\n    records: T[],\n    associationData: t.HolderAssociationData\n  ) {\n    super(recordKlass, records);\n    /**\n     * @description Pass by value so that 「proxy === record」 does not occur\n     */\n    this.proxy = Array.from(records || []);\n    this.flags = {\n      useProxy: false,\n    };\n    this.associationData = associationData;\n    // use it a lot so I have it as a member\n    this.foreignKeyData = associationData.foreignKeyData;\n    Object.assign(this.scopeParams.where, this.foreignKeyData);\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[39m\n\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m associationData\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHolderAssociationData\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m foreignKeyData\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHolderAssociationData\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'foreignKeyData'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m proxy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m flags\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    useProxy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    recordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    records\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    associationData\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHolderAssociationData\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordKlass\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m     * @description Pass by value so that 「proxy === record」 does not occur\u001b[39m\n\u001b[38;2;130;146;162m     */\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mflags \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      useProxy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39massociationData \u001b[38;2;248;248;242m=\u001b[39m associationData\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// use it a lot so I have it as a member\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData \u001b[38;2;248;248;242m=\u001b[39m associationData\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          9,
          37
        ]
      }
    ],
    "$constructor": {
      "text": "constructor(\n    recordKlass: ct.Constructor<T>,\n    records: T[],\n    associationData: t.HolderAssociationData\n  ) {\n    super(recordKlass, records);\n    /**\n     * @description Pass by value so that 「proxy === record」 does not occur\n     */\n    this.proxy = Array.from(records || []);\n    this.flags = {\n      useProxy: false,\n    };\n    this.associationData = associationData;\n    // use it a lot so I have it as a member\n    this.foreignKeyData = associationData.foreignKeyData;\n    Object.assign(this.scopeParams.where, this.foreignKeyData);\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    recordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    records\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    associationData\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHolderAssociationData\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordKlass\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m     * @description Pass by value so that 「proxy === record」 does not occur\u001b[39m\n\u001b[38;2;130;146;162m     */\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mflags \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      useProxy\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39massociationData \u001b[38;2;248;248;242m=\u001b[39m associationData\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// use it a lot so I have it as a member\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData \u001b[38;2;248;248;242m=\u001b[39m associationData\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        19,
        36
      ]
    }
  },
  "ActiveRecord$Associations$CollectionProxy$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/associations/collection_proxy/impl.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "abstract class ActiveRecord$Associations$CollectionProxy$Impl<\n  T extends ActiveRecord$Base\n> extends ActiveRecord$Relation<\n  T,\n  ActiveRecord$Associations$CollectionProxy$Holder<T>,\n  ActiveRecord$Relation<T>\n> {\n  // Prepared for checking with hasOwnProperty ()\n  static __rue_impl_class__ = ActiveSupport$ImplBase.__rue_impl_class__;\n}",
        "highlightText": "\u001b[38;2;102;217;239mabstract\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$CollectionProxy$Impl\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[39m\n\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  ActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// Prepared for checking with hasOwnProperty ()\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m __rue_impl_class__ \u001b[38;2;248;248;242m=\u001b[39m ActiveSupport$ImplBase\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          15,
          24
        ]
      },
      {
        "text": "interface ActiveRecord$Associations$CollectionProxy$Impl<T extends ActiveRecord$Base> {}",
        "highlightText": "\u001b[38;2;102;217;239minterface\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$CollectionProxy$Impl\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          26,
          26
        ]
      }
    ]
  },
  "ActiveRecord$Associations$Relation$Base": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/associations/relation/base.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Associations$Relation$Base<\n  T extends ActiveRecord$Base,\n  H extends ActiveRecord$Associations$CollectionProxy$Holder<T>,\n  S = T[] | Promise<T>\n> extends ActiveRecord$Relation<T, H, S> {}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$Relation$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m  \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\n\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mH\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mS\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          5,
          9
        ]
      }
    ]
  },
  "ActiveRecord$Core": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/core/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Core extends RueModule {\n  /**\n   * @see https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/core.rb#L322-L339\n   */\n  static find<T extends ActiveRecord$Base>(...ids: at.Associations$PrimaryKey[]): T | T[] {\n    if (ids.length == 0) {\n      throw errObj({\n        code: ErrCodes.RECORD_NOT_FOUND,\n        message: `Could'nt find '${this.name}' without an 'id'`,\n      });\n    } else {\n      const klassName = this.name;\n      const allData = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n      const filteredData = allData.filter((record) => ids.includes(record.id));\n      if (filteredData.length === 0) {\n        if (ids.length === 1) {\n          throw errObj({\n            code: ErrCodes.RECORD_NOT_FOUND,\n            params: {\n              resource: this.name,\n              id: ids[0],\n            },\n          });\n        } else {\n          throw errObj({\n            code: ErrCodes.RECORD_NOT_FOUND,\n            message: `Could't find all '${this.name}' with 'id': [${ids}] (found 0 results, but was looking for ${ids.length})`,\n          });\n        }\n      } else if (filteredData.length === 1) {\n        return filteredData[0];\n      } else {\n        return filteredData;\n      }\n    }\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Core\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/core.rb#L322-L339\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould'nt find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' without an 'id'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ids\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilteredData\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n            code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              resource\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n              id\u001b[38;2;248;248;242m:\u001b[39m ids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n            code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould't find all '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' with 'id': [\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m] (found 0 results, but was looking for \u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilteredData\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m filteredData\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m filteredData\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          12,
          48
        ]
      }
    ],
    "static": {
      "find": {
        "text": "static find<T extends ActiveRecord$Base>(...ids: at.Associations$PrimaryKey[]): T | T[] {\n    if (ids.length == 0) {\n      throw errObj({\n        code: ErrCodes.RECORD_NOT_FOUND,\n        message: `Could'nt find '${this.name}' without an 'id'`,\n      });\n    } else {\n      const klassName = this.name;\n      const allData = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n      const filteredData = allData.filter((record) => ids.includes(record.id));\n      if (filteredData.length === 0) {\n        if (ids.length === 1) {\n          throw errObj({\n            code: ErrCodes.RECORD_NOT_FOUND,\n            params: {\n              resource: this.name,\n              id: ids[0],\n            },\n          });\n        } else {\n          throw errObj({\n            code: ErrCodes.RECORD_NOT_FOUND,\n            message: `Could't find all '${this.name}' with 'id': [${ids}] (found 0 results, but was looking for ${ids.length})`,\n          });\n        }\n      } else if (filteredData.length === 1) {\n        return filteredData[0];\n      } else {\n        return filteredData;\n      }\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould'nt find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' without an 'id'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m ids\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilteredData\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n            code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              resource\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n              id\u001b[38;2;248;248;242m:\u001b[39m ids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n            code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould't find all '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' with 'id': [\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m] (found 0 results, but was looking for \u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilteredData\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m filteredData\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m filteredData\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          16,
          47
        ]
      }
    }
  },
  "ActiveRecord$Persistence": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/persistences/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Persistence extends RueModule {\n  static readonly RUE_AUTO_INCREMENT_RECORD_ID = '__rue_auto_increment_record_id__';\n  static readonly RUE_RECORD_ID = '__rue_record_id__';\n  static readonly RUE_CREATED_AT = '__rue_created_at__';\n  static readonly RUE_UPDATED_AT = '__rue_updated_at__';\n  static readonly RECORD_ALL = 'all';\n\n  /**\n   * It's the same now because there is no beforeDestroy callback\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-delete\n   */\n  delete<T extends ActiveRecord$Base>(): T {\n    return this.destroySync();\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-new_record-3F\n   */\n  isNewRecord(): boolean {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    // @ts-expect-error\n    return _this._newRecord;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-persisted-3F\n   */\n  isPersisted(): boolean {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    // @ts-expect-error\n    return !(_this._newRecord || _this._destroyed);\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-persisted-3F\n   */\n  saveSync(opts?: { validate: boolean }): boolean {\n    const {\n      RUE_RECORD_ID,\n      RUE_AUTO_INCREMENT_RECORD_ID,\n      RUE_CREATED_AT,\n      RUE_UPDATED_AT,\n      RECORD_ALL,\n    } = ActiveRecord$Persistence;\n\n    opts = opts == undefined ? { validate: true } : opts;\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n\n    if (!opts.validate || _this.isValid()) {\n      const klassName = this.constructor.name;\n      _ensureRecordCache(klassName);\n\n      const now = dayjs().format();\n      _this[RUE_CREATED_AT] = _this[RUE_CREATED_AT] || now;\n      _this[RUE_UPDATED_AT] = now;\n\n      // do not exists record\n      if (!_this[RUE_RECORD_ID]) {\n        let __record_aid__ = RecordCache.read<number>(\n          klassName,\n          RUE_AUTO_INCREMENT_RECORD_ID,\n          'value'\n        );\n\n        _this[RUE_RECORD_ID] = __record_aid__;\n        // @ts-expect-error\n        _this._newRecord = false;\n        __record_aid__ = __record_aid__ + 1;\n\n        RecordCache.update(klassName, RUE_AUTO_INCREMENT_RECORD_ID, __record_aid__);\n        RecordCache.create(klassName, RECORD_ALL, [this]);\n      } else {\n        const allRecords = RecordCache.read<ActiveRecord$Base[]>(klassName, RECORD_ALL, 'array');\n\n        allRecords.forEach((record) => {\n          if (record[RUE_RECORD_ID] === _this[RUE_RECORD_ID]) {\n            // @ts-expect-error\n            record = this;\n          }\n        });\n        RecordCache.update(klassName, RECORD_ALL, allRecords);\n      }\n\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-saveSync-21\n   */\n  saveSyncOrThrow(): void | boolean {\n    const _this = this as any;\n    if (_this.isValid()) {\n      this.saveSync({ validate: false });\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: _this.inspect(),\n        },\n      });\n    }\n  }\n\n  destroySync<T extends ActiveRecord$Base>(): T {\n    // @ts-ignore\n    const _this = this as ActiveRecord$Base;\n    const { RECORD_ALL, RUE_RECORD_ID } = ActiveRecord$Persistence;\n\n    if (_this.isPersisted()) {\n      const klassName = this.constructor.name;\n      const allData = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n      const filteredData = allData.filter(\n        (record) => record[RUE_RECORD_ID] != _this[RUE_RECORD_ID]\n      );\n\n      _ensureRecordCache(klassName);\n      RecordCache.update(klassName, RECORD_ALL, filteredData);\n    }\n\n    // @ts-expect-error\n    _this._destroyed = true;\n    Object.freeze(_this);\n    return _this as T;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroyed-3F\n   */\n  isDestroyed(): boolean {\n    const _this = this as any;\n    return !!_this._destroyed;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroyed-3F\n   */\n  touch(opts?: { withCreatedAt?: boolean; time?: string }): boolean {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    const { RUE_CREATED_AT, RUE_UPDATED_AT } = ActiveRecord$Persistence;\n\n    const updateProps =\n      opts && opts.withCreatedAt ? [RUE_CREATED_AT, RUE_UPDATED_AT] : [RUE_UPDATED_AT];\n    const datetime = opts && opts.time ? dayjs(opts.time).format() : dayjs().format();\n\n    const result = updateProps.map((timestamp) => _this.update({ [timestamp]: datetime }));\n\n    return result.every(Boolean);\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update\n   */\n  update<T>(params?: Partial<T>): boolean {\n    const updateProps = (record: ActiveRecord$Base) => {\n      Object.keys(params).forEach((key) => {\n        record[key] = params[key];\n      });\n    };\n\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    const oldRecord = _clone(_this);\n    updateProps(oldRecord);\n\n    if (oldRecord.isValid()) {\n      updateProps(_this);\n      _this.saveSync({ validate: false });\n      return true;\n    } else {\n      _this.errors = oldRecord.errors;\n      return false;\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update-21\n   */\n  updateOrThrow<T>(params?: Partial<T>): boolean {\n    const updateProps = (record: ActiveRecord$Base) => {\n      Object.keys(params).forEach((key) => {\n        record[key] = params[key];\n      });\n    };\n\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    const oldRecord = _clone(_this);\n    updateProps(oldRecord);\n\n    if (oldRecord.isValid()) {\n      updateProps(_this);\n      return _this.saveSync({ validate: false });\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: oldRecord.inspect(),\n        },\n      });\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_attribute\n   */\n  updateAttribute<T extends ActiveRecord$Base>(name: string, value: any): boolean {\n    // @ts-expect-error\n    const _this = this as T;\n    if (_this.hasOwnProperty(name)) {\n      _this[name] = value;\n      return _this.saveSync({ validate: false });\n    } else {\n      return false;\n    }\n  }\n\n  /**\n   * @alias updateAttribute\n   */\n  updateProperty<T extends ActiveRecord$Base>(name: string, value: any): boolean {\n    return this.updateAttribute<T>(name, value);\n  }\n\n  /**\n   * @alias updateAttribute\n   */\n  updateProp<T extends ActiveRecord$Base>(name: string, value: any): boolean {\n    return this.updateAttribute<T>(name, value);\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-create\n   */\n  static create<T extends ActiveRecord$Base, U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): T | T[] {\n    if (Array.isArray(params)) {\n      return params.map((param) => this.create<T, U>(param as Partial<U>, yielder) as T);\n    } else {\n      // @ts-expect-error\n      const _this = this as ct.Constructor<T>;\n      const record = new _this(params);\n      if (yielder) yielder(record);\n      record.saveSync();\n      return record;\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-create-21\n   */\n  static createOrThrow<T extends ActiveRecord$Base, U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): T | T[] {\n    if (Array.isArray(params)) {\n      return params.map((param) => this.createOrThrow<T, U>(param as Partial<U>, yielder) as T);\n    } else {\n      // @ts-expect-error\n      const _this = this as ct.Constructor<T>;\n      const record = new _this(params);\n      if (yielder) yielder(record);\n      record.saveSyncOrThrow();\n      return record;\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-delete\n   */\n  static delete<T extends ActiveRecord$Base>(\n    id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[]\n  ): number {\n    const { RECORD_ALL } = ActiveRecord$Persistence;\n    const ids = Array.isArray(id) ? id : [id];\n    const klassName = this.name;\n    const allData = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n    const allDataLen = allData.length;\n    const filteredData = allData.filter((record) => !ids.includes(record.id));\n    const filteredDataLen = filteredData.length;\n\n    _ensureRecordCache(klassName);\n    RecordCache.update(klassName, RECORD_ALL, filteredData);\n\n    return allDataLen - filteredDataLen;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-destroy\n   */\n  static destroy<T extends ActiveRecord$Base>(\n    id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[]\n  ): T | T[] {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    if (Array.isArray(id)) {\n      return (_this.find<T>(...id) as T[]).map((r) => r.destroySync());\n    } else {\n      return (_this.find<T>(id) as T).destroySync();\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-update\n   */\n  static update<T extends ActiveRecord$Base, U>(\n    id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[] | 'all',\n    params: Partial<U> | Array<Partial<U>>\n  ): T | T[] {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    const ids = Array.isArray(id) ? id : [id];\n    let updatedRecords;\n\n    if (ids.length === 1 && ids[0] === 'all') {\n      const { RECORD_ALL } = ActiveRecord$Persistence;\n      const allRecords = RecordCache.read<T[]>(this.name, RECORD_ALL, 'array');\n      updatedRecords = allRecords.map((record) => {\n        record.update(params);\n        return record;\n      });\n    } else if (ids.length === 1) {\n      const record = _this.find<T>(ids[0]) as T;\n      record.update(params);\n      updatedRecords = [record];\n    } else {\n      updatedRecords = ids.map((id, index) => {\n        const record = _this.find<T>(id) as T;\n        record.update(params[index]);\n        return record;\n      });\n    }\n\n    if (updatedRecords.length === 1) {\n      return updatedRecords[0];\n    } else {\n      return updatedRecords;\n    }\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Persistence\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_auto_increment_record_id__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_record_id__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_created_at__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_updated_at__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'all'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * It's the same now because there is no beforeDestroy callback\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-delete\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mdelete\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-new_record-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misNewRecord\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m_newRecord\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-persisted-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misPersisted\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m_newRecord \u001b[38;2;248;248;242m||\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m_destroyed\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-persisted-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m||\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m now \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m now\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m now\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// do not exists record\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m_this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mlet\u001b[39m __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n          klassName\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;166;226;46m'value'\u001b[39m\n        \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m __record_aid__\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        _this\u001b[38;2;248;248;242m.\u001b[39m_newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m __record_aid__ \u001b[38;2;248;248;242m+\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m __record_aid__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m allRecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        allRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n            record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m allRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-saveSync-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misPersisted\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m record\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m!=\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m filteredData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m_destroyed \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroyed-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misDestroyed\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m_destroyed\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroyed-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mtouch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m updateProps \u001b[38;2;248;248;242m=\u001b[39m\n      opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mwithCreatedAt \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m datetime \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mtime \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mtime\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m updateProps\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtimestamp\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mtimestamp\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m datetime \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mupdateProps\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m oldRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_clone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m oldRecord\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mupdateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mupdateProps\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m oldRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_clone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m oldRecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_attribute\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mupdateAttribute\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @alias updateAttribute\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mupdateProperty\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdateAttribute\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @alias updateAttribute\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mupdateProp\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdateAttribute\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-create\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m params\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam \u001b[38;2;102;217;239mas\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m_this\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-create-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m params\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam \u001b[38;2;102;217;239mas\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m_this\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-delete\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mdelete\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m ids \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m id \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mid\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allDataLen \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m!\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m filteredDataLen \u001b[38;2;248;248;242m=\u001b[39m filteredData\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m filteredData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m allDataLen \u001b[38;2;248;248;242m-\u001b[39m filteredDataLen\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-destroy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence/ClassMethods.html#method-i-update\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'all'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m ids \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m id \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mid\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m updatedRecords\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m ids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'all'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allRecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      updatedRecords \u001b[38;2;248;248;242m=\u001b[39m allRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      updatedRecords \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mrecord\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      updatedRecords \u001b[38;2;248;248;242m=\u001b[39m ids\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m,\u001b[39m index\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m[\u001b[39mindex\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mupdatedRecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m updatedRecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m updatedRecords\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          17,
          364
        ]
      }
    ],
    "instance": {
      "delete": {
        "text": "delete<T extends ActiveRecord$Base>(): T {\n    return this.destroySync();\n  }",
        "highlightText": "\u001b[38;2;102;217;239mdelete\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          28,
          30
        ]
      },
      "isNewRecord": {
        "text": "isNewRecord(): boolean {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    // @ts-expect-error\n    return _this._newRecord;\n  }",
        "highlightText": "\u001b[38;2;230;219;116misNewRecord\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m_newRecord\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          35,
          40
        ]
      },
      "isPersisted": {
        "text": "isPersisted(): boolean {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    // @ts-expect-error\n    return !(_this._newRecord || _this._destroyed);\n  }",
        "highlightText": "\u001b[38;2;230;219;116misPersisted\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m_newRecord \u001b[38;2;248;248;242m||\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m_destroyed\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          45,
          50
        ]
      },
      "saveSync": {
        "text": "saveSync(opts?: { validate: boolean }): boolean {\n    const {\n      RUE_RECORD_ID,\n      RUE_AUTO_INCREMENT_RECORD_ID,\n      RUE_CREATED_AT,\n      RUE_UPDATED_AT,\n      RECORD_ALL,\n    } = ActiveRecord$Persistence;\n\n    opts = opts == undefined ? { validate: true } : opts;\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n\n    if (!opts.validate || _this.isValid()) {\n      const klassName = this.constructor.name;\n      _ensureRecordCache(klassName);\n\n      const now = dayjs().format();\n      _this[RUE_CREATED_AT] = _this[RUE_CREATED_AT] || now;\n      _this[RUE_UPDATED_AT] = now;\n\n      // do not exists record\n      if (!_this[RUE_RECORD_ID]) {\n        let __record_aid__ = RecordCache.read<number>(\n          klassName,\n          RUE_AUTO_INCREMENT_RECORD_ID,\n          'value'\n        );\n\n        _this[RUE_RECORD_ID] = __record_aid__;\n        // @ts-expect-error\n        _this._newRecord = false;\n        __record_aid__ = __record_aid__ + 1;\n\n        RecordCache.update(klassName, RUE_AUTO_INCREMENT_RECORD_ID, __record_aid__);\n        RecordCache.create(klassName, RECORD_ALL, [this]);\n      } else {\n        const allRecords = RecordCache.read<ActiveRecord$Base[]>(klassName, RECORD_ALL, 'array');\n\n        allRecords.forEach((record) => {\n          if (record[RUE_RECORD_ID] === _this[RUE_RECORD_ID]) {\n            // @ts-expect-error\n            record = this;\n          }\n        });\n        RecordCache.update(klassName, RECORD_ALL, allRecords);\n      }\n\n      return true;\n    } else {\n      return false;\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m||\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m now \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m now\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m now\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// do not exists record\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m_this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mlet\u001b[39m __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n          klassName\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;166;226;46m'value'\u001b[39m\n        \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m __record_aid__\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n        _this\u001b[38;2;248;248;242m.\u001b[39m_newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m __record_aid__ \u001b[38;2;248;248;242m+\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m __record_aid__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m allRecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        allRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n            record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m allRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          55,
          107
        ]
      },
      "saveSyncOrThrow": {
        "text": "saveSyncOrThrow(): void | boolean {\n    const _this = this as any;\n    if (_this.isValid()) {\n      this.saveSync({ validate: false });\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: _this.inspect(),\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          112,
          124
        ]
      },
      "destroySync": {
        "text": "destroySync<T extends ActiveRecord$Base>(): T {\n    // @ts-ignore\n    const _this = this as ActiveRecord$Base;\n    const { RECORD_ALL, RUE_RECORD_ID } = ActiveRecord$Persistence;\n\n    if (_this.isPersisted()) {\n      const klassName = this.constructor.name;\n      const allData = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n      const filteredData = allData.filter(\n        (record) => record[RUE_RECORD_ID] != _this[RUE_RECORD_ID]\n      );\n\n      _ensureRecordCache(klassName);\n      RecordCache.update(klassName, RECORD_ALL, filteredData);\n    }\n\n    // @ts-expect-error\n    _this._destroyed = true;\n    Object.freeze(_this);\n    return _this as T;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misPersisted\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m record\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m!=\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m filteredData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m_destroyed \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          126,
          146
        ]
      },
      "isDestroyed": {
        "text": "isDestroyed(): boolean {\n    const _this = this as any;\n    return !!_this._destroyed;\n  }",
        "highlightText": "\u001b[38;2;230;219;116misDestroyed\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m_destroyed\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          151,
          154
        ]
      },
      "touch": {
        "text": "touch(opts?: { withCreatedAt?: boolean; time?: string }): boolean {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    const { RUE_CREATED_AT, RUE_UPDATED_AT } = ActiveRecord$Persistence;\n\n    const updateProps =\n      opts && opts.withCreatedAt ? [RUE_CREATED_AT, RUE_UPDATED_AT] : [RUE_UPDATED_AT];\n    const datetime = opts && opts.time ? dayjs(opts.time).format() : dayjs().format();\n\n    const result = updateProps.map((timestamp) => _this.update({ [timestamp]: datetime }));\n\n    return result.every(Boolean);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtouch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m updateProps \u001b[38;2;248;248;242m=\u001b[39m\n      opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mwithCreatedAt \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m datetime \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mtime \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mtime\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m updateProps\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtimestamp\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mtimestamp\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m datetime \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          159,
          171
        ]
      },
      "update": {
        "text": "update<T>(params?: Partial<T>): boolean {\n    const updateProps = (record: ActiveRecord$Base) => {\n      Object.keys(params).forEach((key) => {\n        record[key] = params[key];\n      });\n    };\n\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    const oldRecord = _clone(_this);\n    updateProps(oldRecord);\n\n    if (oldRecord.isValid()) {\n      updateProps(_this);\n      _this.saveSync({ validate: false });\n      return true;\n    } else {\n      _this.errors = oldRecord.errors;\n      return false;\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mupdateProps\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m oldRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_clone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m oldRecord\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          176,
          196
        ]
      },
      "updateOrThrow": {
        "text": "updateOrThrow<T>(params?: Partial<T>): boolean {\n    const updateProps = (record: ActiveRecord$Base) => {\n      Object.keys(params).forEach((key) => {\n        record[key] = params[key];\n      });\n    };\n\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    const oldRecord = _clone(_this);\n    updateProps(oldRecord);\n\n    if (oldRecord.isValid()) {\n      updateProps(_this);\n      return _this.saveSync({ validate: false });\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: oldRecord.inspect(),\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mupdateProps\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m oldRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_clone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m oldRecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          201,
          224
        ]
      },
      "updateAttribute": {
        "text": "updateAttribute<T extends ActiveRecord$Base>(name: string, value: any): boolean {\n    // @ts-expect-error\n    const _this = this as T;\n    if (_this.hasOwnProperty(name)) {\n      _this[name] = value;\n      return _this.saveSync({ validate: false });\n    } else {\n      return false;\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdateAttribute\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          229,
          238
        ]
      },
      "updateProperty": {
        "text": "updateProperty<T extends ActiveRecord$Base>(name: string, value: any): boolean {\n    return this.updateAttribute<T>(name, value);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdateProperty\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdateAttribute\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          243,
          245
        ]
      },
      "updateProp": {
        "text": "updateProp<T extends ActiveRecord$Base>(name: string, value: any): boolean {\n    return this.updateAttribute<T>(name, value);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdateProp\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdateAttribute\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m value\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          250,
          252
        ]
      }
    },
    "static": {
      "create": {
        "text": "static create<T extends ActiveRecord$Base, U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): T | T[] {\n    if (Array.isArray(params)) {\n      return params.map((param) => this.create<T, U>(param as Partial<U>, yielder) as T);\n    } else {\n      // @ts-expect-error\n      const _this = this as ct.Constructor<T>;\n      const record = new _this(params);\n      if (yielder) yielder(record);\n      record.saveSync();\n      return record;\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m params\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam \u001b[38;2;102;217;239mas\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m_this\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          257,
          271
        ]
      },
      "createOrThrow": {
        "text": "static createOrThrow<T extends ActiveRecord$Base, U>(\n    params?: Partial<U> | Array<Partial<U>>,\n    yielder?: (self: T) => void\n  ): T | T[] {\n    if (Array.isArray(params)) {\n      return params.map((param) => this.createOrThrow<T, U>(param as Partial<U>, yielder) as T);\n    } else {\n      // @ts-expect-error\n      const _this = this as ct.Constructor<T>;\n      const record = new _this(params);\n      if (yielder) yielder(record);\n      record.saveSyncOrThrow();\n      return record;\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m params\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparam \u001b[38;2;102;217;239mas\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m_this\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          276,
          290
        ]
      },
      "delete": {
        "text": "static delete<T extends ActiveRecord$Base>(\n    id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[]\n  ): number {\n    const { RECORD_ALL } = ActiveRecord$Persistence;\n    const ids = Array.isArray(id) ? id : [id];\n    const klassName = this.name;\n    const allData = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n    const allDataLen = allData.length;\n    const filteredData = allData.filter((record) => !ids.includes(record.id));\n    const filteredDataLen = filteredData.length;\n\n    _ensureRecordCache(klassName);\n    RecordCache.update(klassName, RECORD_ALL, filteredData);\n\n    return allDataLen - filteredDataLen;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mdelete\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m ids \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m id \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mid\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allDataLen \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m!\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m filteredDataLen \u001b[38;2;248;248;242m=\u001b[39m filteredData\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m filteredData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m allDataLen \u001b[38;2;248;248;242m-\u001b[39m filteredDataLen\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          295,
          310
        ]
      },
      "destroy": {
        "text": "static destroy<T extends ActiveRecord$Base>(\n    id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[]\n  ): T | T[] {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    if (Array.isArray(id)) {\n      return (_this.find<T>(...id) as T[]).map((r) => r.destroySync());\n    } else {\n      return (_this.find<T>(id) as T).destroySync();\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          315,
          325
        ]
      },
      "update": {
        "text": "static update<T extends ActiveRecord$Base, U>(\n    id: at.Associations$PrimaryKey | at.Associations$PrimaryKey[] | 'all',\n    params: Partial<U> | Array<Partial<U>>\n  ): T | T[] {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    const ids = Array.isArray(id) ? id : [id];\n    let updatedRecords;\n\n    if (ids.length === 1 && ids[0] === 'all') {\n      const { RECORD_ALL } = ActiveRecord$Persistence;\n      const allRecords = RecordCache.read<T[]>(this.name, RECORD_ALL, 'array');\n      updatedRecords = allRecords.map((record) => {\n        record.update(params);\n        return record;\n      });\n    } else if (ids.length === 1) {\n      const record = _this.find<T>(ids[0]) as T;\n      record.update(params);\n      updatedRecords = [record];\n    } else {\n      updatedRecords = ids.map((id, index) => {\n        const record = _this.find<T>(id) as T;\n        record.update(params[index]);\n        return record;\n      });\n    }\n\n    if (updatedRecords.length === 1) {\n      return updatedRecords[0];\n    } else {\n      return updatedRecords;\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    id\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey \u001b[38;2;248;248;242m|\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46m'all'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m ids \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m id \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mid\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m updatedRecords\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m ids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'all'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allRecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      updatedRecords \u001b[38;2;248;248;242m=\u001b[39m allRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      updatedRecords \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mrecord\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      updatedRecords \u001b[38;2;248;248;242m=\u001b[39m ids\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m,\u001b[39m index\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m[\u001b[39mindex\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mupdatedRecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m updatedRecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m updatedRecords\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          330,
          363
        ]
      }
    }
  },
  "ActiveRecord$Associations": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Associations extends ActiveRecord$Associations$Impl {\n  public id: t.PrimaryKey;\n\n  static belongsTo<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: string\n  ) {\n    AssociationRegistry.create(this.name, AssociationList.belongsTo, {\n      [relationName]: {\n        relationFn: (self: T) => (klass as any).findBy({ id: self[foreignKey] }),\n      },\n    });\n  }\n\n  static hasOne<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    AssociationRegistry.create(this.name, AssociationList.hasOne, {\n      [relationName]: {\n        relationFn: (self: T) => (klass as any).findBy({ [foreignKey]: self.id }),\n      },\n    });\n  }\n\n  static hasMany<T extends ActiveRecord$Base>(\n    relationName: string,\n    opts: t.HasManyOptions<T>,\n    scope?: t.HasManyScope<T>\n  ) {\n    const relationFn = (self: T) => {\n      /**\n       * @description I'm worried about the overhead, but load it dynamically to avoid circular references\n       */\n      const {\n        ActiveRecord$Associations$CollectionProxy$Holder: Holder,\n      } = require('../../associations/collection_proxy');\n\n      const foreignKeyData = { [opts.foreignKey]: self.id };\n      const associationData = {\n        dependent: opts.dependent,\n        validate: opts.validate,\n        foreignKeyData,\n      };\n      const holder = new Holder(opts.klass, [], associationData);\n\n      if (self._associationCache[relationName]) {\n        const oldHolder = self._associationCache[relationName].associationHolder;\n        holder.proxy = Array.from(oldHolder.proxy);\n        holder.flags = oldHolder.flags;\n        self._associationCache[relationName].associationHolder = holder;\n      } else {\n        self._associationCache[relationName] = {};\n        self._associationCache[relationName].associationHolder = holder;\n      }\n\n      let useScope;\n      if (holder.flags.useProxy) {\n        /**\n         * @description Pass by value so that 「proxy === record」 does not occur\n         */\n        useScope = Array.from(holder.proxy);\n      } else {\n        if (scope) {\n          useScope = scope(opts.klass).toA();\n        } else {\n          // @ts-expect-error\n          useScope = opts.klass.where<T>(foreignKeyData).toA();\n        }\n      }\n\n      const runtimeScope = createRuntimeAssociationRelation<T, any>((resolve, _reject) => {\n        resolve({ holder, scope: useScope });\n      }, opts.klass)\n        .where(foreignKeyData)\n        .toA();\n\n      /**\n       * @description Since it is a runtime specification, only any type can be given.\n       */\n      const collectionProxy = createRuntimeCollectionProxy<T, any>((resolve, _reject) => {\n        resolve({ holder, scope: runtimeScope });\n      }, opts.klass);\n      return collectionProxy;\n    };\n\n    // default\n    if (opts.validate === undefined) opts.validate = true;\n\n    /**\n     * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many\n     */\n    AssociationRegistry.create(this.name, AssociationList.hasMany, {\n      [relationName]: {\n        relationFn,\n        saveStrategy: PersistenceStrategy.saveStrategyFn(relationName, opts.validate),\n        saveOrThrowStrategy: PersistenceStrategy.saveOrThrowStrategyFn(relationName, opts.validate),\n        destroyStrategy: PersistenceStrategy.destroyStrategyFn(relationName, opts),\n      },\n    });\n  }\n\n  /**\n   * @todo use scope\n   * @todo change return value CollectionProxy runtime instance\n   */\n  static hasAndBelongsToMany<T extends ActiveRecord$Base>(\n    relationName: string,\n    opts: t.HasAndBelongsToManyOptions<T>,\n    _scope?: t.HasAndBelongsToManyOptions<T>\n  ) {\n    const klass = opts.klass;\n    const foreignKeysFn = (self: T) => {\n      const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n        this.name,\n        klass.name,\n        'array'\n      );\n      return tables.reduce((acc, pair) => {\n        if (pair[0] == self.id) {\n          acc.push(pair[1]);\n        }\n        return acc;\n      }, []);\n    };\n\n    IntermediateTable.create(this.name, klass.name, []);\n    AssociationRegistry.create(this.name, AssociationList.hasAndBelongsToMany, {\n      [relationName]: {\n        relationFn: (self: T) => (klass as any).where({ id: foreignKeysFn(self) }),\n      },\n    });\n  }\n\n  hasAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameLeft,\n      'array'\n    );\n\n    if (Array.isArray(tables)) {\n      IntermediateTable.create(klassNameLeft, klassNameRight, [[this.id, record.id]]);\n      return { [klassNameLeft]: this.id, [klassNameRight]: record.id };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }\n\n  releaseAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const beforeIntermediateTable = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameRight\n    );\n\n    if (Array.isArray(beforeIntermediateTable)) {\n      let leavedData = [];\n      let deleteData = [];\n      beforeIntermediateTable.forEach((pair) => {\n        if (this.id == pair[0] && record.id == pair[1]) {\n          deleteData.push(pair);\n        } else {\n          leavedData.push(pair);\n        }\n      });\n      IntermediateTable.update(klassNameLeft, klassNameRight, leavedData);\n      return { [klassNameLeft]: this.id, [klassNameRight]: record.id };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }\n\n  static _defineAssociations<T extends ActiveRecord$Base>(self: T) {\n    const allAssociations = AssociationRegistry.data[self.constructor.name];\n    if (allAssociations == undefined) return;\n\n    Object.keys(allAssociations).forEach((associationName: string) => {\n      const relationData = allAssociations[associationName];\n\n      Object.keys(relationData).forEach((relationName: string) => {\n        const relationFn = relationData[relationName].relationFn;\n\n        Object.defineProperty(self, relationName, {\n          enumerable: true,\n          configurable: false,\n          value: () => relationFn<T>(self),\n        });\n      });\n    });\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPrimaryKey\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mbelongsTo\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m AssociationList\u001b[38;2;248;248;242m.\u001b[39mbelongsTo\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasOne\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHasManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    scope\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHasManyScope\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * @description I'm worried about the overhead, but load it dynamically to avoid circular references\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m:\u001b[39m Holder\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mrequire\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m'../../associations/collection_proxy'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m foreignKeyData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m associationData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        dependent\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mdependent\u001b[38;2;248;248;242m,\u001b[39m\n        validate\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mvalidate\u001b[38;2;248;248;242m,\u001b[39m\n        foreignKeyData\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m holder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mHolder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m associationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m oldHolder \u001b[38;2;248;248;242m=\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39massociationHolder\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moldHolder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mflags \u001b[38;2;248;248;242m=\u001b[39m oldHolder\u001b[38;2;248;248;242m.\u001b[39mflags\u001b[38;2;248;248;242m;\u001b[39m\n        self\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39massociationHolder \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        self\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        self\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39massociationHolder \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mlet\u001b[39m useScope\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mflags\u001b[38;2;248;248;242m.\u001b[39museProxy\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * @description Pass by value so that 「proxy === record」 does not occur\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        useScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          useScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          useScope \u001b[38;2;248;248;242m=\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m runtimeScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mcreateRuntimeAssociationRelation\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m _reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m useScope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * @description Since it is a runtime specification, only any type can be given.\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m collectionProxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mcreateRuntimeCollectionProxy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m _reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m runtimeScope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m collectionProxy\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// default\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m     * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many\u001b[39m\n\u001b[38;2;130;146;162m     */\u001b[39m\n    AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        relationFn\u001b[38;2;248;248;242m,\u001b[39m\n        saveStrategy\u001b[38;2;248;248;242m:\u001b[39m PersistenceStrategy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveStrategyFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mvalidate\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        saveOrThrowStrategy\u001b[38;2;248;248;242m:\u001b[39m PersistenceStrategy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveOrThrowStrategyFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mvalidate\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        destroyStrategy\u001b[38;2;248;248;242m:\u001b[39m PersistenceStrategy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroyStrategyFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @todo use scope\u001b[39m\n\u001b[38;2;130;146;162m   * @todo change return value CollectionProxy runtime instance\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHasAndBelongsToManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    _scope\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHasAndBelongsToManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klass \u001b[38;2;248;248;242m=\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'array'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m tables\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m pair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasAndBelongsToMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtables\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m beforeIntermediateTable \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameRight\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mbeforeIntermediateTable\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      beforeIntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116m_defineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allAssociations \u001b[38;2;248;248;242m=\u001b[39m AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mallAssociations \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mallAssociations\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relationData \u001b[38;2;248;248;242m=\u001b[39m allAssociations\u001b[38;2;248;248;242m[\u001b[39massociationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m relationFn \u001b[38;2;248;248;242m=\u001b[39m relationData\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrelationFn\u001b[38;2;248;248;242m;\u001b[39m\n\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m,\u001b[39m relationName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          enumerable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          configurable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;230;219;116mvalue\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          19,
          233
        ]
      }
    ],
    "static": {
      "belongsTo": {
        "text": "static belongsTo<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: string\n  ) {\n    AssociationRegistry.create(this.name, AssociationList.belongsTo, {\n      [relationName]: {\n        relationFn: (self: T) => (klass as any).findBy({ id: self[foreignKey] }),\n      },\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mbelongsTo\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m AssociationList\u001b[38;2;248;248;242m.\u001b[39mbelongsTo\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          22,
          32
        ]
      },
      "hasOne": {
        "text": "static hasOne<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    AssociationRegistry.create(this.name, AssociationList.hasOne, {\n      [relationName]: {\n        relationFn: (self: T) => (klass as any).findBy({ [foreignKey]: self.id }),\n      },\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasOne\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          34,
          44
        ]
      },
      "hasMany": {
        "text": "static hasMany<T extends ActiveRecord$Base>(\n    relationName: string,\n    opts: t.HasManyOptions<T>,\n    scope?: t.HasManyScope<T>\n  ) {\n    const relationFn = (self: T) => {\n      /**\n       * @description I'm worried about the overhead, but load it dynamically to avoid circular references\n       */\n      const {\n        ActiveRecord$Associations$CollectionProxy$Holder: Holder,\n      } = require('../../associations/collection_proxy');\n\n      const foreignKeyData = { [opts.foreignKey]: self.id };\n      const associationData = {\n        dependent: opts.dependent,\n        validate: opts.validate,\n        foreignKeyData,\n      };\n      const holder = new Holder(opts.klass, [], associationData);\n\n      if (self._associationCache[relationName]) {\n        const oldHolder = self._associationCache[relationName].associationHolder;\n        holder.proxy = Array.from(oldHolder.proxy);\n        holder.flags = oldHolder.flags;\n        self._associationCache[relationName].associationHolder = holder;\n      } else {\n        self._associationCache[relationName] = {};\n        self._associationCache[relationName].associationHolder = holder;\n      }\n\n      let useScope;\n      if (holder.flags.useProxy) {\n        /**\n         * @description Pass by value so that 「proxy === record」 does not occur\n         */\n        useScope = Array.from(holder.proxy);\n      } else {\n        if (scope) {\n          useScope = scope(opts.klass).toA();\n        } else {\n          // @ts-expect-error\n          useScope = opts.klass.where<T>(foreignKeyData).toA();\n        }\n      }\n\n      const runtimeScope = createRuntimeAssociationRelation<T, any>((resolve, _reject) => {\n        resolve({ holder, scope: useScope });\n      }, opts.klass)\n        .where(foreignKeyData)\n        .toA();\n\n      /**\n       * @description Since it is a runtime specification, only any type can be given.\n       */\n      const collectionProxy = createRuntimeCollectionProxy<T, any>((resolve, _reject) => {\n        resolve({ holder, scope: runtimeScope });\n      }, opts.klass);\n      return collectionProxy;\n    };\n\n    // default\n    if (opts.validate === undefined) opts.validate = true;\n\n    /**\n     * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many\n     */\n    AssociationRegistry.create(this.name, AssociationList.hasMany, {\n      [relationName]: {\n        relationFn,\n        saveStrategy: PersistenceStrategy.saveStrategyFn(relationName, opts.validate),\n        saveOrThrowStrategy: PersistenceStrategy.saveOrThrowStrategyFn(relationName, opts.validate),\n        destroyStrategy: PersistenceStrategy.destroyStrategyFn(relationName, opts),\n      },\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHasManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    scope\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHasManyScope\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * @description I'm worried about the overhead, but load it dynamically to avoid circular references\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ActiveRecord$Associations$CollectionProxy$Holder\u001b[38;2;248;248;242m:\u001b[39m Holder\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mrequire\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m'../../associations/collection_proxy'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m foreignKeyData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m associationData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        dependent\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mdependent\u001b[38;2;248;248;242m,\u001b[39m\n        validate\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mvalidate\u001b[38;2;248;248;242m,\u001b[39m\n        foreignKeyData\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m holder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mHolder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m associationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m oldHolder \u001b[38;2;248;248;242m=\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39massociationHolder\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mproxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moldHolder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mflags \u001b[38;2;248;248;242m=\u001b[39m oldHolder\u001b[38;2;248;248;242m.\u001b[39mflags\u001b[38;2;248;248;242m;\u001b[39m\n        self\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39massociationHolder \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        self\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        self\u001b[38;2;248;248;242m.\u001b[39m_associationCache\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39massociationHolder \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mlet\u001b[39m useScope\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mflags\u001b[38;2;248;248;242m.\u001b[39museProxy\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m         * @description Pass by value so that 「proxy === record」 does not occur\u001b[39m\n\u001b[38;2;130;146;162m         */\u001b[39m\n        useScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mproxy\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          useScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          useScope \u001b[38;2;248;248;242m=\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m runtimeScope \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mcreateRuntimeAssociationRelation\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m _reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m useScope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mforeignKeyData\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * @description Since it is a runtime specification, only any type can be given.\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m collectionProxy \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mcreateRuntimeCollectionProxy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m _reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m runtimeScope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m collectionProxy\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// default\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m     * @see https://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many\u001b[39m\n\u001b[38;2;130;146;162m     */\u001b[39m\n    AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        relationFn\u001b[38;2;248;248;242m,\u001b[39m\n        saveStrategy\u001b[38;2;248;248;242m:\u001b[39m PersistenceStrategy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveStrategyFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mvalidate\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        saveOrThrowStrategy\u001b[38;2;248;248;242m:\u001b[39m PersistenceStrategy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveOrThrowStrategyFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mvalidate\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        destroyStrategy\u001b[38;2;248;248;242m:\u001b[39m PersistenceStrategy\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroyStrategyFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          46,
          121
        ]
      },
      "hasAndBelongsToMany": {
        "text": "static hasAndBelongsToMany<T extends ActiveRecord$Base>(\n    relationName: string,\n    opts: t.HasAndBelongsToManyOptions<T>,\n    _scope?: t.HasAndBelongsToManyOptions<T>\n  ) {\n    const klass = opts.klass;\n    const foreignKeysFn = (self: T) => {\n      const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n        this.name,\n        klass.name,\n        'array'\n      );\n      return tables.reduce((acc, pair) => {\n        if (pair[0] == self.id) {\n          acc.push(pair[1]);\n        }\n        return acc;\n      }, []);\n    };\n\n    IntermediateTable.create(this.name, klass.name, []);\n    AssociationRegistry.create(this.name, AssociationList.hasAndBelongsToMany, {\n      [relationName]: {\n        relationFn: (self: T) => (klass as any).where({ id: foreignKeysFn(self) }),\n      },\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHasAndBelongsToManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    _scope\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mHasAndBelongsToManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klass \u001b[38;2;248;248;242m=\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'array'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m tables\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m pair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasAndBelongsToMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          127,
          153
        ]
      },
      "_defineAssociations": {
        "text": "static _defineAssociations<T extends ActiveRecord$Base>(self: T) {\n    const allAssociations = AssociationRegistry.data[self.constructor.name];\n    if (allAssociations == undefined) return;\n\n    Object.keys(allAssociations).forEach((associationName: string) => {\n      const relationData = allAssociations[associationName];\n\n      Object.keys(relationData).forEach((relationName: string) => {\n        const relationFn = relationData[relationName].relationFn;\n\n        Object.defineProperty(self, relationName, {\n          enumerable: true,\n          configurable: false,\n          value: () => relationFn<T>(self),\n        });\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116m_defineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allAssociations \u001b[38;2;248;248;242m=\u001b[39m AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mallAssociations \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mallAssociations\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relationData \u001b[38;2;248;248;242m=\u001b[39m allAssociations\u001b[38;2;248;248;242m[\u001b[39massociationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m relationFn \u001b[38;2;248;248;242m=\u001b[39m relationData\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrelationFn\u001b[38;2;248;248;242m;\u001b[39m\n\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m,\u001b[39m relationName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          enumerable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          configurable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;230;219;116mvalue\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          215,
          232
        ]
      }
    },
    "instance": {
      "hasAndBelongsToMany": {
        "text": "hasAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameLeft,\n      'array'\n    );\n\n    if (Array.isArray(tables)) {\n      IntermediateTable.create(klassNameLeft, klassNameRight, [[this.id, record.id]]);\n      return { [klassNameLeft]: this.id, [klassNameRight]: record.id };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtables\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          155,
          179
        ]
      },
      "releaseAndBelongsToMany": {
        "text": "releaseAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const beforeIntermediateTable = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameRight\n    );\n\n    if (Array.isArray(beforeIntermediateTable)) {\n      let leavedData = [];\n      let deleteData = [];\n      beforeIntermediateTable.forEach((pair) => {\n        if (this.id == pair[0] && record.id == pair[1]) {\n          deleteData.push(pair);\n        } else {\n          leavedData.push(pair);\n        }\n      });\n      IntermediateTable.update(klassNameLeft, klassNameRight, leavedData);\n      return { [klassNameLeft]: this.id, [klassNameRight]: record.id };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m beforeIntermediateTable \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameRight\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mbeforeIntermediateTable\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      beforeIntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mid \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          181,
          213
        ]
      }
    }
  },
  "ActiveRecord$Associations$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/impl.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "abstract class ActiveRecord$Associations$Impl extends RueModule {\n  // Prepared for checking with hasOwnProperty ()\n  static __rue_impl_class__ = ActiveSupport$ImplBase.__rue_impl_class__;\n}",
        "highlightText": "\u001b[38;2;102;217;239mabstract\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$Impl\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// Prepared for checking with hasOwnProperty ()\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m __rue_impl_class__ \u001b[38;2;248;248;242m=\u001b[39m ActiveSupport$ImplBase\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          4,
          7
        ]
      },
      {
        "text": "interface ActiveRecord$Associations$Impl {}",
        "highlightText": "\u001b[38;2;102;217;239minterface\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          9,
          9
        ]
      }
    ]
  },
  "ActiveRecord$Querying": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/querying/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Querying extends RueModule {\n  /**\n   * delegate to ActiveRecord$FinderMethods\n   */\n\n  static find<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    ...ids: at.Associations$PrimaryKey[]\n  ): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().find<U>(...ids);\n  }\n\n  static findBy<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findBy<U>(params);\n  }\n\n  static findByOrThrow<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findByOrThrow<U>(params);\n  }\n\n  static take<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().take(limit);\n  }\n\n  static takeOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().takeOrThrow(limit);\n  }\n\n  static first<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().first(limit);\n  }\n\n  static firstOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().firstOrThrow(limit);\n  }\n\n  static last<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().last(limit);\n  }\n\n  static lastOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().lastOrThrow(limit);\n  }\n\n  static isExists<T extends ActiveRecord$Base, U>(\n    condition?: rmt.FinderMethods$ExistsCondition<U>\n  ): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isExists<U>(condition);\n  }\n\n  /**\n   * delegate to ActiveRecord$Relation\n   */\n\n  static isAny<T extends ActiveRecord$Base>(filter?: (record: T) => boolean): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isAny(filter);\n  }\n\n  static isMany<T extends ActiveRecord$Base>(filter?: (record: T) => boolean): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isMany(filter);\n  }\n\n  static isNone<T extends ActiveRecord$Base>(filter?: (record: T) => boolean): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isNone(filter);\n  }\n\n  static isOne<T extends ActiveRecord$Base>(filter?: (record: T) => boolean): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isOne(filter);\n  }\n\n  static findOrCreateBy<T extends ActiveRecord$Base, U>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findOrCreateBy<U>(params, yielder);\n  }\n\n  static findOrCreateByOrThrow<T extends ActiveRecord$Base, U>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findOrCreateByOrThrow<U>(params, yielder);\n  }\n\n  static findOrInitializeBy<T extends ActiveRecord$Base, U>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findOrInitializeBy<U>(params, yielder);\n  }\n\n  static createOrFindBy<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().createOrFindBy<U>(params);\n  }\n\n  static createOrFindByOrThrow<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().createOrFindByOrThrow<U>(params);\n  }\n\n  static destroyAll<T extends ActiveRecord$Base>(): Promise<T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().destroyAll();\n  }\n\n  static deleteAll<T extends ActiveRecord$Base>(): Promise<number> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().deleteAll();\n  }\n\n  static updateAll<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<number> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().updateAll<U>(params);\n  }\n\n  static touchAll<T extends ActiveRecord$Base, U>(\n    params?: Partial<U>,\n    opts?: { withCreatedAt?: boolean; time?: string }\n  ): Promise<number> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().touchAll<U>(params, opts);\n  }\n\n  static destroyBy<T extends ActiveRecord$Base>(filter?: (self: T) => boolean): Promise<T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().destroyBy(filter);\n  }\n\n  static deleteBy<T extends ActiveRecord$Base, U>(params?: Partial<U>): Promise<number> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().deleteBy<U>(params);\n  }\n\n  /**\n   * delegate to ActiveRecord$QueryMethods\n   */\n\n  static where<T extends ActiveRecord$Base, U>(params: Partial<U>): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().where<U>(params);\n  }\n\n  static rewhere<T extends ActiveRecord$Base, U>(params: Partial<U>): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().rewhere<U>(params);\n  }\n\n  static order<T extends ActiveRecord$Base, U = { [key: string]: rmt.QueryMethods$Directions }>(\n    params: Partial<U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().order<U>(params);\n  }\n\n  static reorder<T extends ActiveRecord$Base, U = { [key: string]: rmt.QueryMethods$Directions }>(\n    params: Partial<U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().reorder<U>(params);\n  }\n\n  static offset<T extends ActiveRecord$Base>(value: number): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().offset(value);\n  }\n\n  static limit<T extends ActiveRecord$Base>(value: number): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().limit(value);\n  }\n\n  static group<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    ...props: Array<keyof U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().group<U>(...props);\n  }\n\n  static unscope<T extends ActiveRecord$Base>(\n    ...scopeMethods: rmt.QueryMethods$ScopeMethods[]\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().unscope(...scopeMethods);\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Querying\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * delegate to ActiveRecord$FinderMethods\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfirstOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfirstOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mlastOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlastOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misExists\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    condition\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mFinderMethods$ExistsCondition\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misExists\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * delegate to ActiveRecord$Relation\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misNone\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misNone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misOne\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindOrCreateBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindOrCreateBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindOrCreateByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindOrCreateByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindOrInitializeBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindOrInitializeBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mcreateOrFindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrFindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mcreateOrFindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrFindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdeleteAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdeleteAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mupdateAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdateAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtouchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtouchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroyBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdeleteBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdeleteBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * delegate to ActiveRecord$QueryMethods\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m rmt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mreorder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m rmt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreorder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$ScopeMethods\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          16,
          250
        ]
      }
    ],
    "static": {
      "find": {
        "text": "static find<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    ...ids: at.Associations$PrimaryKey[]\n  ): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().find<U>(...ids);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          21,
          27
        ]
      },
      "findBy": {
        "text": "static findBy<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findBy<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          29,
          33
        ]
      },
      "findByOrThrow": {
        "text": "static findByOrThrow<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findByOrThrow<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          35,
          39
        ]
      },
      "take": {
        "text": "static take<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().take(limit);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          41,
          45
        ]
      },
      "takeOrThrow": {
        "text": "static takeOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().takeOrThrow(limit);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          47,
          51
        ]
      },
      "first": {
        "text": "static first<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().first(limit);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          53,
          57
        ]
      },
      "firstOrThrow": {
        "text": "static firstOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().firstOrThrow(limit);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfirstOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfirstOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          59,
          63
        ]
      },
      "last": {
        "text": "static last<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().last(limit);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          65,
          69
        ]
      },
      "lastOrThrow": {
        "text": "static lastOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().lastOrThrow(limit);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mlastOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlastOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          71,
          75
        ]
      },
      "isExists": {
        "text": "static isExists<T extends ActiveRecord$Base, U>(\n    condition?: rmt.FinderMethods$ExistsCondition<U>\n  ): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isExists<U>(condition);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misExists\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    condition\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mFinderMethods$ExistsCondition\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misExists\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          77,
          83
        ]
      },
      "isAny": {
        "text": "static isAny<T extends ActiveRecord$Base>(filter?: (record: T) => boolean): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isAny(filter);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          89,
          93
        ]
      },
      "isMany": {
        "text": "static isMany<T extends ActiveRecord$Base>(filter?: (record: T) => boolean): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isMany(filter);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          95,
          99
        ]
      },
      "isNone": {
        "text": "static isNone<T extends ActiveRecord$Base>(filter?: (record: T) => boolean): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isNone(filter);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misNone\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misNone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          101,
          105
        ]
      },
      "isOne": {
        "text": "static isOne<T extends ActiveRecord$Base>(filter?: (record: T) => boolean): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().isOne(filter);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116misOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misOne\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          107,
          111
        ]
      },
      "findOrCreateBy": {
        "text": "static findOrCreateBy<T extends ActiveRecord$Base, U>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findOrCreateBy<U>(params, yielder);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindOrCreateBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindOrCreateBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          113,
          120
        ]
      },
      "findOrCreateByOrThrow": {
        "text": "static findOrCreateByOrThrow<T extends ActiveRecord$Base, U>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findOrCreateByOrThrow<U>(params, yielder);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindOrCreateByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindOrCreateByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          122,
          129
        ]
      },
      "findOrInitializeBy": {
        "text": "static findOrInitializeBy<T extends ActiveRecord$Base, U>(\n    params: Partial<U>,\n    yielder?: (self: T) => void\n  ): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().findOrInitializeBy<U>(params, yielder);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindOrInitializeBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindOrInitializeBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          131,
          138
        ]
      },
      "createOrFindBy": {
        "text": "static createOrFindBy<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().createOrFindBy<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mcreateOrFindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrFindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          140,
          144
        ]
      },
      "createOrFindByOrThrow": {
        "text": "static createOrFindByOrThrow<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().createOrFindByOrThrow<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mcreateOrFindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrFindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          146,
          150
        ]
      },
      "destroyAll": {
        "text": "static destroyAll<T extends ActiveRecord$Base>(): Promise<T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().destroyAll();\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          152,
          156
        ]
      },
      "deleteAll": {
        "text": "static deleteAll<T extends ActiveRecord$Base>(): Promise<number> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().deleteAll();\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdeleteAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdeleteAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          158,
          162
        ]
      },
      "updateAll": {
        "text": "static updateAll<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<number> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().updateAll<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mupdateAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdateAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          164,
          168
        ]
      },
      "touchAll": {
        "text": "static touchAll<T extends ActiveRecord$Base, U>(\n    params?: Partial<U>,\n    opts?: { withCreatedAt?: boolean; time?: string }\n  ): Promise<number> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().touchAll<U>(params, opts);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtouchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtouchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          170,
          177
        ]
      },
      "destroyBy": {
        "text": "static destroyBy<T extends ActiveRecord$Base>(filter?: (self: T) => boolean): Promise<T[]> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().destroyBy(filter);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroyBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          179,
          183
        ]
      },
      "deleteBy": {
        "text": "static deleteBy<T extends ActiveRecord$Base, U>(params?: Partial<U>): Promise<number> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().deleteBy<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdeleteBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdeleteBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          185,
          189
        ]
      },
      "where": {
        "text": "static where<T extends ActiveRecord$Base, U>(params: Partial<U>): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().where<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          195,
          199
        ]
      },
      "rewhere": {
        "text": "static rewhere<T extends ActiveRecord$Base, U>(params: Partial<U>): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().rewhere<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          201,
          205
        ]
      },
      "order": {
        "text": "static order<T extends ActiveRecord$Base, U = { [key: string]: rmt.QueryMethods$Directions }>(\n    params: Partial<U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().order<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m rmt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          207,
          213
        ]
      },
      "reorder": {
        "text": "static reorder<T extends ActiveRecord$Base, U = { [key: string]: rmt.QueryMethods$Directions }>(\n    params: Partial<U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().reorder<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mreorder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m rmt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mQueryMethods$Directions \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreorder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          215,
          221
        ]
      },
      "offset": {
        "text": "static offset<T extends ActiveRecord$Base>(value: number): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().offset(value);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          223,
          227
        ]
      },
      "limit": {
        "text": "static limit<T extends ActiveRecord$Base>(value: number): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().limit(value);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          229,
          233
        ]
      },
      "group": {
        "text": "static group<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    ...props: Array<keyof U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().group<U>(...props);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          235,
          241
        ]
      },
      "unscope": {
        "text": "static unscope<T extends ActiveRecord$Base>(\n    ...scopeMethods: rmt.QueryMethods$ScopeMethods[]\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as typeof ActiveRecord$Base;\n    return _this.all<T>().unscope(...scopeMethods);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m:\u001b[39m rmt\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$ScopeMethods\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          243,
          249
        ]
      }
    }
  },
  "ActiveRecord$Scoping": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/scoping/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Scoping extends ActiveRecord$Scoping$Impl {}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Scoping\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Scoping$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          4,
          4
        ]
      }
    ]
  },
  "ActiveRecord$Scoping$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/scoping/impl.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Scoping$Impl extends RueModule {\n  static __rue_impl_class__ = ActiveSupport$ImplBase.__rue_impl_class__;\n  // ActiveRecord$Scoping$Named\n  static all: <T extends ActiveRecord$Base>() => Promise<ActiveRecord$Relation<T>>;\n  static scope: <T extends ActiveRecord$Base>(\n    scopeName: string,\n    fn: (...args) => t.ScopeVal<T>\n  ) => void;\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Scoping$Impl\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m __rue_impl_class__ \u001b[38;2;248;248;242m=\u001b[39m ActiveSupport$ImplBase\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Scoping$Named\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m all\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    scopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39margs\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeVal\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          11,
          19
        ]
      }
    ]
  },
  "ActiveRecord$Scoping$Named": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/scoping/named.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Scoping$Named extends RueModule {\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html#method-i-all\n   */\n  static all<T extends ActiveRecord$Base>(): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ct.Constructor<T>;\n    const klassName = _this.name;\n\n    if (RecordCache.read<T[]>(klassName, RECORD_ALL, 'array').length > 0) {\n      const scope = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n      // Must pass a copy\n      const holder = new Holder<T>(_this, Array.from(scope));\n      const relation = createRuntimeRelation<T, Holder<T>>((resolve, _reject) => {\n        // Must pass a copy\n        resolve({ holder, scope: Array.from(scope) });\n      }, _this);\n\n      return relation;\n    } else {\n      const relation = createRuntimeRelation<T, Holder<T>>((resolve, _reject) => {\n        const scope = _this\n          // fetchAll is defined in ActiveRecord$Base but is protected so I get a typescript error.\n          // @ts-expect-error\n          .fetchAll()\n          .then((data) => {\n            const records = data.map((d) => {\n              const record = new _this(d);\n\n              record.saveSync();\n\n              return record;\n            }) as Array<T>;\n            return Array.from(records);\n          });\n        const holder = new Holder<T>(_this, []);\n        resolve({ holder, scope });\n      }, _this);\n\n      return relation;\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html#method-i-scope\n   */\n  static scope<T extends ActiveRecord$Base>(\n    scopeName: string,\n    fn: (self: ct.Constructor<T>, ...args) => t.ScopeVal<T>\n  ) {\n    // @ts-expect-error\n    const _this = this as ct.Constructor<T>;\n\n    const scopeData = ScopeRegistry.read<rt.Scopes>(_this.name, 'scope', 'object');\n    if (scopeData[scopeName]) return;\n\n    ScopeRegistry.create(_this.name, 'scope', {\n      [scopeName]: fn,\n    });\n\n    defineScope<T>(_this, scopeName);\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Scoping$Named\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html#method-i-all\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m scope \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// Must pass a copy\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m holder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mHolder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mcreateRuntimeRelation\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m _reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m// Must pass a copy\u001b[39m\n        \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m _this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m relation\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mcreateRuntimeRelation\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m _reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m scope \u001b[38;2;248;248;242m=\u001b[39m _this\n          \u001b[38;2;130;146;162m// fetchAll is defined in ActiveRecord$Base but is protected so I get a typescript error.\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m_this\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m holder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mHolder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m _this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m relation\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html#method-i-scope\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    scopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m...\u001b[39margs\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeVal\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m scopeData \u001b[38;2;248;248;242m=\u001b[39m ScopeRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mScopes\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'scope'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscopeData\u001b[38;2;248;248;242m[\u001b[39mscopeName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    ScopeRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'scope'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mscopeName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m fn\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;230;219;116mdefineScope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m scopeName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          16,
          78
        ]
      }
    ],
    "static": {
      "all": {
        "text": "static all<T extends ActiveRecord$Base>(): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ct.Constructor<T>;\n    const klassName = _this.name;\n\n    if (RecordCache.read<T[]>(klassName, RECORD_ALL, 'array').length > 0) {\n      const scope = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n      // Must pass a copy\n      const holder = new Holder<T>(_this, Array.from(scope));\n      const relation = createRuntimeRelation<T, Holder<T>>((resolve, _reject) => {\n        // Must pass a copy\n        resolve({ holder, scope: Array.from(scope) });\n      }, _this);\n\n      return relation;\n    } else {\n      const relation = createRuntimeRelation<T, Holder<T>>((resolve, _reject) => {\n        const scope = _this\n          // fetchAll is defined in ActiveRecord$Base but is protected so I get a typescript error.\n          // @ts-expect-error\n          .fetchAll()\n          .then((data) => {\n            const records = data.map((d) => {\n              const record = new _this(d);\n\n              record.saveSync();\n\n              return record;\n            }) as Array<T>;\n            return Array.from(records);\n          });\n        const holder = new Holder<T>(_this, []);\n        resolve({ holder, scope });\n      }, _this);\n\n      return relation;\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m scope \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// Must pass a copy\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m holder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mHolder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mcreateRuntimeRelation\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m _reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;130;146;162m// Must pass a copy\u001b[39m\n        \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscope\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m _this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m relation\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mcreateRuntimeRelation\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m _reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m scope \u001b[38;2;248;248;242m=\u001b[39m _this\n          \u001b[38;2;130;146;162m// fetchAll is defined in ActiveRecord$Base but is protected so I get a typescript error.\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m_this\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mfrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m holder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mHolder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder\u001b[38;2;248;248;242m,\u001b[39m scope \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m _this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m relation\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          20,
          57
        ]
      },
      "scope": {
        "text": "static scope<T extends ActiveRecord$Base>(\n    scopeName: string,\n    fn: (self: ct.Constructor<T>, ...args) => t.ScopeVal<T>\n  ) {\n    // @ts-expect-error\n    const _this = this as ct.Constructor<T>;\n\n    const scopeData = ScopeRegistry.read<rt.Scopes>(_this.name, 'scope', 'object');\n    if (scopeData[scopeName]) return;\n\n    ScopeRegistry.create(_this.name, 'scope', {\n      [scopeName]: fn,\n    });\n\n    defineScope<T>(_this, scopeName);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    scopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m...\u001b[39margs\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeVal\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m scopeData \u001b[38;2;248;248;242m=\u001b[39m ScopeRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mScopes\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'scope'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscopeData\u001b[38;2;248;248;242m[\u001b[39mscopeName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    ScopeRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'scope'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mscopeName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m fn\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;230;219;116mdefineScope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m scopeName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          62,
          77
        ]
      }
    }
  },
  "ActiveRecord$Associations$Persistence": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/persistence/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Associations$Persistence extends RueModule {\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroy\n   */\n  destroy<T extends ActiveRecord$Base>(): Promise<T | boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    // @ts-expect-error\n    return _this._destroyAssociations<T>().then(() => {\n      if (Object.values(_this.errors['hasMany'] || {}).length > 0) {\n        return false;\n      } else {\n        return _this.destroySync();\n      }\n    });\n  }\n\n  protected _destroyAssociations<T extends ActiveRecord$Base>(): Promise<\n    Array<T[] | boolean | number>\n  > {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    // save hasMany association records\n    const hasManyStrategies = AssociationRegistry.read<rt.AssociationsData>(\n      _this.constructor.name,\n      AssociationList.hasMany,\n      'object'\n    );\n    return Promise.all(\n      Object.keys(hasManyStrategies).map((relationName: string) => {\n        if (hasManyStrategies[relationName]['destroyStrategy']) {\n          const destroyStrategy = hasManyStrategies[relationName][\n            'destroyStrategy'\n          ] as rt.AssociationsHasManyValue['destroyStrategy'];\n          // @ts-expect-error\n          return destroyStrategy<T>(_this);\n        }\n      })\n    ).then((associationDestroyResult) => {\n      return associationDestroyResult;\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Validations.html#method-i-save\n   */\n  save(opts?: { validate: boolean }): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n\n    _this.saveSync(opts);\n\n    // save hasMany association records\n    const hasManyStrategies = AssociationRegistry.read<rt.AssociationsData>(\n      _this.constructor.name,\n      AssociationList.hasMany,\n      'object'\n    );\n    return Promise.all(\n      Object.keys(hasManyStrategies).map((relationName: string) => {\n        if (hasManyStrategies[relationName]['saveStrategy']) {\n          const saveStrategy = hasManyStrategies[relationName][\n            'saveStrategy'\n          ] as rt.AssociationsHasManyValue['saveStrategy'];\n          return saveStrategy(_this) as Promise<boolean>;\n        }\n      })\n    ).then((associationSaveResult) => {\n      return associationSaveResult.every(Boolean);\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/Validations.html#method-i-save-21\n   */\n  saveOrThrow(opts?: { validate: boolean }): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n\n    _this.saveSyncOrThrow();\n\n    // save hasMany association records\n    const hasManyStrategies = AssociationRegistry.read<rt.AssociationsData>(\n      _this.constructor.name,\n      AssociationList.hasMany,\n      'object'\n    );\n\n    return Promise.all(\n      Object.keys(hasManyStrategies).map((relationName: string) => {\n        if (hasManyStrategies[relationName]['saveStrategy']) {\n          const saveOrThrowStrategy = hasManyStrategies[relationName][\n            'saveOrThrowStrategy'\n          ] as rt.AssociationsHasManyValue['saveOrThrowStrategy'];\n          return saveOrThrowStrategy(_this) as Promise<boolean>;\n        }\n      })\n    ).then((associationSaveResult) => {\n      return associationSaveResult.every(Boolean);\n    });\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$Persistence\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-destroy\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_destroyAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalues\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'hasMany'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116m_destroyAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\n    \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// save hasMany association records\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m hasManyStrategies \u001b[38;2;248;248;242m=\u001b[39m AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mAssociationsData\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n      AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'object'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'destroyStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m destroyStrategy \u001b[38;2;248;248;242m=\u001b[39m hasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;166;226;46m'destroyStrategy'\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mAssociationsHasManyValue\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'destroyStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mdestroyStrategy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationDestroyResult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m associationDestroyResult\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Validations.html#method-i-save\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// save hasMany association records\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m hasManyStrategies \u001b[38;2;248;248;242m=\u001b[39m AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mAssociationsData\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n      AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'object'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'saveStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m saveStrategy \u001b[38;2;248;248;242m=\u001b[39m hasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;166;226;46m'saveStrategy'\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mAssociationsHasManyValue\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'saveStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116msaveStrategy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationSaveResult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m associationSaveResult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/Validations.html#method-i-save-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// save hasMany association records\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m hasManyStrategies \u001b[38;2;248;248;242m=\u001b[39m AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mAssociationsData\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n      AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'object'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'saveStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m saveOrThrowStrategy \u001b[38;2;248;248;242m=\u001b[39m hasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;166;226;46m'saveOrThrowStrategy'\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mAssociationsHasManyValue\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'saveOrThrowStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116msaveOrThrowStrategy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationSaveResult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m associationSaveResult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          14,
          115
        ]
      }
    ],
    "instance": {
      "destroy": {
        "text": "destroy<T extends ActiveRecord$Base>(): Promise<T | boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    // @ts-expect-error\n    return _this._destroyAssociations<T>().then(() => {\n      if (Object.values(_this.errors['hasMany'] || {}).length > 0) {\n        return false;\n      } else {\n        return _this.destroySync();\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_destroyAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalues\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'hasMany'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          18,
          29
        ]
      },
      "_destroyAssociations": {
        "text": "protected _destroyAssociations<T extends ActiveRecord$Base>(): Promise<\n    Array<T[] | boolean | number>\n  > {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n    // save hasMany association records\n    const hasManyStrategies = AssociationRegistry.read<rt.AssociationsData>(\n      _this.constructor.name,\n      AssociationList.hasMany,\n      'object'\n    );\n    return Promise.all(\n      Object.keys(hasManyStrategies).map((relationName: string) => {\n        if (hasManyStrategies[relationName]['destroyStrategy']) {\n          const destroyStrategy = hasManyStrategies[relationName][\n            'destroyStrategy'\n          ] as rt.AssociationsHasManyValue['destroyStrategy'];\n          // @ts-expect-error\n          return destroyStrategy<T>(_this);\n        }\n      })\n    ).then((associationDestroyResult) => {\n      return associationDestroyResult;\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;230;219;116m_destroyAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\n    \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// save hasMany association records\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m hasManyStrategies \u001b[38;2;248;248;242m=\u001b[39m AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mAssociationsData\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n      AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'object'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'destroyStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m destroyStrategy \u001b[38;2;248;248;242m=\u001b[39m hasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;166;226;46m'destroyStrategy'\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mAssociationsHasManyValue\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'destroyStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mdestroyStrategy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationDestroyResult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m associationDestroyResult\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          31,
          55
        ]
      },
      "save": {
        "text": "save(opts?: { validate: boolean }): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n\n    _this.saveSync(opts);\n\n    // save hasMany association records\n    const hasManyStrategies = AssociationRegistry.read<rt.AssociationsData>(\n      _this.constructor.name,\n      AssociationList.hasMany,\n      'object'\n    );\n    return Promise.all(\n      Object.keys(hasManyStrategies).map((relationName: string) => {\n        if (hasManyStrategies[relationName]['saveStrategy']) {\n          const saveStrategy = hasManyStrategies[relationName][\n            'saveStrategy'\n          ] as rt.AssociationsHasManyValue['saveStrategy'];\n          return saveStrategy(_this) as Promise<boolean>;\n        }\n      })\n    ).then((associationSaveResult) => {\n      return associationSaveResult.every(Boolean);\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// save hasMany association records\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m hasManyStrategies \u001b[38;2;248;248;242m=\u001b[39m AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mAssociationsData\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n      AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'object'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'saveStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m saveStrategy \u001b[38;2;248;248;242m=\u001b[39m hasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;166;226;46m'saveStrategy'\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mAssociationsHasManyValue\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'saveStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116msaveStrategy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationSaveResult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m associationSaveResult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          60,
          84
        ]
      },
      "saveOrThrow": {
        "text": "saveOrThrow(opts?: { validate: boolean }): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Base;\n\n    _this.saveSyncOrThrow();\n\n    // save hasMany association records\n    const hasManyStrategies = AssociationRegistry.read<rt.AssociationsData>(\n      _this.constructor.name,\n      AssociationList.hasMany,\n      'object'\n    );\n\n    return Promise.all(\n      Object.keys(hasManyStrategies).map((relationName: string) => {\n        if (hasManyStrategies[relationName]['saveStrategy']) {\n          const saveOrThrowStrategy = hasManyStrategies[relationName][\n            'saveOrThrowStrategy'\n          ] as rt.AssociationsHasManyValue['saveOrThrowStrategy'];\n          return saveOrThrowStrategy(_this) as Promise<boolean>;\n        }\n      })\n    ).then((associationSaveResult) => {\n      return associationSaveResult.every(Boolean);\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// save hasMany association records\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m hasManyStrategies \u001b[38;2;248;248;242m=\u001b[39m AssociationRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mAssociationsData\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n      AssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'object'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mhasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'saveStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m saveOrThrowStrategy \u001b[38;2;248;248;242m=\u001b[39m hasManyStrategies\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\n            \u001b[38;2;166;226;46m'saveOrThrowStrategy'\u001b[39m\n          \u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m rt\u001b[38;2;248;248;242m.\u001b[39mAssociationsHasManyValue\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'saveOrThrowStrategy'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116msaveOrThrowStrategy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationSaveResult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m associationSaveResult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          89,
          114
        ]
      }
    }
  },
  "ActiveRecord$Associations$PersistenceStrategy": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/persistence_strategy/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$Associations$PersistenceStrategy {\n  static saveStrategyFn<T extends ActiveRecord$Base>(\n    relationName: string,\n    validate: boolean\n  ): (self: T) => Promise<boolean> {\n    return (self: T): Promise<boolean> => {\n      return self[relationName]()\n        ._currentScope()\n        .then((childrens: T[]) => {\n          return childrens\n            .map((c) => {\n              return c.saveSync({ validate });\n            })\n            .every(Boolean);\n        });\n    };\n  }\n\n  static saveOrThrowStrategyFn<T extends ActiveRecord$Base>(\n    relationName: string,\n    validate?: boolean\n  ): (self: T) => Promise<boolean> {\n    return (self: T): Promise<boolean> => {\n      return self[relationName]()\n        ._currentScope()\n        .then((childrens: T[]) => {\n          return childrens\n            .map((c) => {\n              return c.saveSyncOrThrow();\n            })\n            .every(Boolean);\n        });\n    };\n  }\n\n  static destroyStrategyFn<T extends ActiveRecord$Base>(\n    relationName: string,\n    opts: HasManyOptions<T>\n  ): (self: T) => Promise<T[] | boolean | number> {\n    return (self: T): Promise<T[] | boolean | number> => {\n      return self[relationName]()\n        .toA()\n        .then((records: T[]) => {\n          if (opts.dependent === DependentList.destroy) {\n            return records.map((r) => r.destroySync());\n          } else if (opts.dependent === DependentList.nullify) {\n            return records.map((r) => {\n              r.update({ [opts.foreignKey]: undefined });\n              return r;\n            });\n          } else if (opts.dependent === DependentList.deleteAll) {\n            const recordIds = records.map((r) => r.id);\n            const hasManyKlass = opts.klass;\n            // @ts-expect-error\n            hasManyKlass.delete(recordIds);\n          } else if (opts.dependent === DependentList.restrictWithException) {\n            if (records.length > 0) {\n              throw errObj({\n                code: ErrCodes.DELETE_RESTRICTION_ERROR,\n                params: {\n                  associatedResource: opts.klass.name,\n                },\n              });\n            }\n          } else if (opts.dependent === DependentList.restrictWithError) {\n            if (records.length > 0) {\n              if (!self.errors[AssociationList.hasMany]) self.errors[AssociationList.hasMany] = {};\n              self.errors[AssociationList.hasMany][relationName] = [\n                errObj({\n                  code: ErrCodes.DELETE_RESTRICTION_ERROR,\n                  params: {\n                    associatedResource: opts.klass.name,\n                  },\n                }),\n              ];\n              return false;\n            }\n          } else {\n            throw errObj({\n              code: ErrCodes.FOREIGN_KEY_CONSTRAIT_FAILS,\n              params: {\n                resource: self.constructor.name,\n                foreignKey: opts.foreignKey,\n              },\n            });\n          }\n        });\n    };\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$PersistenceStrategy\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116msaveStrategyFn\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_currentScope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildrens\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m childrens\n            \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mc\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m c\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116msaveOrThrowStrategyFn\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    validate\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_currentScope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildrens\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m childrens\n            \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mc\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m c\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyStrategyFn\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m HasManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mdestroy\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mnullify\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              r\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m r\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mdeleteAll\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m recordIds \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m hasManyKlass \u001b[38;2;248;248;242m=\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n            hasManyKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mdelete\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordIds\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mrestrictWithException\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n                code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mDELETE_RESTRICTION_ERROR\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                  associatedResource\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mrestrictWithError\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mAssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mAssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n              self\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mAssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n                \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n                  code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mDELETE_RESTRICTION_ERROR\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                  params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                    associatedResource\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                  \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n              code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mFOREIGN_KEY_CONSTRAIT_FAILS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                resource\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                foreignKey\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mforeignKey\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          6,
          95
        ]
      }
    ],
    "static": {
      "saveStrategyFn": {
        "text": "static saveStrategyFn<T extends ActiveRecord$Base>(\n    relationName: string,\n    validate: boolean\n  ): (self: T) => Promise<boolean> {\n    return (self: T): Promise<boolean> => {\n      return self[relationName]()\n        ._currentScope()\n        .then((childrens: T[]) => {\n          return childrens\n            .map((c) => {\n              return c.saveSync({ validate });\n            })\n            .every(Boolean);\n        });\n    };\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116msaveStrategyFn\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_currentScope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildrens\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m childrens\n            \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mc\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m c\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          7,
          22
        ]
      },
      "saveOrThrowStrategyFn": {
        "text": "static saveOrThrowStrategyFn<T extends ActiveRecord$Base>(\n    relationName: string,\n    validate?: boolean\n  ): (self: T) => Promise<boolean> {\n    return (self: T): Promise<boolean> => {\n      return self[relationName]()\n        ._currentScope()\n        .then((childrens: T[]) => {\n          return childrens\n            .map((c) => {\n              return c.saveSyncOrThrow();\n            })\n            .every(Boolean);\n        });\n    };\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116msaveOrThrowStrategyFn\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    validate\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_currentScope\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildrens\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m childrens\n            \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mc\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m c\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msaveSyncOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          24,
          39
        ]
      },
      "destroyStrategyFn": {
        "text": "static destroyStrategyFn<T extends ActiveRecord$Base>(\n    relationName: string,\n    opts: HasManyOptions<T>\n  ): (self: T) => Promise<T[] | boolean | number> {\n    return (self: T): Promise<T[] | boolean | number> => {\n      return self[relationName]()\n        .toA()\n        .then((records: T[]) => {\n          if (opts.dependent === DependentList.destroy) {\n            return records.map((r) => r.destroySync());\n          } else if (opts.dependent === DependentList.nullify) {\n            return records.map((r) => {\n              r.update({ [opts.foreignKey]: undefined });\n              return r;\n            });\n          } else if (opts.dependent === DependentList.deleteAll) {\n            const recordIds = records.map((r) => r.id);\n            const hasManyKlass = opts.klass;\n            // @ts-expect-error\n            hasManyKlass.delete(recordIds);\n          } else if (opts.dependent === DependentList.restrictWithException) {\n            if (records.length > 0) {\n              throw errObj({\n                code: ErrCodes.DELETE_RESTRICTION_ERROR,\n                params: {\n                  associatedResource: opts.klass.name,\n                },\n              });\n            }\n          } else if (opts.dependent === DependentList.restrictWithError) {\n            if (records.length > 0) {\n              if (!self.errors[AssociationList.hasMany]) self.errors[AssociationList.hasMany] = {};\n              self.errors[AssociationList.hasMany][relationName] = [\n                errObj({\n                  code: ErrCodes.DELETE_RESTRICTION_ERROR,\n                  params: {\n                    associatedResource: opts.klass.name,\n                  },\n                }),\n              ];\n              return false;\n            }\n          } else {\n            throw errObj({\n              code: ErrCodes.FOREIGN_KEY_CONSTRAIT_FAILS,\n              params: {\n                resource: self.constructor.name,\n                foreignKey: opts.foreignKey,\n              },\n            });\n          }\n        });\n    };\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyStrategyFn\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m HasManyOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mdestroy\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroySync\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mnullify\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              r\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m r\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mdeleteAll\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m recordIds \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m.\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m hasManyKlass \u001b[38;2;248;248;242m=\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n            hasManyKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mdelete\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordIds\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mrestrictWithException\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n                code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mDELETE_RESTRICTION_ERROR\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                  associatedResource\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mdependent \u001b[38;2;248;248;242m===\u001b[39m DependentList\u001b[38;2;248;248;242m.\u001b[39mrestrictWithError\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mAssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mAssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n              self\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mAssociationList\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n                \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n                  code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mDELETE_RESTRICTION_ERROR\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                  params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                    associatedResource\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                  \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n              code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mFOREIGN_KEY_CONSTRAIT_FAILS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                resource\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                foreignKey\u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mforeignKey\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          41,
          94
        ]
      }
    }
  },
  "ActiveRecord$FinderMethods": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/relations/modules/finder_methods/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$FinderMethods extends RueModule {\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-exists-3F\n   * @todo After where corresponds to the array argument, also correspond to the array argument\n   */\n  isExists<T extends ActiveRecord$Base, U>(condition?: t.ExistsCondition<U>): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n\n    return _this.scoping<boolean>((holder) => {\n      const records = holder.scope;\n\n      if (!condition) {\n        return records.length > 0;\n      } else if (Array.isArray(condition)) {\n        throw 'Do not suppport because where does not correspond to an array argument';\n      } else if (typeof condition === 'object' && condition != null) {\n        return _this.where<U>(condition as Partial<U>).scoping((holder) => {\n          return holder.scope.length > 0;\n        });\n      } else {\n        const id = Number(condition) as at.Associations$PrimaryKey;\n        return _this.find<U>(id).then((record) => !!record);\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find\n   */\n  find<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    ...ids: at.Associations$PrimaryKey[]\n  ): Promise<T | T[]> {\n    if (ids.length === 0) {\n      return Promise.reject(\n        errObj({\n          code: ErrCodes.RECORD_NOT_FOUND,\n          // @ts-expect-error\n          message: `Could'nt find '${this.recordKlass.name}' without an 'id'`,\n        })\n      );\n    } else {\n      // @ts-expect-error\n      return (this as ActiveRecord$Relation)\n        .where<T, U>({ id: ids })\n        .scoping((holder) => {\n          if (holder.scope.length === 0) {\n            if (ids.length === 1) {\n              throw errObj({\n                code: ErrCodes.RECORD_NOT_FOUND,\n                params: {\n                  // @ts-expect-error\n                  resource: this.recordKlass.name,\n                  id: ids[0],\n                },\n              });\n            } else {\n              throw errObj({\n                code: ErrCodes.RECORD_NOT_FOUND,\n                // @ts-expect-error\n                message: `Could't find all '${this.recordKlass.name}' with 'id': [${ids}] (found 0 results, but was looking for ${ids.length})`,\n              });\n            }\n          } else if (holder.scope.length === 1) {\n            return holder.scope[0];\n          } else {\n            return holder.scope;\n          }\n        });\n    }\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by\n   */\n  findBy<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    return (this as ActiveRecord$Relation<T>).where<T, U>(params).take<T>();\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by-21\n   */\n  findByOrThrow<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    return (this as ActiveRecord$Relation<T>).where<T, U>(params).takeOrThrow<T>();\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-first\n   */\n  first<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    return this.take<T>(limit);\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-first-21\n   */\n  firstOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    return this.takeOrThrow(limit);\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-include-3F\n   */\n  isInclude<T extends ActiveRecord$Base>(record: T | T[] | Promise<T | T[]>): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    return _this.scoping<boolean>((holder) => {\n      const allRecordIds = holder.scope.map((r) => r['id']);\n      if (record instanceof Promise) {\n        return record.then((recordVal) => {\n          if (recordVal && !Array.isArray(recordVal)) {\n            return allRecordIds.includes(recordVal['id']);\n          } else {\n            /**\n             * @description Same specifications as rails\n             */\n            return false;\n          }\n        });\n      } else {\n        if (record && !Array.isArray(record)) {\n          return allRecordIds.includes(record['id']);\n        } else {\n          /**\n           * @description Same specifications as rails\n           */\n          return false;\n        }\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-member-3F\n   * @alias isInclude\n   */\n  isMember<T extends ActiveRecord$Base>(record: T): Promise<boolean> {\n    return this.isInclude(record);\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-last\n   */\n  last<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    const { RUE_RECORD_ID } = ActiveRecord$Base;\n    if (!limit) limit = 1;\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    return _this.scoping((holder) => {\n      const records = holder.scope;\n      if (records.length === 0) {\n        return null;\n      } else {\n        const slicedRecords = records\n          .sort((a, b) => b[RUE_RECORD_ID] - a[RUE_RECORD_ID])\n          .slice(0, limit)\n          .reverse();\n\n        if (limit === 1) return slicedRecords[0];\n        return slicedRecords;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-last-21\n   */\n  lastOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    return this.last<T>(limit).then((record) => {\n      if (record === null) {\n        throw errObj({\n          code: ErrCodes.RECORD_NOT_FOUND,\n          // @ts-expect-error\n          message: `Couldn't find '${this.recordKlass.name}'`,\n        });\n      } else {\n        return record;\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-take\n   */\n  take<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    if (!limit) limit = 1;\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n\n    return _this.scoping((holder) => {\n      if (holder.scope.length === 0) {\n        return null;\n      } else if (limit === 1) {\n        return holder.scope[0];\n      } else {\n        return holder.scope.slice(0, limit);\n      }\n    });\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-take-21\n   */\n  takeOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    return this.take<T>(limit).then((record) => {\n      if (record === null) {\n        throw errObj({\n          code: ErrCodes.RECORD_NOT_FOUND,\n          // @ts-expect-error\n          message: `Couldn't find '${this.recordKlass.name}'`,\n        });\n      } else {\n        return record;\n      }\n    });\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$FinderMethods\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-exists-3F\u001b[39m\n\u001b[38;2;130;146;162m   * @todo After where corresponds to the array argument, also correspond to the array argument\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misExists\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mExistsCondition\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mcondition\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m'Do not suppport because where does not correspond to an array argument'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m condition \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m condition \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition \u001b[38;2;102;217;239mas\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m id \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mNumber\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould'nt find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' without an 'id'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m ids \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n                code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n                  resource\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                  id\u001b[38;2;248;248;242m:\u001b[39m ids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n                code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n                message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould't find all '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' with 'id': [\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m] (found 0 results, but was looking for \u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mfindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-first\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-first-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mfirstOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-include-3F\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misInclude\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allRecordIds \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordVal \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m allRecordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m             * @description Same specifications as rails\u001b[39m\n\u001b[38;2;130;146;162m             */\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m allRecordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m           * @description Same specifications as rails\u001b[39m\n\u001b[38;2;130;146;162m           */\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-member-3F\u001b[39m\n\u001b[38;2;130;146;162m   * @alias isInclude\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116misMember\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misInclude\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-last\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m limit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m slicedRecords \u001b[38;2;248;248;242m=\u001b[39m records\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m,\u001b[39m b\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m-\u001b[39m a\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limit\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreverse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-last-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mlastOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCouldn't find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-take\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m limit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-take-21\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCouldn't find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          14,
          232
        ]
      }
    ],
    "instance": {
      "isExists": {
        "text": "isExists<T extends ActiveRecord$Base, U>(condition?: t.ExistsCondition<U>): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n\n    return _this.scoping<boolean>((holder) => {\n      const records = holder.scope;\n\n      if (!condition) {\n        return records.length > 0;\n      } else if (Array.isArray(condition)) {\n        throw 'Do not suppport because where does not correspond to an array argument';\n      } else if (typeof condition === 'object' && condition != null) {\n        return _this.where<U>(condition as Partial<U>).scoping((holder) => {\n          return holder.scope.length > 0;\n        });\n      } else {\n        const id = Number(condition) as at.Associations$PrimaryKey;\n        return _this.find<U>(id).then((record) => !!record);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misExists\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mExistsCondition\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mcondition\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m'Do not suppport because where does not correspond to an array argument'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m condition \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m condition \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition \u001b[38;2;102;217;239mas\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m id \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mNumber\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcondition\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mid\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          19,
          39
        ]
      },
      "find": {
        "text": "find<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    ...ids: at.Associations$PrimaryKey[]\n  ): Promise<T | T[]> {\n    if (ids.length === 0) {\n      return Promise.reject(\n        errObj({\n          code: ErrCodes.RECORD_NOT_FOUND,\n          // @ts-expect-error\n          message: `Could'nt find '${this.recordKlass.name}' without an 'id'`,\n        })\n      );\n    } else {\n      // @ts-expect-error\n      return (this as ActiveRecord$Relation)\n        .where<T, U>({ id: ids })\n        .scoping((holder) => {\n          if (holder.scope.length === 0) {\n            if (ids.length === 1) {\n              throw errObj({\n                code: ErrCodes.RECORD_NOT_FOUND,\n                params: {\n                  // @ts-expect-error\n                  resource: this.recordKlass.name,\n                  id: ids[0],\n                },\n              });\n            } else {\n              throw errObj({\n                code: ErrCodes.RECORD_NOT_FOUND,\n                // @ts-expect-error\n                message: `Could't find all '${this.recordKlass.name}' with 'id': [${ids}] (found 0 results, but was looking for ${ids.length})`,\n              });\n            }\n          } else if (holder.scope.length === 1) {\n            return holder.scope[0];\n          } else {\n            return holder.scope;\n          }\n        });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfind\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mids\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould'nt find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' without an 'id'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m id\u001b[38;2;248;248;242m:\u001b[39m ids \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n                code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n                  \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n                  resource\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n                  id\u001b[38;2;248;248;242m:\u001b[39m ids\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n                code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n                message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould't find all '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m' with 'id': [\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m] (found 0 results, but was looking for \u001b[39m\u001b[38;2;248;248;242m${\u001b[39mids\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          44,
          84
        ]
      },
      "findBy": {
        "text": "findBy<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    return (this as ActiveRecord$Relation<T>).where<T, U>(params).take<T>();\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          89,
          92
        ]
      },
      "findByOrThrow": {
        "text": "findByOrThrow<T extends ActiveRecord$Base, U>(params: Partial<U>): Promise<T> {\n    // @ts-expect-error\n    return (this as ActiveRecord$Relation<T>).where<T, U>(params).takeOrThrow<T>();\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          97,
          100
        ]
      },
      "first": {
        "text": "first<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    return this.take<T>(limit);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfirst\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          105,
          107
        ]
      },
      "firstOrThrow": {
        "text": "firstOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    return this.takeOrThrow(limit);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfirstOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          112,
          114
        ]
      },
      "isInclude": {
        "text": "isInclude<T extends ActiveRecord$Base>(record: T | T[] | Promise<T | T[]>): Promise<boolean> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    return _this.scoping<boolean>((holder) => {\n      const allRecordIds = holder.scope.map((r) => r['id']);\n      if (record instanceof Promise) {\n        return record.then((recordVal) => {\n          if (recordVal && !Array.isArray(recordVal)) {\n            return allRecordIds.includes(recordVal['id']);\n          } else {\n            /**\n             * @description Same specifications as rails\n             */\n            return false;\n          }\n        });\n      } else {\n        if (record && !Array.isArray(record)) {\n          return allRecordIds.includes(record['id']);\n        } else {\n          /**\n           * @description Same specifications as rails\n           */\n          return false;\n        }\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116misInclude\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m allRecordIds \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m r\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecordVal \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m allRecordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordVal\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m             * @description Same specifications as rails\u001b[39m\n\u001b[38;2;130;146;162m             */\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m allRecordIds\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m           * @description Same specifications as rails\u001b[39m\n\u001b[38;2;130;146;162m           */\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          119,
          146
        ]
      },
      "isMember": {
        "text": "isMember<T extends ActiveRecord$Base>(record: T): Promise<boolean> {\n    return this.isInclude(record);\n  }",
        "highlightText": "\u001b[38;2;230;219;116misMember\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misInclude\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          152,
          154
        ]
      },
      "last": {
        "text": "last<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    const { RUE_RECORD_ID } = ActiveRecord$Base;\n    if (!limit) limit = 1;\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    return _this.scoping((holder) => {\n      const records = holder.scope;\n      if (records.length === 0) {\n        return null;\n      } else {\n        const slicedRecords = records\n          .sort((a, b) => b[RUE_RECORD_ID] - a[RUE_RECORD_ID])\n          .slice(0, limit)\n          .reverse();\n\n        if (limit === 1) return slicedRecords[0];\n        return slicedRecords;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m limit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m slicedRecords \u001b[38;2;248;248;242m=\u001b[39m records\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m,\u001b[39m b\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m-\u001b[39m a\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limit\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreverse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m slicedRecords\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          159,
          178
        ]
      },
      "lastOrThrow": {
        "text": "lastOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    return this.last<T>(limit).then((record) => {\n      if (record === null) {\n        throw errObj({\n          code: ErrCodes.RECORD_NOT_FOUND,\n          // @ts-expect-error\n          message: `Couldn't find '${this.recordKlass.name}'`,\n        });\n      } else {\n        return record;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mlastOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlast\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCouldn't find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          183,
          195
        ]
      },
      "take": {
        "text": "take<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    if (!limit) limit = 1;\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n\n    return _this.scoping((holder) => {\n      if (holder.scope.length === 0) {\n        return null;\n      } else if (limit === 1) {\n        return holder.scope[0];\n      } else {\n        return holder.scope.slice(0, limit);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m limit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mscoping\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mlimit \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          200,
          214
        ]
      },
      "takeOrThrow": {
        "text": "takeOrThrow<T extends ActiveRecord$Base>(limit?: number): Promise<T | T[]> {\n    return this.take<T>(limit).then((record) => {\n      if (record === null) {\n        throw errObj({\n          code: ErrCodes.RECORD_NOT_FOUND,\n          // @ts-expect-error\n          message: `Couldn't find '${this.recordKlass.name}'`,\n        });\n      } else {\n        return record;\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtakeOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtake\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimit\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_NOT_FOUND\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCouldn't find '\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m'\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          219,
          231
        ]
      }
    }
  },
  "ActiveRecord$QueryMethods": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/relations/modules/query_methods/core.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$QueryMethods extends RueModule {\n  static SCOPE_METHODS = ['where', 'order', 'offset', 'limit', 'group'];\n\n  /**\n   * Records cannot be created correctly without lazy evaluation\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-where\n   */\n  where<T extends ActiveRecord$Base, U>(params: Partial<U>): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      Object.assign(holder.scopeParams['where'], params || {});\n    });\n\n    return _this;\n  }\n\n  /**\n   * Records cannot be created correctly without lazy evaluation\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-rewhere\n   */\n  rewhere<T extends ActiveRecord$Base, U>(params: Partial<U>): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      holder.scopeParams['where'] = params || {};\n    });\n\n    return _this;\n  }\n\n  /**\n   * Records cannot be created correctly without lazy evaluation\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-order\n   */\n  order<T extends ActiveRecord$Base, U = { [key: string]: t.Directions }>(\n    params: Partial<U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      Object.assign(holder.scopeParams['order'], params || {});\n    });\n\n    return _this;\n  }\n\n  /**\n   * Records cannot be created correctly without lazy evaluation\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-reorder\n   */\n  reorder<T extends ActiveRecord$Base, U = { [key: string]: t.Directions }>(\n    params: Partial<U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      // @ts-expect-error\n      holder.scopeParams['order'] = params || {};\n    });\n\n    return _this;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-reverse_order\n   */\n  reverseOrder<T extends ActiveRecord$Base>(): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      const orderParams = holder.scopeParams['order'];\n      if (isPresent(orderParams)) {\n        Object.keys(orderParams).forEach((propName) => {\n          const direction = orderParams[propName];\n          if (['desc', 'DESC'].includes(direction)) {\n            holder.scopeParams['order'][propName] = 'asc';\n          } else if (['asc', 'ASC'].includes(direction)) {\n            holder.scopeParams['order'][propName] = 'desc';\n          }\n        });\n      } else {\n        holder.scopeParams['order']['id'] = 'asc';\n      }\n    });\n\n    return _this;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-offset\n   */\n  offset<T extends ActiveRecord$Base>(value: number): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      holder.scopeParams['offset'] = value;\n    });\n\n    return _this;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-limit\n   */\n  limit<T extends ActiveRecord$Base>(value: number): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      holder.scopeParams['limit'] = value;\n    });\n\n    return _this;\n  }\n\n  /**\n   * @description Behavior is different from rails group\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-group\n   */\n  group<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    ...props: Array<keyof U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      // @ts-expect-error\n      holder.scopeParams['group'] = props;\n    });\n\n    return _this;\n  }\n\n  /**\n   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-unscope\n   */\n  unscope<T extends ActiveRecord$Base>(\n    ...scopeMethods: t.ScopeMethods[]\n  ): ActiveRecord$Relation<T> {\n    const { SCOPE_METHODS } = ActiveRecord$QueryMethods;\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      if (scopeMethods.length === 0) {\n        const err = errObj({\n          code: ErrCodes.ARGUMENT_IS_INVALID,\n          message: `'unscope()' must contain arguments.`,\n        });\n        holder.errors.push(err);\n      } else if (isSuperset(SCOPE_METHODS, scopeMethods)) {\n        scopeMethods.forEach((scopeMethod) => {\n          // @ts-expect-error\n          if (holder._defaultScopeParams[scopeMethod]) {\n            holder.scopeParams[scopeMethod] = Object.assign(\n              {},\n              // @ts-expect-error\n              JSON.parse(JSON.stringify(holder._defaultScopeParams[scopeMethod]))\n            );\n          } else {\n            holder.scopeParams[scopeMethod] = undefined;\n          }\n        });\n      } else {\n        const err = errObj({\n          code: ErrCodes.ARGUMENT_IS_INVALID,\n          message: `Called 'unscope()' with invalid unscoping argument '[${scopeMethods}]'. Valid arguments are '[${SCOPE_METHODS}]'.`,\n        });\n        holder.errors.push(err);\n      }\n    });\n\n    return _this;\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'where'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'offset'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'limit'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'group'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * Records cannot be created correctly without lazy evaluation\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-where\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'where'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * Records cannot be created correctly without lazy evaluation\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-rewhere\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'where'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * Records cannot be created correctly without lazy evaluation\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-order\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mDirections \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * Records cannot be created correctly without lazy evaluation\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-reorder\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mreorder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mDirections \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-reverse_order\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mreverseOrder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m orderParams \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m direction \u001b[38;2;248;248;242m=\u001b[39m orderParams\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-offset\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'offset'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-limit\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'limit'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @description Behavior is different from rails group\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-group\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'group'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m props\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m   * @see https://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-unscope\u001b[39m\n\u001b[38;2;130;146;162m   */\u001b[39m\n  \u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeMethods\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$QueryMethods\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscopeMethods\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mARGUMENT_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m'unscope()' must contain arguments.\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misSuperset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m scopeMethods\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        scopeMethods\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscopeMethod\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n              \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n              \u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mparse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mARGUMENT_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCalled 'unscope()' with invalid unscoping argument '[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mscopeMethods\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]'. Valid arguments are '[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]'.\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          13,
          194
        ]
      }
    ],
    "instance": {
      "where": {
        "text": "where<T extends ActiveRecord$Base, U>(params: Partial<U>): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      Object.assign(holder.scopeParams['where'], params || {});\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'where'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          20,
          29
        ]
      },
      "rewhere": {
        "text": "rewhere<T extends ActiveRecord$Base, U>(params: Partial<U>): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      holder.scopeParams['where'] = params || {};\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'where'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          35,
          44
        ]
      },
      "order": {
        "text": "order<T extends ActiveRecord$Base, U = { [key: string]: t.Directions }>(\n    params: Partial<U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      Object.assign(holder.scopeParams['order'], params || {});\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mDirections \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          50,
          61
        ]
      },
      "reorder": {
        "text": "reorder<T extends ActiveRecord$Base, U = { [key: string]: t.Directions }>(\n    params: Partial<U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      // @ts-expect-error\n      holder.scopeParams['order'] = params || {};\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mreorder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mDirections \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          67,
          79
        ]
      },
      "reverseOrder": {
        "text": "reverseOrder<T extends ActiveRecord$Base>(): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      const orderParams = holder.scopeParams['order'];\n      if (isPresent(orderParams)) {\n        Object.keys(orderParams).forEach((propName) => {\n          const direction = orderParams[propName];\n          if (['desc', 'DESC'].includes(direction)) {\n            holder.scopeParams['order'][propName] = 'asc';\n          } else if (['asc', 'ASC'].includes(direction)) {\n            holder.scopeParams['order'][propName] = 'desc';\n          }\n        });\n      } else {\n        holder.scopeParams['order']['id'] = 'asc';\n      }\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mreverseOrder\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m orderParams \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m direction \u001b[38;2;248;248;242m=\u001b[39m orderParams\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'order'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'id'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          84,
          105
        ]
      },
      "offset": {
        "text": "offset<T extends ActiveRecord$Base>(value: number): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      holder.scopeParams['offset'] = value;\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'offset'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          110,
          119
        ]
      },
      "limit": {
        "text": "limit<T extends ActiveRecord$Base>(value: number): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      holder.scopeParams['limit'] = value;\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mvalue\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'limit'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m value\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          124,
          133
        ]
      },
      "group": {
        "text": "group<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    ...props: Array<keyof U>\n  ): ActiveRecord$Relation<T> {\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      // @ts-expect-error\n      holder.scopeParams['group'] = props;\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mprops\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;102;217;239mkeyof\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n      holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'group'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m props\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          139,
          151
        ]
      },
      "unscope": {
        "text": "unscope<T extends ActiveRecord$Base>(\n    ...scopeMethods: t.ScopeMethods[]\n  ): ActiveRecord$Relation<T> {\n    const { SCOPE_METHODS } = ActiveRecord$QueryMethods;\n    // @ts-expect-error\n    const _this = this as ActiveRecord$Relation<T>;\n    // @ts-expect-error\n    _this.superThen(({ holder }) => {\n      if (scopeMethods.length === 0) {\n        const err = errObj({\n          code: ErrCodes.ARGUMENT_IS_INVALID,\n          message: `'unscope()' must contain arguments.`,\n        });\n        holder.errors.push(err);\n      } else if (isSuperset(SCOPE_METHODS, scopeMethods)) {\n        scopeMethods.forEach((scopeMethod) => {\n          // @ts-expect-error\n          if (holder._defaultScopeParams[scopeMethod]) {\n            holder.scopeParams[scopeMethod] = Object.assign(\n              {},\n              // @ts-expect-error\n              JSON.parse(JSON.stringify(holder._defaultScopeParams[scopeMethod]))\n            );\n          } else {\n            holder.scopeParams[scopeMethod] = undefined;\n          }\n        });\n      } else {\n        const err = errObj({\n          code: ErrCodes.ARGUMENT_IS_INVALID,\n          message: `Called 'unscope()' with invalid unscoping argument '[${scopeMethods}]'. Valid arguments are '[${SCOPE_METHODS}]'.`,\n        });\n        holder.errors.push(err);\n      }\n    });\n\n    return _this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116munscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    \u001b[38;2;248;248;242m...\u001b[39mscopeMethods\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeMethods\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$QueryMethods\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n    _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msuperThen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m holder \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mscopeMethods\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mARGUMENT_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m'unscope()' must contain arguments.\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116misSuperset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m scopeMethods\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        scopeMethods\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscopeMethod\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n              \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n              \u001b[38;2;130;146;162m// @ts-expect-error\u001b[39m\n              \u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mparse\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39m_defaultScopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m[\u001b[39mscopeMethod\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n          code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mARGUMENT_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCalled 'unscope()' with invalid unscoping argument '[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mscopeMethods\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]'. Valid arguments are '[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mSCOPE_METHODS\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]'.\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        holder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          156,
          193
        ]
      }
    }
  },
  "ActiveRecord$QueryMethods$Evaluator": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/relations/modules/query_methods/evaluator.ts",
      "updatedAt": "2021/03/20 17:30:11 +09:00"
    },
    "class": [
      {
        "text": "export class ActiveRecord$QueryMethods$Evaluator<T extends ActiveRecord$Base, U> {\n  private holder: ActiveRecord$Relation$Holder<T>;\n  private scopeParams: t.ScopeParams<U>;\n\n  constructor(holder: ActiveRecord$Relation$Holder<T>, scopeParams: t.ScopeParams<U>) {\n    this.holder = holder;\n    this.scopeParams = scopeParams;\n  }\n\n  static all<U extends ActiveRecord$Base>(holder: ActiveRecord$Relation$Holder<U>) {\n    const scopeParams = holder.scopeParams;\n    const instance = new this(holder, scopeParams);\n    instance.all();\n  }\n\n  all() {\n    this.where()\n      .order()\n      .offset()\n      .limit()\n      /**\n       * From here onward, processing of the acquired data\n       */\n      .group();\n  }\n\n  where(): this {\n    const whereParams = this.scopeParams.where;\n    if (!isPresent(whereParams)) return this;\n\n    const records = this.holder.scope;\n    const result = records.reduce((acc: Array<T>, record: T) => {\n      const isMatch = Object.keys(whereParams)\n        .map((key: string) => {\n          const val = whereParams[key];\n          if (Array.isArray(val)) {\n            return val.includes(record[key]);\n          } else {\n            return (record as any)[key] === val;\n          }\n        })\n        .every(Boolean);\n      if (isMatch) acc.push(record);\n      return acc;\n    }, [] as Array<T>);\n    this.holder.scope = result;\n\n    // initialize\n    this.holder.scopeParams.where = {};\n\n    return this;\n  }\n\n  order(): this {\n    const orderParams = this.scopeParams.order;\n    if (!isPresent(orderParams)) return this;\n\n    const records = this.holder.scope;\n    Object.keys(orderParams).forEach((propName) => {\n      const direction = orderParams[propName];\n      records.sort((a: T, b: T) => {\n        if (['asc', 'ASC'].includes(direction)) {\n          if (a[propName] < b[propName]) {\n            return -1;\n          } else if (a[propName] > b[propName]) {\n            return 1;\n          } else {\n            return 0;\n          }\n        } else if (['desc', 'DESC'].includes(direction)) {\n          if (a[propName] < b[propName]) {\n            return 1;\n          } else if (a[propName] > b[propName]) {\n            return -1;\n          } else {\n            return 0;\n          }\n        } else {\n          const err = errObj({\n            code: ErrCodes.DIRECTION_IS_INVALID,\n            params: {\n              direction,\n              directionList: ['asc', 'desc', 'ASC', 'DESC'],\n            },\n          });\n          this.holder.errors.push(err);\n        }\n      });\n    });\n    this.holder.scope = records;\n\n    // initialize\n    this.holder.scopeParams.order = {};\n\n    return this;\n  }\n\n  offset(): this {\n    const offsetValue = this.scopeParams.offset;\n    if (!isPresent(offsetValue)) return this;\n\n    const records = this.holder.scope;\n    this.holder.scope = records.slice(offsetValue, records.length);\n\n    // initialize\n    this.holder.scopeParams.offset = undefined;\n\n    return this;\n  }\n\n  limit(): this {\n    const limitValue = this.scopeParams.limit;\n    if (!isPresent(limitValue)) return this;\n\n    const records = this.holder.scope;\n    this.holder.scope = records.slice(0, limitValue);\n\n    // initialize\n    this.holder.scopeParams.limit = undefined;\n\n    return this;\n  }\n\n  group(): this {\n    const groupParams = this.scopeParams.group;\n    if (!isPresent(groupParams)) return this;\n\n    const records = this.holder.scope;\n    let foundPairs = [];\n    const groupedRecords = records.reduce((acc, record) => {\n      const pairs = groupParams.reduce((propAcc, propName) => {\n        propAcc.push(record[propName]);\n        return propAcc;\n      }, []);\n\n      if (foundPairs.includes(`${pairs}`)) {\n        acc[`[${pairs}]`].push(record);\n      } else {\n        foundPairs.push(`${pairs}`);\n        acc[`[${pairs}]`] = [record];\n      }\n      return acc;\n    }, {} as any);\n    this.holder.groupedRecords = groupedRecords;\n\n    // initialize\n    this.holder.scopeParams.group = [];\n\n    return this;\n  }\n\n  isGroupedRecords(): boolean {\n    return isPresent(this.holder.groupedRecords) && isPresent(this.scopeParams.group);\n  }\n}",
        "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$Evaluator\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m holder\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m scopeParams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeParams\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m scopeParams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeParams\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams \u001b[38;2;248;248;242m=\u001b[39m scopeParams\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m scopeParams \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m instance \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m,\u001b[39m scopeParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    instance\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * From here onward, processing of the acquired data\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mwhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m isMatch \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mwhereParams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m val \u001b[38;2;248;248;242m=\u001b[39m whereParams\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m val\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misMatch\u001b[38;2;248;248;242m)\u001b[39m acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m orderParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m direction \u001b[38;2;248;248;242m=\u001b[39m orderParams\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m b\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m-\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m>\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m>\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m-\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n            code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mDIRECTION_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              direction\u001b[38;2;248;248;242m,\u001b[39m\n              directionList\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m offsetValue \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39moffset\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moffsetValue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moffsetValue\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39moffset \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m limitValue \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mlimit\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimitValue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limitValue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mlimit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m groupParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mgroup\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mgroupParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m foundPairs \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m groupedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m pairs \u001b[38;2;248;248;242m=\u001b[39m groupParams\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropAcc\u001b[38;2;248;248;242m,\u001b[39m propName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        propAcc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m propAcc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfoundPairs\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpairs\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        acc\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpairs\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        foundPairs\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpairs\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        acc\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpairs\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mrecord\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords \u001b[38;2;248;248;242m=\u001b[39m groupedRecords\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mgroup \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116misGroupedRecords\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mgroup\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
        "line": [
          9,
          163
        ]
      }
    ],
    "static": {
      "all": {
        "text": "static all<U extends ActiveRecord$Base>(holder: ActiveRecord$Relation$Holder<U>) {\n    const scopeParams = holder.scopeParams;\n    const instance = new this(holder, scopeParams);\n    instance.all();\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m scopeParams \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m instance \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m,\u001b[39m scopeParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    instance\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          18,
          22
        ]
      }
    },
    "instance": {
      "all": {
        "text": "all() {\n    this.where()\n      .order()\n      .offset()\n      .limit()\n      /**\n       * From here onward, processing of the acquired data\n       */\n      .group();\n  }",
        "highlightText": "\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;130;146;162m/**\u001b[39m\n\u001b[38;2;130;146;162m       * From here onward, processing of the acquired data\u001b[39m\n\u001b[38;2;130;146;162m       */\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          24,
          33
        ]
      },
      "where": {
        "text": "where(): this {\n    const whereParams = this.scopeParams.where;\n    if (!isPresent(whereParams)) return this;\n\n    const records = this.holder.scope;\n    const result = records.reduce((acc: Array<T>, record: T) => {\n      const isMatch = Object.keys(whereParams)\n        .map((key: string) => {\n          const val = whereParams[key];\n          if (Array.isArray(val)) {\n            return val.includes(record[key]);\n          } else {\n            return (record as any)[key] === val;\n          }\n        })\n        .every(Boolean);\n      if (isMatch) acc.push(record);\n      return acc;\n    }, [] as Array<T>);\n    this.holder.scope = result;\n\n    // initialize\n    this.holder.scopeParams.where = {};\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mwhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m isMatch \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mwhereParams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m val \u001b[38;2;248;248;242m=\u001b[39m whereParams\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m val\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misMatch\u001b[38;2;248;248;242m)\u001b[39m acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mwhere \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          35,
          60
        ]
      },
      "order": {
        "text": "order(): this {\n    const orderParams = this.scopeParams.order;\n    if (!isPresent(orderParams)) return this;\n\n    const records = this.holder.scope;\n    Object.keys(orderParams).forEach((propName) => {\n      const direction = orderParams[propName];\n      records.sort((a: T, b: T) => {\n        if (['asc', 'ASC'].includes(direction)) {\n          if (a[propName] < b[propName]) {\n            return -1;\n          } else if (a[propName] > b[propName]) {\n            return 1;\n          } else {\n            return 0;\n          }\n        } else if (['desc', 'DESC'].includes(direction)) {\n          if (a[propName] < b[propName]) {\n            return 1;\n          } else if (a[propName] > b[propName]) {\n            return -1;\n          } else {\n            return 0;\n          }\n        } else {\n          const err = errObj({\n            code: ErrCodes.DIRECTION_IS_INVALID,\n            params: {\n              direction,\n              directionList: ['asc', 'desc', 'ASC', 'DESC'],\n            },\n          });\n          this.holder.errors.push(err);\n        }\n      });\n    });\n    this.holder.scope = records;\n\n    // initialize\n    this.holder.scopeParams.order = {};\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116morder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m orderParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39morderParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m direction \u001b[38;2;248;248;242m=\u001b[39m orderParams\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m b\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m-\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m>\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdirection\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39ma\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m>\u001b[39m b\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m-\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m err \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n            code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mDIRECTION_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              direction\u001b[38;2;248;248;242m,\u001b[39m\n              directionList\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'asc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'desc'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'ASC'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'DESC'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39morder \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          62,
          104
        ]
      },
      "offset": {
        "text": "offset(): this {\n    const offsetValue = this.scopeParams.offset;\n    if (!isPresent(offsetValue)) return this;\n\n    const records = this.holder.scope;\n    this.holder.scope = records.slice(offsetValue, records.length);\n\n    // initialize\n    this.holder.scopeParams.offset = undefined;\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116moffset\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m offsetValue \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39moffset\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moffsetValue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moffsetValue\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39moffset \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          106,
          117
        ]
      },
      "limit": {
        "text": "limit(): this {\n    const limitValue = this.scopeParams.limit;\n    if (!isPresent(limitValue)) return this;\n\n    const records = this.holder.scope;\n    this.holder.scope = records.slice(0, limitValue);\n\n    // initialize\n    this.holder.scopeParams.limit = undefined;\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mlimit\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m limitValue \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mlimit\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mlimitValue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m limitValue\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mlimit \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          119,
          130
        ]
      },
      "group": {
        "text": "group(): this {\n    const groupParams = this.scopeParams.group;\n    if (!isPresent(groupParams)) return this;\n\n    const records = this.holder.scope;\n    let foundPairs = [];\n    const groupedRecords = records.reduce((acc, record) => {\n      const pairs = groupParams.reduce((propAcc, propName) => {\n        propAcc.push(record[propName]);\n        return propAcc;\n      }, []);\n\n      if (foundPairs.includes(`${pairs}`)) {\n        acc[`[${pairs}]`].push(record);\n      } else {\n        foundPairs.push(`${pairs}`);\n        acc[`[${pairs}]`] = [record];\n      }\n      return acc;\n    }, {} as any);\n    this.holder.groupedRecords = groupedRecords;\n\n    // initialize\n    this.holder.scopeParams.group = [];\n\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mgroup\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m groupParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mgroup\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mgroupParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscope\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m foundPairs \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m groupedRecords \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m pairs \u001b[38;2;248;248;242m=\u001b[39m groupParams\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropAcc\u001b[38;2;248;248;242m,\u001b[39m propName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        propAcc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mpropName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m propAcc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfoundPairs\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpairs\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        acc\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpairs\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        foundPairs\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpairs\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        acc\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m[\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpairs\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m]\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mrecord\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords \u001b[38;2;248;248;242m=\u001b[39m groupedRecords\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// initialize\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mgroup \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          132,
          158
        ]
      },
      "isGroupedRecords": {
        "text": "isGroupedRecords(): boolean {\n    return isPresent(this.holder.groupedRecords) && isPresent(this.scopeParams.group);\n  }",
        "highlightText": "\u001b[38;2;230;219;116misGroupedRecords\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder\u001b[38;2;248;248;242m.\u001b[39mgroupedRecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;230;219;116misPresent\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams\u001b[38;2;248;248;242m.\u001b[39mgroup\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          160,
          162
        ]
      }
    },
    "$constructor": {
      "text": "constructor(holder: ActiveRecord$Relation$Holder<T>, scopeParams: t.ScopeParams<U>) {\n    this.holder = holder;\n    this.scopeParams = scopeParams;\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mholder\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation$Holder\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m scopeParams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeParams\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mholder \u001b[38;2;248;248;242m=\u001b[39m holder\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mscopeParams \u001b[38;2;248;248;242m=\u001b[39m scopeParams\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        13,
        16
      ]
    }
  }
}