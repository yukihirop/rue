{
  "ActiveRecord$Error": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/errors/base.ts",
      "updatedAt": "2021/03/02 20:51:16 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Error extends ActiveModel$Error {}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Error\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveModel$Error\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        12,
        12
      ]
    }
  },
  "ActiveRecord$Base": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/base.ts",
      "updatedAt": "2021/03/02 20:51:16 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Base extends ActiveRecord$Impl {\n  public errors: t.Validations$Errors;\n\n  constructor(data: t.Params = {}) {\n    super();\n\n    (this as any)[RECORD_ID] = undefined;\n\n    Object.keys(data).forEach((key) => {\n      (this as any)[key] = data[key];\n    });\n\n    ActiveRecord$Impl.defineAssociations(this);\n  }\n\n  // override\n  static objType(): t.ObjType {\n    return 'record';\n  }\n\n  protected static fetchAll<T = any>(): Promise<Array<T>> {\n    throw \"Please implement '[static] fetchAll' in Inherited Class\";\n  }\n\n  static resetCache() {\n    const klassName = this.name;\n    Cache.destroy(klassName);\n    Cache.create(klassName, RECORD_ALL, []);\n    Cache.create(klassName, RECORD_AUTO_INCREMENNT_ID, 1);\n  }\n\n  static all<T extends ActiveRecord$Base>(): Promise<Array<T>> {\n    const klassName = this.name;\n\n    if (Cache.read<T[]>(klassName, RECORD_ALL, 'array').length > 0) {\n      return Promise.resolve(Cache.read<T[]>(klassName, RECORD_ALL, 'array'));\n    } else {\n      return new Promise((resolve, reject) => {\n        this.fetchAll<T>()\n          .then((data) => {\n            const records = data.map((d) => {\n              const record = new this(d);\n\n              record.save();\n\n              return record;\n            }) as Array<T>;\n\n            return resolve(records);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    }\n  }\n\n  static where<T extends ActiveRecord$Base>(\n    params: ft.QueryMethods$WhereParams\n  ): ActiveRecord$QueryMethods$WhereChain {\n    const whereChain = new ActiveRecord$QueryMethods$WhereChain<T>(() => this.all<T>());\n    return whereChain.where<T>(params);\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mValidations$Errors\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    ActiveRecord$Impl\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// override\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'record'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement '[static] fetchAll' in Inherited Class\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mresetCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_AUTO_INCREMENNT_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mcatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m ft\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$WhereParams\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereChain \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m whereChain\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        14,
        77
      ]
    },
    "static": {
      "objType": {
        "text": "static objType(): t.ObjType {\n    return 'record';\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'record'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          30,
          32
        ]
      },
      "fetchAll": {
        "text": "protected static fetchAll<T = any>(): Promise<Array<T>> {\n    throw \"Please implement '[static] fetchAll' in Inherited Class\";\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement '[static] fetchAll' in Inherited Class\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          34,
          36
        ]
      },
      "resetCache": {
        "text": "static resetCache() {\n    const klassName = this.name;\n    Cache.destroy(klassName);\n    Cache.create(klassName, RECORD_ALL, []);\n    Cache.create(klassName, RECORD_AUTO_INCREMENNT_ID, 1);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mresetCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_AUTO_INCREMENNT_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          38,
          43
        ]
      },
      "all": {
        "text": "static all<T extends ActiveRecord$Base>(): Promise<Array<T>> {\n    const klassName = this.name;\n\n    if (Cache.read<T[]>(klassName, RECORD_ALL, 'array').length > 0) {\n      return Promise.resolve(Cache.read<T[]>(klassName, RECORD_ALL, 'array'));\n    } else {\n      return new Promise((resolve, reject) => {\n        this.fetchAll<T>()\n          .then((data) => {\n            const records = data.map((d) => {\n              const record = new this(d);\n\n              record.save();\n\n              return record;\n            }) as Array<T>;\n\n            return resolve(records);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mcatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          45,
          69
        ]
      },
      "where": {
        "text": "static where<T extends ActiveRecord$Base>(\n    params: ft.QueryMethods$WhereParams\n  ): ActiveRecord$QueryMethods$WhereChain {\n    const whereChain = new ActiveRecord$QueryMethods$WhereChain<T>(() => this.all<T>());\n    return whereChain.where<T>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m ft\u001b[38;2;248;248;242m.\u001b[39mQueryMethods$WhereParams\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereChain \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m whereChain\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          71,
          76
        ]
      }
    },
    "$constructor": {
      "text": "constructor(data: t.Params = {}) {\n    super();\n\n    (this as any)[RECORD_ID] = undefined;\n\n    Object.keys(data).forEach((key) => {\n      (this as any)[key] = data[key];\n    });\n\n    ActiveRecord$Impl.defineAssociations(this);\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    ActiveRecord$Impl\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        17,
        27
      ]
    }
  },
  "ActiveRecord$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/impl.ts",
      "updatedAt": "2021/03/02 20:51:17 +09:00"
    },
    "class": {
      "text": "interface ActiveRecord$Impl {\n  // ActiveRecord$Persistence\n  save(): boolean;\n  saveOrThrow(): void | boolean;\n  destroy(): ActiveRecord$Base;\n  // ActiveRecord$Associations\n  primaryKey: at.Associations$PrimaryKey;\n  hasAndBelongsToMany<T extends ActiveRecord$Associations = any>(\n    record: T\n  ): { [key: string]: at.Associations$ForeignKey };\n  releaseAndBelongsToMany<T extends ActiveRecord$Associations = any>(\n    record: T\n  ): { [key: string]: at.Associations$ForeignKey };\n}",
      "highlightText": "\u001b[38;2;102;217;239minterface\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Persistence\u001b[39m\n  \u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Associations\u001b[39m\n  primaryKey\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        60,
        73
      ]
    },
    "static": {
      "defineAssociations": {
        "text": "protected static defineAssociations<T extends ActiveRecord$Base>(self: T) {\n    ActiveRecord$Associations.defineAssociations(self);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    ActiveRecord$Associations\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          55,
          57
        ]
      }
    },
    "instance": {
      "save": {
        "text": "save(): boolean;",
        "highlightText": "\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          62,
          0
        ]
      },
      "saveOrThrow": {
        "text": "saveOrThrow(): void | boolean;",
        "highlightText": "\u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          63,
          0
        ]
      },
      "destroy": {
        "text": "destroy(): ActiveRecord$Base;",
        "highlightText": "\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          64,
          0
        ]
      },
      "hasAndBelongsToMany": {
        "text": "hasAndBelongsToMany<T extends ActiveRecord$Associations = any>(\n    record: T\n  ): { [key: string]: at.Associations$ForeignKey };",
        "highlightText": "\u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          67,
          69
        ]
      },
      "releaseAndBelongsToMany": {
        "text": "releaseAndBelongsToMany<T extends ActiveRecord$Associations = any>(\n    record: T\n  ): { [key: string]: at.Associations$ForeignKey };",
        "highlightText": "\u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          70,
          72
        ]
      }
    }
  },
  "ActiveRecord$Associations": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/core.ts",
      "updatedAt": "2021/03/02 20:51:17 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Associations extends RueModule {\n  public primaryKey: t.PrimaryKey;\n\n  static belongsTo<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: string\n  ) {\n    Registry.create(this.name, Association.belongsTo, {\n      [relationName]: (self: T) => (klass as any).findBy({ primaryKey: self[foreignKey] }),\n    });\n  }\n\n  static hasOne<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasOne, {\n      [relationName]: (self: T) => (klass as any).findBy({ [foreignKey]: self.primaryKey }),\n    });\n  }\n\n  static hasMany<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ [foreignKey]: self.primaryKey }).toPromiseArray(),\n    });\n  }\n\n  static hasAndBelongsToMany<T extends ActiveRecord$Base = any>(relationName, klass: Function) {\n    const foreignKeysFn = (self: T) => {\n      const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n        this.name,\n        klass.name,\n        'array'\n      );\n      return tables.reduce((acc, pair) => {\n        if (pair[0] == self.primaryKey) {\n          acc.push(pair[1]);\n        }\n        return acc;\n      }, []);\n    };\n\n    IntermediateTable.create(this.name, klass.name, []);\n    Registry.create(this.name, Association.hasAndBelongsToMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ primaryKey: foreignKeysFn(self) }).toPromiseArray(),\n    });\n  }\n\n  hasAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameLeft,\n      'array'\n    );\n\n    if (Array.isArray(tables)) {\n      IntermediateTable.create(klassNameLeft, klassNameRight, [\n        [this.primaryKey, record.primaryKey],\n      ]);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }\n\n  releaseAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const beforeIntermediateTable = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameRight\n    );\n\n    if (Array.isArray(beforeIntermediateTable)) {\n      let leavedData = [];\n      let deleteData = [];\n      beforeIntermediateTable.forEach((pair) => {\n        if (this.primaryKey == pair[0] && record.primaryKey == pair[1]) {\n          deleteData.push(pair);\n        } else {\n          leavedData.push(pair);\n        }\n      });\n      IntermediateTable.update(klassNameLeft, klassNameRight, leavedData);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }\n\n  static defineAssociations<T extends ActiveRecord$Base = any>(self: T) {\n    const allAssociations = Registry.data[self.constructor.name];\n    if (allAssociations == undefined) return;\n\n    Object.keys(allAssociations).forEach((associationName: string) => {\n      const relationData = allAssociations[associationName];\n\n      Object.keys(relationData).forEach((relationName: string) => {\n        const relationFn = relationData[relationName];\n\n        Object.defineProperty(self, relationName, {\n          enumerable: true,\n          configurable: false,\n          value: () => relationFn(self),\n        });\n      });\n    });\n  }\n\n  // ActiveRecord$Associations$CollectionProxy\n  static scope: <T extends ActiveRecord$Base>(\n    scopeName: string,\n    fn: mt.CollectionProxy$ScopeFn<T>\n  ) => void;\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPrimaryKey\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mbelongsTo\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mbelongsTo\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasOne\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'array'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m tables\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m pair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasAndBelongsToMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtables\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m beforeIntermediateTable \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameRight\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mbeforeIntermediateTable\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      beforeIntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allAssociations \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mallAssociations \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mallAssociations\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relationData \u001b[38;2;248;248;242m=\u001b[39m allAssociations\u001b[38;2;248;248;242m[\u001b[39massociationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m relationFn \u001b[38;2;248;248;242m=\u001b[39m relationData\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m,\u001b[39m relationName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          enumerable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          configurable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;230;219;116mvalue\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// ActiveRecord$Associations$CollectionProxy\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m scope\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    scopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    fn\u001b[38;2;248;248;242m:\u001b[39m mt\u001b[38;2;248;248;242m.\u001b[39mCollectionProxy$ScopeFn\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        25,
        167
      ]
    },
    "static": {
      "belongsTo": {
        "text": "static belongsTo<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: string\n  ) {\n    Registry.create(this.name, Association.belongsTo, {\n      [relationName]: (self: T) => (klass as any).findBy({ primaryKey: self[foreignKey] }),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mbelongsTo\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mbelongsTo\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          28,
          36
        ]
      },
      "hasOne": {
        "text": "static hasOne<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasOne, {\n      [relationName]: (self: T) => (klass as any).findBy({ [foreignKey]: self.primaryKey }),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasOne\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          38,
          46
        ]
      },
      "hasMany": {
        "text": "static hasMany<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ [foreignKey]: self.primaryKey }).toPromiseArray(),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          48,
          57
        ]
      },
      "hasAndBelongsToMany": {
        "text": "static hasAndBelongsToMany<T extends ActiveRecord$Base = any>(relationName, klass: Function) {\n    const foreignKeysFn = (self: T) => {\n      const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n        this.name,\n        klass.name,\n        'array'\n      );\n      return tables.reduce((acc, pair) => {\n        if (pair[0] == self.primaryKey) {\n          acc.push(pair[1]);\n        }\n        return acc;\n      }, []);\n    };\n\n    IntermediateTable.create(this.name, klass.name, []);\n    Registry.create(this.name, Association.hasAndBelongsToMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ primaryKey: foreignKeysFn(self) }).toPromiseArray(),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'array'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m tables\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m pair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasAndBelongsToMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          59,
          79
        ]
      },
      "defineAssociations": {
        "text": "static defineAssociations<T extends ActiveRecord$Base = any>(self: T) {\n    const allAssociations = Registry.data[self.constructor.name];\n    if (allAssociations == undefined) return;\n\n    Object.keys(allAssociations).forEach((associationName: string) => {\n      const relationData = allAssociations[associationName];\n\n      Object.keys(relationData).forEach((relationName: string) => {\n        const relationFn = relationData[relationName];\n\n        Object.defineProperty(self, relationName, {\n          enumerable: true,\n          configurable: false,\n          value: () => relationFn(self),\n        });\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allAssociations \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mallAssociations \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mallAssociations\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relationData \u001b[38;2;248;248;242m=\u001b[39m allAssociations\u001b[38;2;248;248;242m[\u001b[39massociationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m relationFn \u001b[38;2;248;248;242m=\u001b[39m relationData\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m,\u001b[39m relationName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          enumerable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          configurable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;230;219;116mvalue\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          143,
          160
        ]
      }
    },
    "instance": {
      "hasAndBelongsToMany": {
        "text": "hasAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameLeft,\n      'array'\n    );\n\n    if (Array.isArray(tables)) {\n      IntermediateTable.create(klassNameLeft, klassNameRight, [\n        [this.primaryKey, record.primaryKey],\n      ]);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtables\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          59,
          79
        ]
      },
      "releaseAndBelongsToMany": {
        "text": "releaseAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const beforeIntermediateTable = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameRight\n    );\n\n    if (Array.isArray(beforeIntermediateTable)) {\n      let leavedData = [];\n      let deleteData = [];\n      beforeIntermediateTable.forEach((pair) => {\n        if (this.primaryKey == pair[0] && record.primaryKey == pair[1]) {\n          deleteData.push(pair);\n        } else {\n          leavedData.push(pair);\n        }\n      });\n      IntermediateTable.update(klassNameLeft, klassNameRight, leavedData);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m beforeIntermediateTable \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameRight\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mbeforeIntermediateTable\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      beforeIntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          109,
          141
        ]
      }
    }
  },
  "ActiveRecord$FinderMethods": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/finder_methods/core.ts",
      "updatedAt": "2021/03/02 20:51:17 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$FinderMethods extends RueModule {\n  static findBy<T extends ActiveRecord$Base>(params: { [key: string]: any }): Promise<T> {\n    // @ts-ignore\n    return (this as typeof ActiveRecord$Base)\n      .where<T>(params)\n      .toPromiseArray()\n      .then((records) => {\n        if (records.length > 0) {\n          return Promise.resolve(records[0]);\n        } else {\n          return Promise.reject(undefined);\n        }\n      });\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$FinderMethods\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        8,
        22
      ]
    },
    "static": {
      "findBy": {
        "text": "static findBy<T extends ActiveRecord$Base>(params: { [key: string]: any }): Promise<T> {\n    // @ts-ignore\n    return (this as typeof ActiveRecord$Base)\n      .where<T>(params)\n      .toPromiseArray()\n      .then((records) => {\n        if (records.length > 0) {\n          return Promise.resolve(records[0]);\n        } else {\n          return Promise.reject(undefined);\n        }\n      });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          9,
          21
        ]
      }
    }
  },
  "ActiveRecord$Persistence": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/persistences/core.ts",
      "updatedAt": "2021/03/02 20:51:17 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Persistence extends RueModule {\n  static RECORD_AUTO_INCREMENNT_ID = '__rue_auto_increment_record_id__';\n  static RECORD_ID = '__rue_record_id__';\n  static RECORD_ALL = 'all';\n\n  static destroyAll<T extends ActiveRecord$Base>(filter?: (self: T) => boolean): Array<T> {\n    const klassName = this.name;\n    const allData = Cache.read<T[]>(klassName, ActiveRecord$Persistence.RECORD_ALL, 'array');\n\n    let leavedData = [];\n    let deleteData = [];\n    allData.forEach((record) => {\n      if (filter) {\n        if (filter(record)) {\n          deleteData.push(record);\n        } else {\n          leavedData.push(record);\n        }\n      } else {\n        deleteData.push(record);\n      }\n    });\n    Cache.update(klassName, ActiveRecord$Persistence.RECORD_ALL, leavedData);\n    return deleteData;\n  }\n\n  save(opts?: { validate: boolean }): boolean {\n    opts = opts == undefined ? { validate: true } : opts;\n    const _this = this as any;\n\n    if (!opts.validate || _this.isValid()) {\n      const klassName = this.constructor.name;\n      _ensureCache(klassName);\n\n      // auto increment start\n      let __record_aid__ = Cache.read<number>(\n        klassName,\n        ActiveRecord$Persistence.RECORD_AUTO_INCREMENNT_ID,\n        'value'\n      );\n      _this[ActiveRecord$Persistence.RECORD_ID] = __record_aid__;\n      __record_aid__ = __record_aid__ + 1;\n      Cache.update(klassName, ActiveRecord$Persistence.RECORD_AUTO_INCREMENNT_ID, __record_aid__);\n      // auto increment end\n      Cache.create(klassName, ActiveRecord$Persistence.RECORD_ALL, [this]);\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  saveOrThrow(): void | boolean {\n    const _this = this as any;\n    if (_this.isValid()) {\n      this.save({ validate: false });\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: _this.inspect(),\n        },\n      });\n    }\n  }\n\n  destroy(): ActiveRecord$Base {\n    const destroyThis = this as any;\n\n    // auto decrement start\n    const klassName = this.constructor.name;\n    const allData = Cache.read<ActiveRecord$Base[]>(\n      klassName,\n      ActiveRecord$Persistence.RECORD_ALL,\n      'array'\n    );\n    const filteredData = allData.filter(\n      (record) =>\n        record[ActiveRecord$Persistence.RECORD_ID] !=\n        destroyThis[ActiveRecord$Persistence.RECORD_ID]\n    );\n\n    _ensureCache(klassName);\n    Cache.update(klassName, ActiveRecord$Persistence.RECORD_ALL, filteredData);\n\n    return destroyThis as ActiveRecord$Base;\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Persistence\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mRECORD_AUTO_INCREMENNT_ID\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_auto_increment_record_id__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mRECORD_ID\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_record_id__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'all'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m deleteData\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m||\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;230;219;116m_ensureCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// auto increment start\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        klassName\u001b[38;2;248;248;242m,\u001b[39m\n        ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_AUTO_INCREMENNT_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'value'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m __record_aid__\u001b[38;2;248;248;242m;\u001b[39m\n      __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m __record_aid__ \u001b[38;2;248;248;242m+\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_AUTO_INCREMENNT_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m __record_aid__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// auto increment end\u001b[39m\n      Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m destroyThis \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// auto decrement start\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassName\u001b[38;2;248;248;242m,\u001b[39m\n      ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m!=\u001b[39m\n        destroyThis\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;230;219;116m_ensureCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m filteredData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m destroyThis \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        10,
        96
      ]
    },
    "static": {
      "destroyAll": {
        "text": "static destroyAll<T extends ActiveRecord$Base>(filter?: (self: T) => boolean): Array<T> {\n    const klassName = this.name;\n    const allData = Cache.read<T[]>(klassName, ActiveRecord$Persistence.RECORD_ALL, 'array');\n\n    let leavedData = [];\n    let deleteData = [];\n    allData.forEach((record) => {\n      if (filter) {\n        if (filter(record)) {\n          deleteData.push(record);\n        } else {\n          leavedData.push(record);\n        }\n      } else {\n        deleteData.push(record);\n      }\n    });\n    Cache.update(klassName, ActiveRecord$Persistence.RECORD_ALL, leavedData);\n    return deleteData;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m deleteData\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          15,
          34
        ]
      }
    },
    "instance": {
      "save": {
        "text": "save(opts?: { validate: boolean }): boolean {\n    opts = opts == undefined ? { validate: true } : opts;\n    const _this = this as any;\n\n    if (!opts.validate || _this.isValid()) {\n      const klassName = this.constructor.name;\n      _ensureCache(klassName);\n\n      // auto increment start\n      let __record_aid__ = Cache.read<number>(\n        klassName,\n        ActiveRecord$Persistence.RECORD_AUTO_INCREMENNT_ID,\n        'value'\n      );\n      _this[ActiveRecord$Persistence.RECORD_ID] = __record_aid__;\n      __record_aid__ = __record_aid__ + 1;\n      Cache.update(klassName, ActiveRecord$Persistence.RECORD_AUTO_INCREMENNT_ID, __record_aid__);\n      // auto increment end\n      Cache.create(klassName, ActiveRecord$Persistence.RECORD_ALL, [this]);\n      return true;\n    } else {\n      return false;\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m||\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;230;219;116m_ensureCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// auto increment start\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        klassName\u001b[38;2;248;248;242m,\u001b[39m\n        ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_AUTO_INCREMENNT_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'value'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m __record_aid__\u001b[38;2;248;248;242m;\u001b[39m\n      __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m __record_aid__ \u001b[38;2;248;248;242m+\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_AUTO_INCREMENNT_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m __record_aid__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// auto increment end\u001b[39m\n      Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          36,
          59
        ]
      },
      "saveOrThrow": {
        "text": "saveOrThrow(): void | boolean {\n    const _this = this as any;\n    if (_this.isValid()) {\n      this.save({ validate: false });\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: _this.inspect(),\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          61,
          73
        ]
      },
      "destroy": {
        "text": "destroy(): ActiveRecord$Base {\n    const destroyThis = this as any;\n\n    // auto decrement start\n    const klassName = this.constructor.name;\n    const allData = Cache.read<ActiveRecord$Base[]>(\n      klassName,\n      ActiveRecord$Persistence.RECORD_ALL,\n      'array'\n    );\n    const filteredData = allData.filter(\n      (record) =>\n        record[ActiveRecord$Persistence.RECORD_ID] !=\n        destroyThis[ActiveRecord$Persistence.RECORD_ID]\n    );\n\n    _ensureCache(klassName);\n    Cache.update(klassName, ActiveRecord$Persistence.RECORD_ALL, filteredData);\n\n    return destroyThis as ActiveRecord$Base;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m destroyThis \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// auto decrement start\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassName\u001b[38;2;248;248;242m,\u001b[39m\n      ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m!=\u001b[39m\n        destroyThis\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;230;219;116m_ensureCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Cache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m filteredData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m destroyThis \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          75,
          95
        ]
      }
    }
  },
  "ActiveRecord$QueryMethods$WhereChain": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/query_methods/where_chain/base.ts",
      "updatedAt": "2021/03/02 20:51:17 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$QueryMethods$WhereChain<T = any> {\n  private params: t.WhereParams;\n  private allPromiseFn: () => Promise<T[]>;\n\n  constructor(allPromiseFn: () => Promise<T[]>) {\n    this.params = {};\n    this.allPromiseFn = allPromiseFn;\n  }\n\n  // Give dummy generics(_U) to align method signatures\n  where<_U = any>(params: t.WhereParams): ActiveRecord$QueryMethods$WhereChain<T> {\n    Object.assign(this.params, params);\n    return this;\n  }\n\n  // Give dummy generics(_U) to align method signatures\n  rewhere<_U = any>(params: t.WhereParams): ActiveRecord$QueryMethods$WhereChain<T> {\n    this.params = params;\n    return this;\n  }\n\n  inspect(): string {\n    const klassName = this.constructor.name;\n    let sorted = {};\n\n    const keys = Object.keys(this).sort();\n    keys.forEach(function (key) {\n      sorted[key] = this[key];\n    }, this);\n\n    return `${klassName} ${JSON.stringify(sorted, null, 2)}`;\n  }\n\n  toPromiseArray(): Promise<T[]> {\n    return this.allPromiseFn().then((records: T[]) => {\n      const result = records.reduce((acc: Array<T>, record: T) => {\n        const isMatch = Object.keys(this.params)\n          .map((key: string) => {\n            const val = this.params[key];\n            if (Array.isArray(val)) {\n              return val.includes(record[key]);\n            } else {\n              return (record as any)[key] === val;\n            }\n          })\n          .every(Boolean);\n        if (isMatch) acc.push(record);\n        return acc;\n      }, [] as Array<T>);\n      return Promise.resolve(result);\n    });\n  }\n\n  // alias toPromiseArray\n  toPA(): Promise<T[]> {\n    return this.toPromiseArray();\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m params\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mWhereParams\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m \u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mallPromiseFn \u001b[38;2;248;248;242m=\u001b[39m allPromiseFn\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// Give dummy generics(_U) to align method signatures\u001b[39m\n  \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m_U \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mWhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m params\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// Give dummy generics(_U) to align method signatures\u001b[39m\n  \u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m_U \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mWhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m sorted \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m keys \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    keys\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mfunction\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      sorted\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mklassName\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39msorted\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m isMatch \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m val \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m val\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misMatch\u001b[38;2;248;248;242m)\u001b[39m acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// alias toPromiseArray\u001b[39m\n  \u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        3,
        60
      ]
    },
    "instance": {
      "where": {
        "text": "where<_U = any>(params: t.WhereParams): ActiveRecord$QueryMethods$WhereChain<T> {\n    Object.assign(this.params, params);\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m_U \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mWhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m params\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          13,
          16
        ]
      },
      "rewhere": {
        "text": "rewhere<_U = any>(params: t.WhereParams): ActiveRecord$QueryMethods$WhereChain<T> {\n    this.params = params;\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m_U \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mWhereParams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          19,
          22
        ]
      },
      "inspect": {
        "text": "inspect(): string {\n    const klassName = this.constructor.name;\n    let sorted = {};\n\n    const keys = Object.keys(this).sort();\n    keys.forEach(function (key) {\n      sorted[key] = this[key];\n    }, this);\n\n    return `${klassName} ${JSON.stringify(sorted, null, 2)}`;\n  }",
        "highlightText": "\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m sorted \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m keys \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    keys\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mfunction\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      sorted\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mklassName\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39msorted\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          24,
          34
        ]
      },
      "toPromiseArray": {
        "text": "toPromiseArray(): Promise<T[]> {\n    return this.allPromiseFn().then((records: T[]) => {\n      const result = records.reduce((acc: Array<T>, record: T) => {\n        const isMatch = Object.keys(this.params)\n          .map((key: string) => {\n            const val = this.params[key];\n            if (Array.isArray(val)) {\n              return val.includes(record[key]);\n            } else {\n              return (record as any)[key] === val;\n            }\n          })\n          .every(Boolean);\n        if (isMatch) acc.push(record);\n        return acc;\n      }, [] as Array<T>);\n      return Promise.resolve(result);\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m isMatch \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m val \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m val\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misMatch\u001b[38;2;248;248;242m)\u001b[39m acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          36,
          54
        ]
      },
      "toPA": {
        "text": "toPA(): Promise<T[]> {\n    return this.toPromiseArray();\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          57,
          59
        ]
      }
    },
    "$constructor": {
      "text": "constructor(allPromiseFn: () => Promise<T[]>) {\n    this.params = {};\n    this.allPromiseFn = allPromiseFn;\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mallPromiseFn \u001b[38;2;248;248;242m=\u001b[39m allPromiseFn\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        7,
        10
      ]
    }
  },
  "ActiveRecord$Associations$CollectionProxy": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/modules/collection_proxy/core.ts",
      "updatedAt": "2021/03/02 20:51:17 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Associations$CollectionProxy extends RueModule {\n  static scope<T extends ActiveRecord$Base>(scopeName: string, fn: (...args) => t.ScopeVal<T>) {\n    Registry.create(this.name, 'scope', {\n      [scopeName]: fn,\n    });\n    _resolveScopes(this);\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$CollectionProxy\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39margs\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeVal\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'scope'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mscopeName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m fn\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116m_resolveScopes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        13,
        20
      ]
    },
    "static": {
      "scope": {
        "text": "static scope<T extends ActiveRecord$Base>(scopeName: string, fn: (...args) => t.ScopeVal<T>) {\n    Registry.create(this.name, 'scope', {\n      [scopeName]: fn,\n    });\n    _resolveScopes(this);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39margs\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeVal\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'scope'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mscopeName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m fn\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116m_resolveScopes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          14,
          19
        ]
      }
    }
  }
}