{
  "ActiveModel$Error": {
    "metadata": {
      "filepath": "@rue/packages/activemodel/src/errors/base.ts",
      "updatedAt": "2021/03/06 12:51:18 +09:00"
    },
    "class": {
      "text": "export class ActiveModel$Error extends Error implements t.ErrObj {\n  private _namespace?: string;\n  private _code?: string;\n  private _message?: string;\n\n  get namespace(): string {\n    return this._namespace || '';\n  }\n\n  set namespace(val: string) {\n    this._namespace = val;\n  }\n\n  get code(): string {\n    return this._code || '';\n  }\n\n  set code(val: string) {\n    this._code = val;\n  }\n\n  get message(): string {\n    return this._message || '';\n  }\n\n  set message(val: string) {\n    this._message = val;\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveModel$Error\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mError\u001b[39m \u001b[38;2;102;217;239mimplements\u001b[39m \u001b[38;2;230;219;116mt\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mErrObj \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m _namespace\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m _code\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m _message\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mget\u001b[39m \u001b[38;2;102;217;239mnamespace\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_namespace \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mset\u001b[39m \u001b[38;2;102;217;239mnamespace\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_namespace \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mget\u001b[39m \u001b[38;2;230;219;116mcode\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_code \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mset\u001b[39m \u001b[38;2;230;219;116mcode\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_code \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mget\u001b[39m \u001b[38;2;230;219;116mmessage\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_message \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mset\u001b[39m \u001b[38;2;230;219;116mmessage\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m_message \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        10,
        38
      ]
    }
  },
  "ErrObj": {
    "metadata": {
      "filepath": "@rue/packages/activemodel/src/errors/types.ts",
      "updatedAt": "2021/03/06 12:51:18 +09:00"
    },
    "class": {
      "text": "export interface ErrObj extends Error {\n  code: string;\n  namespace: string;\n  message: string;\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239minterface\u001b[39m \u001b[38;2;230;219;116mErrObj\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mError\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  code\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mnamespace\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  message\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        5,
        9
      ]
    }
  },
  "ActiveModel$Base": {
    "metadata": {
      "filepath": "@rue/packages/activemodel/src/models/base.ts",
      "updatedAt": "2021/03/06 12:51:18 +09:00"
    },
    "class": {
      "text": "export class ActiveModel$Base extends ActiveModel$Impl {\n  public errors: Validations$Errors;\n\n  static getProperties(): string[] {\n    return Support.getProperties();\n  }\n\n  constructor(data: t.Params = {}) {\n    super();\n    this.errors = {};\n    Object.keys(data).forEach((key) => {\n      (this as any)[key] = data[key];\n    });\n  }\n\n  toObj(opts?: { flat: boolean }): t.Params {\n    opts = opts == undefined ? { flat: false } : opts;\n    const instance = Object.create(this);\n    const obj = Object.assign({}, instance.__proto__);\n    return opts.flat ? Object.assign(flatten(obj), { errors: obj.errors }) : obj;\n  }\n\n  inspect(): string {\n    return Support.inspect(this);\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveModel$Base\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveModel$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m Validations$Errors\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetProperties\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m Support\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetProperties\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mtoObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m{\u001b[39m\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m instance \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m obj \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m instance\u001b[38;2;248;248;242m.\u001b[39m__proto__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mflat \u001b[38;2;248;248;242m?\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mflatten\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m obj\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m obj\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m Support\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        14,
        39
      ]
    },
    "static": {
      "getProperties": {
        "text": "static getProperties(): string[] {\n    return Support.getProperties();\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetProperties\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m Support\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetProperties\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          17,
          19
        ]
      }
    },
    "instance": {
      "toObj": {
        "text": "toObj(opts?: { flat: boolean }): t.Params {\n    opts = opts == undefined ? { flat: false } : opts;\n    const instance = Object.create(this);\n    const obj = Object.assign({}, instance.__proto__);\n    return opts.flat ? Object.assign(flatten(obj), { errors: obj.errors }) : obj;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m{\u001b[39m\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m instance \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m obj \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m instance\u001b[38;2;248;248;242m.\u001b[39m__proto__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mflat \u001b[38;2;248;248;242m?\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mflatten\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m obj\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m obj\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          29,
          34
        ]
      },
      "inspect": {
        "text": "inspect(): string {\n    return Support.inspect(this);\n  }",
        "highlightText": "\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m Support\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          36,
          38
        ]
      }
    },
    "$constructor": {
      "text": "constructor(data: t.Params = {}) {\n    super();\n    this.errors = {};\n    Object.keys(data).forEach((key) => {\n      (this as any)[key] = data[key];\n    });\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        21,
        27
      ]
    }
  },
  "ActiveModel$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activemodel/src/models/impl.ts",
      "updatedAt": "2021/03/06 12:51:18 +09:00"
    },
    "class": {
      "text": "interface ActiveModel$Impl {\n  // ActiveModel$Translation\n  humanPropertyName(propKey: string): string;\n  humanPropName(propKey: string): string;\n  // ActiveModel$Validations\n  isValid(): boolean;\n  isInvalid(): boolean;\n  _toObj(opts?: { flat: boolean }): { [key: string]: any };\n}",
      "highlightText": "\u001b[38;2;102;217;239minterface\u001b[39m \u001b[38;2;230;219;116mActiveModel$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveModel$Translation\u001b[39m\n  \u001b[38;2;230;219;116mhumanPropertyName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mhumanPropName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveModel$Validations\u001b[39m\n  \u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116misInvalid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116m_toObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        26,
        34
      ]
    },
    "instance": {
      "humanPropertyName": {
        "text": "humanPropertyName(propKey: string): string;",
        "highlightText": "\u001b[38;2;230;219;116mhumanPropertyName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          28,
          0
        ]
      },
      "humanPropName": {
        "text": "humanPropName(propKey: string): string;",
        "highlightText": "\u001b[38;2;230;219;116mhumanPropName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          29,
          0
        ]
      },
      "isValid": {
        "text": "isValid(): boolean;",
        "highlightText": "\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          31,
          0
        ]
      },
      "isInvalid": {
        "text": "isInvalid(): boolean;",
        "highlightText": "\u001b[38;2;230;219;116misInvalid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          32,
          0
        ]
      },
      "_toObj": {
        "text": "_toObj(opts?: { flat: boolean }): { [key: string]: any };",
        "highlightText": "\u001b[38;2;230;219;116m_toObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          33,
          0
        ]
      }
    }
  },
  "ActiveModel$Translation": {
    "metadata": {
      "filepath": "@rue/packages/activemodel/src/models/modules/translation/core.ts",
      "updatedAt": "2021/03/06 12:51:19 +09:00"
    },
    "class": {
      "text": "export class ActiveModel$Translation extends RueModule {\n  static translate(key: string, opts?: any): string {\n    throw \"Please implement '[static] translate' in Inherited Class.\";\n  }\n\n  humanPropertyName(propKey: string): string {\n    return (this.constructor as typeof ActiveModel$Base).__t(propKey);\n  }\n\n  // @alias\n  humanPropName(propKey: string): string {\n    return this.humanPropertyName(propKey);\n  }\n\n  static __t(propKey: string): string {\n    // @ts-ignore\n    const _this = this as typeof ActiveModel$Base;\n    return _this.translate(`rue.${_this.objType()}s.${_this.name}.${propKey}`).toString();\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveModel$Translation\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement '[static] translate' in Inherited Class.\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mhumanPropertyName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveModel$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__t\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// @alias\u001b[39m\n  \u001b[38;2;230;219;116mhumanPropName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhumanPropertyName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116m__t\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveModel$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mrue.\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46ms.\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m.\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpropKey\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoString\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        8,
        27
      ]
    },
    "static": {
      "translate": {
        "text": "static translate(key: string, opts?: any): string {\n    throw \"Please implement '[static] translate' in Inherited Class.\";\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement '[static] translate' in Inherited Class.\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          9,
          11
        ]
      },
      "__t": {
        "text": "static __t(propKey: string): string {\n    // @ts-ignore\n    const _this = this as typeof ActiveModel$Base;\n    return _this.translate(`rue.${_this.objType()}s.${_this.name}.${propKey}`).toString();\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116m__t\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveModel$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtranslate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mrue.\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46ms.\u001b[39m\u001b[38;2;248;248;242m${\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m.\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mpropKey\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoString\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          22,
          26
        ]
      }
    },
    "instance": {
      "humanPropertyName": {
        "text": "humanPropertyName(propKey: string): string {\n    return (this.constructor as typeof ActiveModel$Base).__t(propKey);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mhumanPropertyName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveModel$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__t\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          13,
          15
        ]
      },
      "humanPropName": {
        "text": "humanPropName(propKey: string): string {\n    return this.humanPropertyName(propKey);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mhumanPropName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhumanPropertyName\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          18,
          20
        ]
      }
    }
  },
  "ActiveModel$Validations": {
    "metadata": {
      "filepath": "@rue/packages/activemodel/src/models/modules/validations/core.ts",
      "updatedAt": "2021/03/06 12:51:19 +09:00"
    },
    "class": {
      "text": "export class ActiveModel$Validations extends RueModule {\n  public errors: t.Errors;\n\n  isInvalid(): boolean {\n    return !this.isValid();\n  }\n\n  isValid(): boolean {\n    this.errors = {};\n    const klassName = this.constructor.name;\n\n    // Returns true if validation is not set\n    if (Registry.data[klassName] == undefined || null) return true;\n\n    Object.keys(Registry.data[klassName]).forEach((propKey: string) => {\n      this.errors[propKey] = this.errors[propKey] || [];\n\n      const fnArray = Registry.read<rt.ValidationFn[]>(klassName, propKey);\n      let propVal = this._toObj({ flat: true })[propKey];\n\n      // It may be a reactive object, and if it is destructively changed, it will lead to a problem, so verify it with a copy.\n      if (typeof propVal === 'string' || Array.isArray(propVal)) {\n        propVal = propVal.slice();\n      } else if (typeof propVal === 'object' && propVal != null) {\n        propVal = Object.assign({}, propVal);\n      }\n\n      let maybeErrors: Array<et.ErrObj> = [];\n\n      let fnVal;\n      fnArray.forEach((fn) => {\n        if (fn.length == 2) {\n          fnVal = fn(propVal, this);\n        } else {\n          fnVal = fn(propVal);\n        }\n\n        if (Array.isArray(fnVal)) {\n          maybeErrors.push(...fnVal);\n        }\n      });\n\n      if (maybeErrors.length == 0) return;\n\n      maybeErrors.forEach((maybeError: et.ErrObj) => {\n        if (maybeError instanceof Error) {\n          this.errors[propKey].push(maybeError);\n        }\n      });\n    });\n\n    const flattenErrors = this.errors;\n    // unflatten errors\n    this.errors = unflatten(this.errors, '.');\n\n    return !Object.values(flattenErrors).some((e) => e.length > 0);\n  }\n\n  _toObj(opts?: { flat: boolean }): { [key: string]: any } {\n    opts = opts == undefined ? { flat: false } : opts;\n    const instance = Object.create(this);\n    const obj = Object.assign({}, instance.__proto__);\n    return opts.flat ? flatten(obj) : obj;\n  }\n\n  static objType(): t.ObjType {\n    return 'model';\n  }\n\n  static validates<T = any, U extends ActiveModel$Validations = any>(\n    propKey: string,\n    opts: t.Options<T, U>\n  ) {\n    if (Registry.data[this.name] == undefined) {\n      Registry.data[this.name] = {};\n    }\n\n    if (Registry.read(this.name, propKey) == undefined) {\n      Registry.update(this.name, propKey, []);\n    }\n\n    // @ts-ignore\n    const translate = (this as typeof ActiveModel$Base).__t.bind(this);\n\n    const ifEval = <K, V>(propVal: K, self: V): boolean => {\n      if (opts.if) {\n        const $if = opts.if;\n        return $if(propVal as any, self as any);\n      } else {\n        return true;\n      }\n    };\n\n    const skipValidation = (propVal: any): boolean => {\n      let result = [];\n\n      if (opts.allow_null) {\n        result.push(propVal == null);\n      }\n\n      if (opts.allow_undefined) {\n        result.push(propVal == undefined);\n      }\n\n      if (opts.allow_blank) {\n        const r = ['', {}, [], null].includes(propVal);\n        result.push(r);\n      }\n\n      return result.some(Boolean);\n    };\n\n    const messageEval = <K, V>(propKey: string, propVal: K, self: V): string => {\n      if (typeof opts.message === 'string') {\n        return opts.message! as string;\n      } else if (typeof opts.message === 'undefined') {\n        return undefined;\n      } else {\n        const fnMessage = (opts.message! as t.Options['message']) as (\n          translatedPropKey: string,\n          propVal: K,\n          self: V\n        ) => string;\n        // @ts-ignore\n        return fnMessage((this as typeof ActiveModel$Base).__t(propKey), propVal, self) as string;\n      }\n    };\n\n    if (opts.presence != undefined) {\n      Registry.create(this.name, propKey, [\n        (propVal: T, self: U) =>\n          ifEval<T, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validatePresence<T>(\n                propKey,\n                propVal,\n                opts.presence!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.absence != undefined) {\n      Registry.create(this.name, propKey, [\n        (propVal: T, self: U) =>\n          ifEval<T, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateAbsence<T>(\n                propKey,\n                propVal,\n                opts.absence!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.length != undefined && Object.keys(opts.length).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: string | any[] | { [key in string | number]: any }, self: U) =>\n          ifEval<string | any[] | { [key in string | number]: any }, U>(propVal, self) &&\n          !skipValidation(propVal)\n            ? Validator.validateLength<string | any[] | { [key in string | number]: any }, U>(\n                self,\n                propKey,\n                propVal,\n                opts.length!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.inclusion != undefined && Object.keys(opts.inclusion).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: string | number | boolean, self: U) =>\n          ifEval<string | number | boolean, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateInclusion(\n                propKey,\n                propVal,\n                opts.inclusion!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.exclusion != undefined && Object.keys(opts.exclusion).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: string | number | boolean, self: U) =>\n          ifEval<string | number | boolean, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateExclusion(\n                propKey,\n                propVal,\n                opts.exclusion!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.condition != undefined && opts.condition.length == 2) {\n      Registry.create(this.name, propKey, [\n        (propVal: T, self: U) =>\n          ifEval<T, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateCondition<T, U>(\n                self,\n                propKey,\n                propVal,\n                opts.condition!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.format != undefined && Object.keys(opts.format).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: string, self: U) =>\n          ifEval<string, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateFormat(\n                propKey,\n                propVal,\n                opts.format!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.numericality != undefined && Object.keys(opts.numericality).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: number, self: U) =>\n          ifEval<number, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateNumericality(\n                propKey,\n                propVal,\n                opts.numericality!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveModel$Validations\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mErrors\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;230;219;116misInvalid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// Returns true if validation is not set\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRegistry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mRegistry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mpropKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mpropKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m fnArray \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mValidationFn\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m propVal \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_toObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mpropKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// It may be a reactive object, and if it is destructively changed, it will lead to a problem, so verify it with a copy.\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m propVal \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'string'\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        propVal \u001b[38;2;248;248;242m=\u001b[39m propVal\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m propVal \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m propVal \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        propVal \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mlet\u001b[39m maybeErrors\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39met\u001b[38;2;248;248;242m.\u001b[39mErrObj\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mlet\u001b[39m fnVal\u001b[38;2;248;248;242m;\u001b[39m\n      fnArray\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfn\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfn\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          fnVal \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          fnVal \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfnVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          maybeErrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mfnVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmaybeErrors\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      maybeErrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmaybeError\u001b[38;2;248;248;242m:\u001b[39m et\u001b[38;2;248;248;242m.\u001b[39mErrObj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmaybeError \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116mError\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mpropKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmaybeError\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m flattenErrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// unflatten errors\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116munflatten\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'.'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalues\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mflattenErrors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msome\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39me\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m e\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116m_toObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m instance \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m obj \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m instance\u001b[38;2;248;248;242m.\u001b[39m__proto__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mflat \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;230;219;116mflatten\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m obj\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'model'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mvalidates\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveModel$Validations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    propKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRegistry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m translate \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveModel$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__t\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mbind\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m ifEval \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mif\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m $\u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mif\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m $\u001b[38;2;102;217;239mif\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m skipValidation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mallow_null\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mallow_undefined\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mallow_blank\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m r \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msome\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m messageEval \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mmessage \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'string'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mmessage\u001b[38;2;248;248;242m!\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mmessage \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'undefined'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m fnMessage \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mmessage\u001b[38;2;248;248;242m!\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mOptions\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'message'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n          translatedPropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          propVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\n        \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mfnMessage\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveModel$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__t\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mpresence \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidatePresence\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mpresence\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mabsence \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateAbsence\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mabsence\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey \u001b[38;2;102;217;239min\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey \u001b[38;2;102;217;239min\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n          \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateLength\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey \u001b[38;2;102;217;239min\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                self\u001b[38;2;248;248;242m,\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39minclusion \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39minclusion\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateInclusion\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39minclusion\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mexclusion \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mexclusion\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateExclusion\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mexclusion\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mcondition \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mcondition\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateCondition\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                self\u001b[38;2;248;248;242m,\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mcondition\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mformat \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mformat\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateFormat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mformat\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mnumericality \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mnumericality\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateNumericality\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mnumericality\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        19,
        270
      ]
    },
    "instance": {
      "isInvalid": {
        "text": "isInvalid(): boolean {\n    return !this.isValid();\n  }",
        "highlightText": "\u001b[38;2;230;219;116misInvalid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          22,
          24
        ]
      },
      "isValid": {
        "text": "isValid(): boolean {\n    this.errors = {};\n    const klassName = this.constructor.name;\n\n    // Returns true if validation is not set\n    if (Registry.data[klassName] == undefined || null) return true;\n\n    Object.keys(Registry.data[klassName]).forEach((propKey: string) => {\n      this.errors[propKey] = this.errors[propKey] || [];\n\n      const fnArray = Registry.read<rt.ValidationFn[]>(klassName, propKey);\n      let propVal = this._toObj({ flat: true })[propKey];\n\n      // It may be a reactive object, and if it is destructively changed, it will lead to a problem, so verify it with a copy.\n      if (typeof propVal === 'string' || Array.isArray(propVal)) {\n        propVal = propVal.slice();\n      } else if (typeof propVal === 'object' && propVal != null) {\n        propVal = Object.assign({}, propVal);\n      }\n\n      let maybeErrors: Array<et.ErrObj> = [];\n\n      let fnVal;\n      fnArray.forEach((fn) => {\n        if (fn.length == 2) {\n          fnVal = fn(propVal, this);\n        } else {\n          fnVal = fn(propVal);\n        }\n\n        if (Array.isArray(fnVal)) {\n          maybeErrors.push(...fnVal);\n        }\n      });\n\n      if (maybeErrors.length == 0) return;\n\n      maybeErrors.forEach((maybeError: et.ErrObj) => {\n        if (maybeError instanceof Error) {\n          this.errors[propKey].push(maybeError);\n        }\n      });\n    });\n\n    const flattenErrors = this.errors;\n    // unflatten errors\n    this.errors = unflatten(this.errors, '.');\n\n    return !Object.values(flattenErrors).some((e) => e.length > 0);\n  }",
        "highlightText": "\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// Returns true if validation is not set\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRegistry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mRegistry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mpropKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mpropKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m fnArray \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mrt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mValidationFn\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m propVal \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_toObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mpropKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// It may be a reactive object, and if it is destructively changed, it will lead to a problem, so verify it with a copy.\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m propVal \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'string'\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        propVal \u001b[38;2;248;248;242m=\u001b[39m propVal\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mslice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m propVal \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m propVal \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        propVal \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mlet\u001b[39m maybeErrors\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39met\u001b[38;2;248;248;242m.\u001b[39mErrObj\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mlet\u001b[39m fnVal\u001b[38;2;248;248;242m;\u001b[39m\n      fnArray\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfn\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfn\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          fnVal \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          fnVal \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfnVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          maybeErrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mfnVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmaybeErrors\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      maybeErrors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmaybeError\u001b[38;2;248;248;242m:\u001b[39m et\u001b[38;2;248;248;242m.\u001b[39mErrObj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmaybeError \u001b[38;2;102;217;239minstanceof\u001b[39m \u001b[38;2;230;219;116mError\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m[\u001b[39mpropKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmaybeError\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m flattenErrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// unflatten errors\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116munflatten\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39merrors\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'.'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m!\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalues\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mflattenErrors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msome\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39me\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m e\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          26,
          75
        ]
      },
      "_toObj": {
        "text": "_toObj(opts?: { flat: boolean }): { [key: string]: any } {\n    opts = opts == undefined ? { flat: false } : opts;\n    const instance = Object.create(this);\n    const obj = Object.assign({}, instance.__proto__);\n    return opts.flat ? flatten(obj) : obj;\n  }",
        "highlightText": "\u001b[38;2;230;219;116m_toObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m flat\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m instance \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m obj \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m instance\u001b[38;2;248;248;242m.\u001b[39m__proto__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mflat \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;230;219;116mflatten\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m obj\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          77,
          82
        ]
      }
    },
    "static": {
      "objType": {
        "text": "static objType(): t.ObjType {\n    return 'model';\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'model'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          84,
          86
        ]
      },
      "validates": {
        "text": "static validates<T = any, U extends ActiveModel$Validations = any>(\n    propKey: string,\n    opts: t.Options<T, U>\n  ) {\n    if (Registry.data[this.name] == undefined) {\n      Registry.data[this.name] = {};\n    }\n\n    if (Registry.read(this.name, propKey) == undefined) {\n      Registry.update(this.name, propKey, []);\n    }\n\n    // @ts-ignore\n    const translate = (this as typeof ActiveModel$Base).__t.bind(this);\n\n    const ifEval = <K, V>(propVal: K, self: V): boolean => {\n      if (opts.if) {\n        const $if = opts.if;\n        return $if(propVal as any, self as any);\n      } else {\n        return true;\n      }\n    };\n\n    const skipValidation = (propVal: any): boolean => {\n      let result = [];\n\n      if (opts.allow_null) {\n        result.push(propVal == null);\n      }\n\n      if (opts.allow_undefined) {\n        result.push(propVal == undefined);\n      }\n\n      if (opts.allow_blank) {\n        const r = ['', {}, [], null].includes(propVal);\n        result.push(r);\n      }\n\n      return result.some(Boolean);\n    };\n\n    const messageEval = <K, V>(propKey: string, propVal: K, self: V): string => {\n      if (typeof opts.message === 'string') {\n        return opts.message! as string;\n      } else if (typeof opts.message === 'undefined') {\n        return undefined;\n      } else {\n        const fnMessage = (opts.message! as t.Options['message']) as (\n          translatedPropKey: string,\n          propVal: K,\n          self: V\n        ) => string;\n        // @ts-ignore\n        return fnMessage((this as typeof ActiveModel$Base).__t(propKey), propVal, self) as string;\n      }\n    };\n\n    if (opts.presence != undefined) {\n      Registry.create(this.name, propKey, [\n        (propVal: T, self: U) =>\n          ifEval<T, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validatePresence<T>(\n                propKey,\n                propVal,\n                opts.presence!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.absence != undefined) {\n      Registry.create(this.name, propKey, [\n        (propVal: T, self: U) =>\n          ifEval<T, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateAbsence<T>(\n                propKey,\n                propVal,\n                opts.absence!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.length != undefined && Object.keys(opts.length).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: string | any[] | { [key in string | number]: any }, self: U) =>\n          ifEval<string | any[] | { [key in string | number]: any }, U>(propVal, self) &&\n          !skipValidation(propVal)\n            ? Validator.validateLength<string | any[] | { [key in string | number]: any }, U>(\n                self,\n                propKey,\n                propVal,\n                opts.length!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.inclusion != undefined && Object.keys(opts.inclusion).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: string | number | boolean, self: U) =>\n          ifEval<string | number | boolean, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateInclusion(\n                propKey,\n                propVal,\n                opts.inclusion!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.exclusion != undefined && Object.keys(opts.exclusion).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: string | number | boolean, self: U) =>\n          ifEval<string | number | boolean, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateExclusion(\n                propKey,\n                propVal,\n                opts.exclusion!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.condition != undefined && opts.condition.length == 2) {\n      Registry.create(this.name, propKey, [\n        (propVal: T, self: U) =>\n          ifEval<T, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateCondition<T, U>(\n                self,\n                propKey,\n                propVal,\n                opts.condition!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.format != undefined && Object.keys(opts.format).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: string, self: U) =>\n          ifEval<string, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateFormat(\n                propKey,\n                propVal,\n                opts.format!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n\n    if (opts.numericality != undefined && Object.keys(opts.numericality).length > 0) {\n      Registry.create(this.name, propKey, [\n        (propVal: number, self: U) =>\n          ifEval<number, U>(propVal, self) && !skipValidation(propVal)\n            ? Validator.validateNumericality(\n                propKey,\n                propVal,\n                opts.numericality!,\n                translate,\n                messageEval(propKey, propVal, self)\n              )\n            : [],\n      ]);\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mvalidates\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveModel$Validations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    propKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mOptions\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRegistry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRegistry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m translate \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveModel$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__t\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mbind\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m ifEval \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mif\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m $\u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mif\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m $\u001b[38;2;102;217;239mif\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m skipValidation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mallow_null\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mallow_undefined\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mallow_blank\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m r \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msome\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m messageEval \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mmessage \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'string'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mmessage\u001b[38;2;248;248;242m!\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mmessage \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'undefined'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m fnMessage \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mmessage\u001b[38;2;248;248;242m!\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mOptions\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'message'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n          translatedPropKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          propVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mK\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mV\u001b[39m\n        \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mfnMessage\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveModel$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m__t\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mpresence \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidatePresence\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mpresence\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mabsence \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateAbsence\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mabsence\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey \u001b[38;2;102;217;239min\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey \u001b[38;2;102;217;239min\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m\n          \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateLength\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey \u001b[38;2;102;217;239min\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                self\u001b[38;2;248;248;242m,\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39minclusion \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39minclusion\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateInclusion\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39minclusion\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mexclusion \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mexclusion\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m|\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateExclusion\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mexclusion\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mcondition \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mcondition\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateCondition\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                self\u001b[38;2;248;248;242m,\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mcondition\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mformat \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mformat\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateFormat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mformat\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mnumericality \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mnumericality\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m propKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n          \u001b[38;2;230;219;116mifEval\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;230;219;116mskipValidation\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropVal\u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m?\u001b[39m Validator\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mvalidateNumericality\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n                propKey\u001b[38;2;248;248;242m,\u001b[39m\n                propVal\u001b[38;2;248;248;242m,\u001b[39m\n                opts\u001b[38;2;248;248;242m.\u001b[39mnumericality\u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n                translate\u001b[38;2;248;248;242m,\u001b[39m\n                \u001b[38;2;230;219;116mmessageEval\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropKey\u001b[38;2;248;248;242m,\u001b[39m propVal\u001b[38;2;248;248;242m,\u001b[39m self\u001b[38;2;248;248;242m)\u001b[39m\n              \u001b[38;2;248;248;242m)\u001b[39m\n            \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          88,
          269
        ]
      }
    }
  },
  "ActiveRecord$Error": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/errors/base.ts",
      "updatedAt": "2021/03/06 12:51:25 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Error extends ActiveModel$Error {}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Error\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveModel$Error\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        12,
        12
      ]
    }
  },
  "ActiveRecord$Base": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/base.ts",
      "updatedAt": "2021/03/06 12:51:25 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Base extends ActiveRecord$Impl {\n  public errors: t.Validations$Errors;\n\n  constructor(data: t.Params = {}) {\n    super();\n\n    (this as any)[RUE_RECORD_ID] = undefined;\n\n    Object.keys(data).forEach((key) => {\n      (this as any)[key] = data[key];\n    });\n\n    ActiveRecord$Impl.defineAssociations(this);\n  }\n\n  // override\n  static objType(): t.ObjType {\n    return 'record';\n  }\n\n  protected static fetchAll<T = any>(): Promise<Array<T>> {\n    throw \"Please implement '[static] fetchAll' in Inherited Class\";\n  }\n\n  static resetRecordCache() {\n    const klassName = this.name;\n    RecordCache.destroy(klassName);\n    RecordCache.create(klassName, RECORD_ALL, []);\n    RecordCache.create(klassName, RUE_AUTO_INCREMENT_RECORD_ID, 1);\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m errors\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mValidations$Errors\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    ActiveRecord$Impl\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// override\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'record'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement '[static] fetchAll' in Inherited Class\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mresetRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        16,
        46
      ]
    },
    "static": {
      "objType": {
        "text": "static objType(): t.ObjType {\n    return 'record';\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mobjType\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mObjType \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m'record'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          32,
          34
        ]
      },
      "fetchAll": {
        "text": "protected static fetchAll<T = any>(): Promise<Array<T>> {\n    throw \"Please implement '[static] fetchAll' in Inherited Class\";\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m\"Please implement '[static] fetchAll' in Inherited Class\"\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          36,
          38
        ]
      },
      "resetRecordCache": {
        "text": "static resetRecordCache() {\n    const klassName = this.name;\n    RecordCache.destroy(klassName);\n    RecordCache.create(klassName, RECORD_ALL, []);\n    RecordCache.create(klassName, RUE_AUTO_INCREMENT_RECORD_ID, 1);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mresetRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          40,
          45
        ]
      }
    },
    "$constructor": {
      "text": "constructor(data: t.Params = {}) {\n    super();\n\n    (this as any)[RUE_RECORD_ID] = undefined;\n\n    Object.keys(data).forEach((key) => {\n      (this as any)[key] = data[key];\n    });\n\n    ActiveRecord$Impl.defineAssociations(this);\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mParams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239msuper\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    ActiveRecord$Impl\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        19,
        29
      ]
    }
  },
  "ActiveRecord$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/impl.ts",
      "updatedAt": "2021/03/06 12:51:25 +09:00"
    },
    "class": {
      "text": "interface ActiveRecord$Impl {\n  // ActiveRecord$Persistence\n  save(opts?: { validate: boolean }): boolean;\n  saveOrThrow(): void | boolean;\n  destroy<T extends ActiveRecord$Base>(): T;\n  update<T>(params?: Partial<T>): boolean;\n  // ActiveRecord$Associations\n  primaryKey: at.Associations$PrimaryKey;\n  hasAndBelongsToMany<T extends ActiveRecord$Associations = any>(\n    record: T\n  ): { [key: string]: at.Associations$ForeignKey };\n  releaseAndBelongsToMany<T extends ActiveRecord$Associations = any>(\n    record: T\n  ): { [key: string]: at.Associations$ForeignKey };\n}",
      "highlightText": "\u001b[38;2;102;217;239minterface\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Persistence\u001b[39m\n  \u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Associations\u001b[39m\n  primaryKey\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$PrimaryKey\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        75,
        89
      ]
    },
    "static": {
      "defineAssociations": {
        "text": "protected static defineAssociations<T extends ActiveRecord$Base>(self: T) {\n    ActiveRecord$Associations._defineAssociations(self);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprotected\u001b[39m \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdefineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    ActiveRecord$Associations\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116m_defineAssociations\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "protected",
        "line": [
          61,
          63
        ]
      }
    },
    "instance": {
      "save": {
        "text": "save(opts?: { validate: boolean }): boolean;",
        "highlightText": "\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          77,
          0
        ]
      },
      "saveOrThrow": {
        "text": "saveOrThrow(): void | boolean;",
        "highlightText": "\u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          78,
          0
        ]
      },
      "destroy": {
        "text": "destroy<T extends ActiveRecord$Base>(): T;",
        "highlightText": "\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          79,
          0
        ]
      },
      "update": {
        "text": "update<T>(params?: Partial<T>): boolean;",
        "highlightText": "\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          80,
          0
        ]
      },
      "hasAndBelongsToMany": {
        "text": "hasAndBelongsToMany<T extends ActiveRecord$Associations = any>(\n    record: T\n  ): { [key: string]: at.Associations$ForeignKey };",
        "highlightText": "\u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          83,
          85
        ]
      },
      "releaseAndBelongsToMany": {
        "text": "releaseAndBelongsToMany<T extends ActiveRecord$Associations = any>(\n    record: T\n  ): { [key: string]: at.Associations$ForeignKey };",
        "highlightText": "\u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Associations \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m at\u001b[38;2;248;248;242m.\u001b[39mAssociations$ForeignKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          86,
          88
        ]
      }
    }
  },
  "ActiveRecord$Relation$Base": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/relations/base.ts",
      "updatedAt": "2021/03/06 12:51:25 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Relation$Base<T extends ActiveRecord$Base> {\n  private recordKlass: ct.Constructor<T>;\n  private records: T[];\n\n  constructor(recordKlass: ct.Constructor<T>, records: T[]) {\n    this.recordKlass = recordKlass;\n    this.records = records || [];\n  }\n\n  isMany(filter?: (record: T) => boolean): boolean {\n    return this.records.filter(filter || Boolean).length > 1;\n  }\n\n  isNone(filter?: (record: T) => boolean): boolean {\n    return this.records.filter(filter || Boolean).length === 0;\n  }\n\n  isOne(filter?: (record: T) => boolean): boolean {\n    return this.records.filter(filter || Boolean).length === 1;\n  }\n\n  isAny(filter?: (record: T) => boolean): boolean {\n    return this.records.filter(filter || Boolean).length > 0;\n  }\n\n  isBlank(): boolean {\n    return this.records.length == 0;\n  }\n\n  build<U>(params?: Partial<U>, yielder?: (self: T) => void): T {\n    // @ts-ignore\n    const record = new this.recordKlass(params);\n    if (yielder) yielder(record);\n    return record;\n  }\n\n  create<U>(params?: Partial<U>): T {\n    // @ts-ignore\n    const record = new this.recordKlass(params);\n    record.save();\n    this.records.push(record);\n    return record;\n  }\n\n  createOrThrow<U>(params?: Partial<U>): T {\n    // @ts-ignore\n    const record = new this.recordKlass(params);\n\n    if (record.save()) {\n      this.records.push(record);\n      return record;\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: record.inspect(),\n        },\n      });\n    }\n  }\n\n  createOrFindBy<U>(params: Partial<U>): Promise<T> {\n    // @ts-ignore\n    return (this.recordKlass as typeof ActiveRecord$Base).findBy(params).then((record) => {\n      if (record) {\n        return Promise.resolve(record);\n      } else {\n        const createdRecord = this.create<Partial<U>>(params);\n        return Promise.resolve(createdRecord);\n      }\n    });\n  }\n\n  createOrFindByOrThrow<U>(params: Partial<U>): Promise<T> {\n    // @ts-ignore\n    return (this.recordKlass as typeof ActiveRecord$Base).findBy<T, U>(params).then((record) => {\n      if (record) {\n        return Promise.resolve(record);\n      } else {\n        try {\n          const record = this.createOrThrow<U>(params);\n          return Promise.resolve(record);\n        } catch (err) {\n          return Promise.reject(err);\n        }\n      }\n    });\n  }\n\n  deleteBy<P>(params?: Partial<P>): Promise<number> {\n    const deleteRecordFn = (record: T) => {\n      record.destroy();\n      return true;\n    };\n\n    return (\n      this.recordKlass\n        // @ts-ignore\n        .where<P>(params)\n        .toPA()\n        .then((records: T[]) => {\n          return Promise.all(records.map(deleteRecordFn)).then((result) => {\n            this.records = RecordCache.read(this.recordKlass.name, RECORD_ALL, 'array');\n            return Promise.resolve(result.filter(Boolean).length);\n          });\n        })\n    );\n  }\n\n  // TODO: Use ActiveRecord$QueryMethods#where\n  // https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/relation.rb#L613-L615\n  destroyBy(filter?: (self: T) => boolean): T[] {\n    let leavedData = [];\n    let deleteData = [];\n\n    this.records.forEach((record) => {\n      if (filter) {\n        if (filter(record)) {\n          deleteData.push(record);\n        } else {\n          leavedData.push(record);\n        }\n      } else {\n        deleteData.push(record);\n      }\n    });\n\n    RecordCache.update(this.recordKlass.name, RECORD_ALL, leavedData);\n    this.records = leavedData;\n\n    deleteData.forEach((record) => Object.freeze(record));\n    return deleteData;\n  }\n\n  deleteAll(): number {\n    const deleteCount = this.records.length;\n    RecordCache.update(this.recordKlass.name, RECORD_ALL, []);\n    this.records = [];\n    return deleteCount;\n  }\n\n  destroyAll(): T[] {\n    // @ts-ignore\n    const destroyed = this.records.map((record: T) => {\n      const destroyed = record.destroy<T>();\n      Object.freeze(destroyed);\n      return destroyed;\n    });\n    this.records = [];\n    return destroyed;\n  }\n\n  findOrCreateBy<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return Promise.resolve(record);\n      } else {\n        const createdRecord = this.create<Partial<U>>(params);\n        if (yielder) yielder(createdRecord);\n        return Promise.resolve(createdRecord);\n      }\n    });\n  }\n\n  findOrCreateByOrThrow<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return Promise.resolve(record);\n      } else {\n        try {\n          const createdRecord = this.createOrThrow<Partial<U>>(params);\n          if (yielder) yielder(createdRecord);\n          return Promise.resolve(createdRecord);\n        } catch (err) {\n          return Promise.reject(err);\n        }\n      }\n    });\n  }\n\n  findOrInitializeBy<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return Promise.resolve(record);\n      } else {\n        const newRecord = new this.recordKlass(params);\n        if (yielder) yielder(newRecord);\n        return Promise.resolve(newRecord);\n      }\n    });\n  }\n\n  updateAll<U>(params: Partial<U>): Promise<number> {\n    const updateFn = (record: T): boolean => {\n      return record.update(params);\n    };\n\n    return Promise.all(this.records.map(updateFn)).then((result) => {\n      return Promise.resolve(result.filter(Boolean).length);\n    });\n  }\n\n  touchAll<U>(\n    params?: Partial<U>,\n    opts?: { withCreatedAt?: boolean; time?: string }\n  ): Promise<number> {\n    const updateProps =\n      opts && opts.withCreatedAt ? [RUE_CREATED_AT, RUE_UPDATED_AT] : [RUE_UPDATED_AT];\n    const datetime = opts && opts.time ? dayjs(opts.time).format() : dayjs().format();\n\n    const touchFn = (record: T): boolean => {\n      updateProps.forEach((timestamp) => {\n        record.update({ [timestamp]: datetime });\n      });\n      return true;\n    };\n\n    return (\n      this.recordKlass\n        // @ts-ignore\n        .where<T, U>(params)\n        .toPA()\n        .then((records) => {\n          return Promise.all(records.map(touchFn)).then((result) => {\n            this.records = RecordCache.read(this.recordKlass.name, RECORD_ALL, 'array');\n            return Promise.resolve(result.filter(Boolean).length);\n          });\n        })\n    );\n  }\n\n  toArray(): T[] {\n    return this.records;\n  }\n\n  // @alias\n  toA(): T[] {\n    return this.records;\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m recordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m records\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;248;248;242m=\u001b[39m recordKlass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m records \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116misNone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116misOne\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116misBlank\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mbuild\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mcreateOrFindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m createdRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mcreateOrFindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mtry\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mcatch\u001b[39m \u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mdeleteBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mdeleteRecordFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\n        \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdeleteRecordFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// TODO: Use ActiveRecord$QueryMethods#where\u001b[39m\n  \u001b[38;2;130;146;162m// https://github.com/rails/rails/blob/5aaaa1630ae9a71b3c3ecc4dc46074d678c08d67/activerecord/lib/active_record/relation.rb#L613-L615\u001b[39m\n  \u001b[38;2;230;219;116mdestroyBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m leavedData\u001b[38;2;248;248;242m;\u001b[39m\n\n    deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m deleteData\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mdeleteAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m deleteCount \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m deleteCount\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m destroyed \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m destroyed \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdestroyed\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m destroyed\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m destroyed\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mfindOrCreateBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m createdRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mfindOrCreateByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mtry\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m createdRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mcatch\u001b[39m \u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mfindOrInitializeBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mupdateAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m updateFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mupdateFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mtouchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m updateProps \u001b[38;2;248;248;242m=\u001b[39m\n      opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mwithCreatedAt \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m datetime \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mtime \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mtime\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m touchFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      updateProps\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtimestamp\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mtimestamp\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m datetime \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\n        \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtouchFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mtoArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// @alias\u001b[39m\n  \u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        12,
        257
      ]
    },
    "instance": {
      "isMany": {
        "text": "isMany(filter?: (record: T) => boolean): boolean {\n    return this.records.filter(filter || Boolean).length > 1;\n  }",
        "highlightText": "\u001b[38;2;230;219;116misMany\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          21,
          23
        ]
      },
      "isNone": {
        "text": "isNone(filter?: (record: T) => boolean): boolean {\n    return this.records.filter(filter || Boolean).length === 0;\n  }",
        "highlightText": "\u001b[38;2;230;219;116misNone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          25,
          27
        ]
      },
      "isOne": {
        "text": "isOne(filter?: (record: T) => boolean): boolean {\n    return this.records.filter(filter || Boolean).length === 1;\n  }",
        "highlightText": "\u001b[38;2;230;219;116misOne\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          29,
          31
        ]
      },
      "isAny": {
        "text": "isAny(filter?: (record: T) => boolean): boolean {\n    return this.records.filter(filter || Boolean).length > 0;\n  }",
        "highlightText": "\u001b[38;2;230;219;116misAny\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter \u001b[38;2;248;248;242m||\u001b[39m Boolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          33,
          35
        ]
      },
      "isBlank": {
        "text": "isBlank(): boolean {\n    return this.records.length == 0;\n  }",
        "highlightText": "\u001b[38;2;230;219;116misBlank\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          37,
          39
        ]
      },
      "build": {
        "text": "build<U>(params?: Partial<U>, yielder?: (self: T) => void): T {\n    // @ts-ignore\n    const record = new this.recordKlass(params);\n    if (yielder) yielder(record);\n    return record;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mbuild\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          41,
          46
        ]
      },
      "create": {
        "text": "create<U>(params?: Partial<U>): T {\n    // @ts-ignore\n    const record = new this.recordKlass(params);\n    record.save();\n    this.records.push(record);\n    return record;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          48,
          54
        ]
      },
      "createOrThrow": {
        "text": "createOrThrow<U>(params?: Partial<U>): T {\n    // @ts-ignore\n    const record = new this.recordKlass(params);\n\n    if (record.save()) {\n      this.records.push(record);\n      return record;\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: record.inspect(),\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          56,
          71
        ]
      },
      "createOrFindBy": {
        "text": "createOrFindBy<U>(params: Partial<U>): Promise<T> {\n    // @ts-ignore\n    return (this.recordKlass as typeof ActiveRecord$Base).findBy(params).then((record) => {\n      if (record) {\n        return Promise.resolve(record);\n      } else {\n        const createdRecord = this.create<Partial<U>>(params);\n        return Promise.resolve(createdRecord);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreateOrFindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m createdRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          73,
          83
        ]
      },
      "createOrFindByOrThrow": {
        "text": "createOrFindByOrThrow<U>(params: Partial<U>): Promise<T> {\n    // @ts-ignore\n    return (this.recordKlass as typeof ActiveRecord$Base).findBy<T, U>(params).then((record) => {\n      if (record) {\n        return Promise.resolve(record);\n      } else {\n        try {\n          const record = this.createOrThrow<U>(params);\n          return Promise.resolve(record);\n        } catch (err) {\n          return Promise.reject(err);\n        }\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreateOrFindByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mtry\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mcatch\u001b[39m \u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          85,
          99
        ]
      },
      "deleteBy": {
        "text": "deleteBy<P>(params?: Partial<P>): Promise<number> {\n    const deleteRecordFn = (record: T) => {\n      record.destroy();\n      return true;\n    };\n\n    return (\n      this.recordKlass\n        // @ts-ignore\n        .where<P>(params)\n        .toPA()\n        .then((records: T[]) => {\n          return Promise.all(records.map(deleteRecordFn)).then((result) => {\n            this.records = RecordCache.read(this.recordKlass.name, RECORD_ALL, 'array');\n            return Promise.resolve(result.filter(Boolean).length);\n          });\n        })\n    );\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdeleteBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mdeleteRecordFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\n        \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mP\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdeleteRecordFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          101,
          119
        ]
      },
      "destroyBy": {
        "text": "destroyBy(filter?: (self: T) => boolean): T[] {\n    let leavedData = [];\n    let deleteData = [];\n\n    this.records.forEach((record) => {\n      if (filter) {\n        if (filter(record)) {\n          deleteData.push(record);\n        } else {\n          leavedData.push(record);\n        }\n      } else {\n        deleteData.push(record);\n      }\n    });\n\n    RecordCache.update(this.recordKlass.name, RECORD_ALL, leavedData);\n    this.records = leavedData;\n\n    deleteData.forEach((record) => Object.freeze(record));\n    return deleteData;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroyBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m leavedData\u001b[38;2;248;248;242m;\u001b[39m\n\n    deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m deleteData\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          123,
          144
        ]
      },
      "deleteAll": {
        "text": "deleteAll(): number {\n    const deleteCount = this.records.length;\n    RecordCache.update(this.recordKlass.name, RECORD_ALL, []);\n    this.records = [];\n    return deleteCount;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdeleteAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mnumber\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m deleteCount \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m deleteCount\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          146,
          151
        ]
      },
      "destroyAll": {
        "text": "destroyAll(): T[] {\n    // @ts-ignore\n    const destroyed = this.records.map((record: T) => {\n      const destroyed = record.destroy<T>();\n      Object.freeze(destroyed);\n      return destroyed;\n    });\n    this.records = [];\n    return destroyed;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m destroyed \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m destroyed \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdestroyed\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m destroyed\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m destroyed\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          153,
          162
        ]
      },
      "findOrCreateBy": {
        "text": "findOrCreateBy<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return Promise.resolve(record);\n      } else {\n        const createdRecord = this.create<Partial<U>>(params);\n        if (yielder) yielder(createdRecord);\n        return Promise.resolve(createdRecord);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfindOrCreateBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m createdRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          164,
          176
        ]
      },
      "findOrCreateByOrThrow": {
        "text": "findOrCreateByOrThrow<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return Promise.resolve(record);\n      } else {\n        try {\n          const createdRecord = this.createOrThrow<Partial<U>>(params);\n          if (yielder) yielder(createdRecord);\n          return Promise.resolve(createdRecord);\n        } catch (err) {\n          return Promise.reject(err);\n        }\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfindOrCreateByOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mtry\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m createdRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreateOrThrow\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mPartial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mcreatedRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mcatch\u001b[39m \u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merr\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          178,
          194
        ]
      },
      "findOrInitializeBy": {
        "text": "findOrInitializeBy<U>(params: Partial<U>, yielder?: (self: T) => void): Promise<T> {\n    // @ts-ignore\n    return this.recordKlass.findBy<T, U>(params).then((record) => {\n      if (record) {\n        if (yielder) yielder(record);\n        return Promise.resolve(record);\n      } else {\n        const newRecord = new this.recordKlass(params);\n        if (yielder) yielder(newRecord);\n        return Promise.resolve(newRecord);\n      }\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mfindOrInitializeBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m yielder\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m newRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrecordKlass\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39myielder\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;230;219;116myielder\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mnewRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          196,
          208
        ]
      },
      "updateAll": {
        "text": "updateAll<U>(params: Partial<U>): Promise<number> {\n    const updateFn = (record: T): boolean => {\n      return record.update(params);\n    };\n\n    return Promise.all(this.records.map(updateFn)).then((result) => {\n      return Promise.resolve(result.filter(Boolean).length);\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdateAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m updateFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mupdateFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          210,
          218
        ]
      },
      "touchAll": {
        "text": "touchAll<U>(\n    params?: Partial<U>,\n    opts?: { withCreatedAt?: boolean; time?: string }\n  ): Promise<number> {\n    const updateProps =\n      opts && opts.withCreatedAt ? [RUE_CREATED_AT, RUE_UPDATED_AT] : [RUE_UPDATED_AT];\n    const datetime = opts && opts.time ? dayjs(opts.time).format() : dayjs().format();\n\n    const touchFn = (record: T): boolean => {\n      updateProps.forEach((timestamp) => {\n        record.update({ [timestamp]: datetime });\n      });\n      return true;\n    };\n\n    return (\n      this.recordKlass\n        // @ts-ignore\n        .where<T, U>(params)\n        .toPA()\n        .then((records) => {\n          return Promise.all(records.map(touchFn)).then((result) => {\n            this.records = RecordCache.read(this.recordKlass.name, RECORD_ALL, 'array');\n            return Promise.resolve(result.filter(Boolean).length);\n          });\n        })\n    );\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtouchAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    opts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m withCreatedAt\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m time\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m updateProps \u001b[38;2;248;248;242m=\u001b[39m\n      opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mwithCreatedAt \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m datetime \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39mtime \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mtime\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m touchFn \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      updateProps\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtimestamp\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mtimestamp\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m datetime \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\n        \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtouchFn\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          220,
          247
        ]
      },
      "toArray": {
        "text": "toArray(): T[] {\n    return this.records;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          249,
          251
        ]
      },
      "toA": {
        "text": "toA(): T[] {\n    return this.records;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          254,
          256
        ]
      }
    },
    "$constructor": {
      "text": "constructor(recordKlass: ct.Constructor<T>, records: T[]) {\n    this.recordKlass = recordKlass;\n    this.records = records || [];\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecordKlass\u001b[38;2;248;248;242m:\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecordKlass \u001b[38;2;248;248;242m=\u001b[39m recordKlass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mrecords \u001b[38;2;248;248;242m=\u001b[39m records \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        16,
        19
      ]
    }
  },
  "ActiveRecord$Associations": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/core.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Associations extends ActiveRecord$Associations$Impl {\n  public primaryKey: t.PrimaryKey;\n\n  static belongsTo<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: string\n  ) {\n    Registry.create(this.name, Association.belongsTo, {\n      [relationName]: (self: T) => (klass as any).findBy({ primaryKey: self[foreignKey] }),\n    });\n  }\n\n  static hasOne<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasOne, {\n      [relationName]: (self: T) => (klass as any).findBy({ [foreignKey]: self.primaryKey }),\n    });\n  }\n\n  static hasMany<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ [foreignKey]: self.primaryKey }).toPromiseArray(),\n    });\n  }\n\n  static hasAndBelongsToMany<T extends ActiveRecord$Base = any>(relationName, klass: Function) {\n    const foreignKeysFn = (self: T) => {\n      const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n        this.name,\n        klass.name,\n        'array'\n      );\n      return tables.reduce((acc, pair) => {\n        if (pair[0] == self.primaryKey) {\n          acc.push(pair[1]);\n        }\n        return acc;\n      }, []);\n    };\n\n    IntermediateTable.create(this.name, klass.name, []);\n    Registry.create(this.name, Association.hasAndBelongsToMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ primaryKey: foreignKeysFn(self) }).toPromiseArray(),\n    });\n  }\n\n  hasAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameLeft,\n      'array'\n    );\n\n    if (Array.isArray(tables)) {\n      IntermediateTable.create(klassNameLeft, klassNameRight, [\n        [this.primaryKey, record.primaryKey],\n      ]);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }\n\n  releaseAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const beforeIntermediateTable = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameRight\n    );\n\n    if (Array.isArray(beforeIntermediateTable)) {\n      let leavedData = [];\n      let deleteData = [];\n      beforeIntermediateTable.forEach((pair) => {\n        if (this.primaryKey == pair[0] && record.primaryKey == pair[1]) {\n          deleteData.push(pair);\n        } else {\n          leavedData.push(pair);\n        }\n      });\n      IntermediateTable.update(klassNameLeft, klassNameRight, leavedData);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }\n\n  static _defineAssociations<T extends ActiveRecord$Base = any>(self: T) {\n    const allAssociations = Registry.data[self.constructor.name];\n    if (allAssociations == undefined) return;\n\n    Object.keys(allAssociations).forEach((associationName: string) => {\n      const relationData = allAssociations[associationName];\n\n      Object.keys(relationData).forEach((relationName: string) => {\n        const relationFn = relationData[relationName];\n\n        Object.defineProperty(self, relationName, {\n          enumerable: true,\n          configurable: false,\n          value: () => relationFn(self),\n        });\n      });\n    });\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mPrimaryKey\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mbelongsTo\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mbelongsTo\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasOne\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'array'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m tables\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m pair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasAndBelongsToMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtables\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m beforeIntermediateTable \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameRight\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mbeforeIntermediateTable\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      beforeIntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116m_defineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allAssociations \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mallAssociations \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mallAssociations\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relationData \u001b[38;2;248;248;242m=\u001b[39m allAssociations\u001b[38;2;248;248;242m[\u001b[39massociationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m relationFn \u001b[38;2;248;248;242m=\u001b[39m relationData\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m,\u001b[39m relationName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          enumerable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          configurable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;230;219;116mvalue\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        23,
        159
      ]
    },
    "static": {
      "belongsTo": {
        "text": "static belongsTo<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: string\n  ) {\n    Registry.create(this.name, Association.belongsTo, {\n      [relationName]: (self: T) => (klass as any).findBy({ primaryKey: self[foreignKey] }),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mbelongsTo\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mbelongsTo\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          26,
          34
        ]
      },
      "hasOne": {
        "text": "static hasOne<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasOne, {\n      [relationName]: (self: T) => (klass as any).findBy({ [foreignKey]: self.primaryKey }),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasOne\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasOne\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          36,
          44
        ]
      },
      "hasMany": {
        "text": "static hasMany<T extends ActiveRecord$Base = any>(\n    relationName: string,\n    klass: Function,\n    foreignKey: t.ForeignKey\n  ) {\n    Registry.create(this.name, Association.hasMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ [foreignKey]: self.primaryKey }).toPromiseArray(),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    relationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    foreignKey\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey\n  \u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mforeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          46,
          55
        ]
      },
      "hasAndBelongsToMany": {
        "text": "static hasAndBelongsToMany<T extends ActiveRecord$Base = any>(relationName, klass: Function) {\n    const foreignKeysFn = (self: T) => {\n      const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n        this.name,\n        klass.name,\n        'array'\n      );\n      return tables.reduce((acc, pair) => {\n        if (pair[0] == self.primaryKey) {\n          acc.push(pair[1]);\n        }\n        return acc;\n      }, []);\n    };\n\n    IntermediateTable.create(this.name, klass.name, []);\n    Registry.create(this.name, Association.hasAndBelongsToMany, {\n      [relationName]: (self: T) =>\n        (klass as any).where({ primaryKey: foreignKeysFn(self) }).toPromiseArray(),\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;166;226;46m'array'\u001b[39m\n      \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m tables\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m pair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m self\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m Association\u001b[38;2;248;248;242m.\u001b[39mhasAndBelongsToMany\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        \u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m primaryKey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;230;219;116mforeignKeysFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          57,
          77
        ]
      },
      "_defineAssociations": {
        "text": "static _defineAssociations<T extends ActiveRecord$Base = any>(self: T) {\n    const allAssociations = Registry.data[self.constructor.name];\n    if (allAssociations == undefined) return;\n\n    Object.keys(allAssociations).forEach((associationName: string) => {\n      const relationData = allAssociations[associationName];\n\n      Object.keys(relationData).forEach((relationName: string) => {\n        const relationFn = relationData[relationName];\n\n        Object.defineProperty(self, relationName, {\n          enumerable: true,\n          configurable: false,\n          value: () => relationFn(self),\n        });\n      });\n    });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116m_defineAssociations\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allAssociations \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mself\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mallAssociations \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mallAssociations\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39massociationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relationData \u001b[38;2;248;248;242m=\u001b[39m allAssociations\u001b[38;2;248;248;242m[\u001b[39massociationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelationName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m relationFn \u001b[38;2;248;248;242m=\u001b[39m relationData\u001b[38;2;248;248;242m[\u001b[39mrelationName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mdefineProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m,\u001b[39m relationName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          enumerable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          configurable\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;230;219;116mvalue\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;230;219;116mrelationFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          141,
          158
        ]
      }
    },
    "instance": {
      "hasAndBelongsToMany": {
        "text": "hasAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const tables = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameLeft,\n      'array'\n    );\n\n    if (Array.isArray(tables)) {\n      IntermediateTable.create(klassNameLeft, klassNameRight, [\n        [this.primaryKey, record.primaryKey],\n      ]);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mhasAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m tables \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;166;226;46m'array'\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtables\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\n        \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          57,
          77
        ]
      },
      "releaseAndBelongsToMany": {
        "text": "releaseAndBelongsToMany<T extends ActiveRecord$Base = any>(\n    record: T\n  ): { [key: string]: t.ForeignKey } {\n    const klassNameLeft = this.constructor.name;\n    const klassNameRight = record.constructor.name;\n\n    const beforeIntermediateTable = IntermediateTable.read<[t.ForeignKey, t.ForeignKey][]>(\n      klassNameLeft,\n      klassNameRight\n    );\n\n    if (Array.isArray(beforeIntermediateTable)) {\n      let leavedData = [];\n      let deleteData = [];\n      beforeIntermediateTable.forEach((pair) => {\n        if (this.primaryKey == pair[0] && record.primaryKey == pair[1]) {\n          deleteData.push(pair);\n        } else {\n          leavedData.push(pair);\n        }\n      });\n      IntermediateTable.update(klassNameLeft, klassNameRight, leavedData);\n      return { [klassNameLeft]: this.primaryKey, [klassNameRight]: record.primaryKey };\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY,\n        params: {\n          klassNameLeft,\n          klassNameRight,\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mreleaseAndBelongsToMany\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mForeignKey \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameLeft \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassNameRight \u001b[38;2;248;248;242m=\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m beforeIntermediateTable \u001b[38;2;248;248;242m=\u001b[39m IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m t\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mForeignKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n      klassNameRight\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mbeforeIntermediateTable\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      beforeIntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m==\u001b[39m pair\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpair\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      IntermediateTable\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassNameLeft\u001b[38;2;248;248;242m,\u001b[39m klassNameRight\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameLeft\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprimaryKey\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mklassNameRight\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m record\u001b[38;2;248;248;242m.\u001b[39mprimaryKey \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_DO_NOT_HAVE_HAS_AND_BELONGS_TO_MANY\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          klassNameLeft\u001b[38;2;248;248;242m,\u001b[39m\n          klassNameRight\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          107,
          139
        ]
      }
    }
  },
  "ActiveRecord$Associations$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/impl.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "interface ActiveRecord$Associations$Impl {}",
      "highlightText": "\u001b[38;2;102;217;239minterface\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        21,
        21
      ]
    }
  },
  "ActiveRecord$FinderMethods": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/finder_methods/core.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$FinderMethods extends RueModule {\n  static findBy<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    params: Partial<U>\n  ): Promise<T> {\n    // @ts-ignore\n    return (this as typeof ActiveRecord$Base)\n      .where<T>(params)\n      .toPromiseArray()\n      .then((records) => {\n        if (records.length > 0) {\n          return Promise.resolve(records[0]);\n        } else {\n          return Promise.resolve(undefined);\n        }\n      });\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$FinderMethods\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        8,
        24
      ]
    },
    "static": {
      "findBy": {
        "text": "static findBy<T extends ActiveRecord$Base, U = { [key: string]: any }>(\n    params: Partial<U>\n  ): Promise<T> {\n    // @ts-ignore\n    return (this as typeof ActiveRecord$Base)\n      .where<T>(params)\n      .toPromiseArray()\n      .then((records) => {\n        if (records.length > 0) {\n          return Promise.resolve(records[0]);\n        } else {\n          return Promise.resolve(undefined);\n        }\n      });\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mfindBy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116mkey\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m:\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n      \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecords\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          9,
          23
        ]
      }
    }
  },
  "ActiveRecord$Persistence": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/persistences/core.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Persistence extends RueModule {\n  static readonly RUE_AUTO_INCREMENT_RECORD_ID = '__rue_auto_increment_record_id__';\n  static readonly RUE_RECORD_ID = '__rue_record_id__';\n  static readonly RUE_CREATED_AT = '__rue_created_at__';\n  static readonly RUE_UPDATED_AT = '__rue_updated_at__';\n  static readonly RECORD_ALL = 'all';\n\n  static destroyAll<T extends ActiveRecord$Base>(filter?: (self: T) => boolean): Array<T> {\n    const klassName = this.name;\n    const allData = RecordCache.read<T[]>(klassName, ActiveRecord$Persistence.RECORD_ALL, 'array');\n\n    let leavedData = [];\n    let deleteData = [];\n    allData.forEach((record) => {\n      if (filter) {\n        if (filter(record)) {\n          deleteData.push(record);\n        } else {\n          leavedData.push(record);\n        }\n      } else {\n        deleteData.push(record);\n      }\n    });\n    RecordCache.update(klassName, ActiveRecord$Persistence.RECORD_ALL, leavedData);\n\n    deleteData.forEach((record) => Object.freeze(record));\n    return deleteData;\n  }\n\n  save(opts?: { validate: boolean }): boolean {\n    const {\n      RUE_RECORD_ID,\n      RUE_AUTO_INCREMENT_RECORD_ID,\n      RUE_CREATED_AT,\n      RUE_UPDATED_AT,\n      RECORD_ALL,\n    } = ActiveRecord$Persistence;\n\n    opts = opts == undefined ? { validate: true } : opts;\n    // @ts-ignore\n    const _this = this as ActiveRecord$Base;\n\n    if (!opts.validate || _this.isValid()) {\n      const klassName = this.constructor.name;\n      _ensureRecordCache(klassName);\n\n      const now = dayjs().format();\n      _this[RUE_CREATED_AT] = _this[RUE_CREATED_AT] || now;\n      _this[RUE_UPDATED_AT] = now;\n\n      // do not exists record\n      if (!_this[RUE_RECORD_ID]) {\n        let __record_aid__ = RecordCache.read<number>(\n          klassName,\n          RUE_AUTO_INCREMENT_RECORD_ID,\n          'value'\n        );\n        _this[RUE_RECORD_ID] = __record_aid__;\n        __record_aid__ = __record_aid__ + 1;\n        RecordCache.update(klassName, RUE_AUTO_INCREMENT_RECORD_ID, __record_aid__);\n        RecordCache.create(klassName, RECORD_ALL, [this]);\n      } else {\n        const allRecords = RecordCache.read<ActiveRecord$Base[]>(klassName, RECORD_ALL, 'array');\n        allRecords.forEach((record) => {\n          if (record[RUE_RECORD_ID] === _this[RUE_RECORD_ID]) {\n            // @ts-ignore\n            record = this;\n          }\n        });\n        RecordCache.update(klassName, RECORD_ALL, allRecords);\n      }\n\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  saveOrThrow(): void | boolean {\n    const _this = this as any;\n    if (_this.isValid()) {\n      this.save({ validate: false });\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: _this.inspect(),\n        },\n      });\n    }\n  }\n\n  destroy<T extends ActiveRecord$Base>(): T {\n    const destroyThis = this as any;\n\n    const klassName = this.constructor.name;\n    const allData = RecordCache.read<T[]>(klassName, ActiveRecord$Persistence.RECORD_ALL, 'array');\n    const filteredData = allData.filter(\n      (record) =>\n        record[ActiveRecord$Persistence.RUE_RECORD_ID] !=\n        destroyThis[ActiveRecord$Persistence.RUE_RECORD_ID]\n    );\n\n    _ensureRecordCache(klassName);\n    RecordCache.update(klassName, ActiveRecord$Persistence.RECORD_ALL, filteredData);\n\n    Object.freeze(destroyThis);\n    return destroyThis as T;\n  }\n\n  update<T>(params?: Partial<T>): boolean {\n    const updateProps = (record: ActiveRecord$Base) => {\n      Object.keys(params).forEach((key) => {\n        record[key] = params[key];\n      });\n    };\n\n    // @ts-ignore\n    const _this = this as ActiveRecord$Base;\n    const oldRecord = _clone(_this);\n    updateProps(oldRecord);\n\n    if (oldRecord.isValid()) {\n      updateProps(_this);\n      _this.save({ validate: false });\n      return true;\n    } else {\n      return false;\n    }\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Persistence\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_auto_increment_record_id__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_record_id__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_created_at__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'__rue_updated_at__'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'all'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m deleteData\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m||\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m now \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m now\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m now\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// do not exists record\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m_this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mlet\u001b[39m __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n          klassName\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;166;226;46m'value'\u001b[39m\n        \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m __record_aid__\u001b[38;2;248;248;242m;\u001b[39m\n        __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m __record_aid__ \u001b[38;2;248;248;242m+\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m __record_aid__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m allRecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        allRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n            record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m allRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m destroyThis \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m!=\u001b[39m\n        destroyThis\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m filteredData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdestroyThis\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m destroyThis \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mupdateProps\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m oldRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_clone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        13,
        144
      ]
    },
    "static": {
      "destroyAll": {
        "text": "static destroyAll<T extends ActiveRecord$Base>(filter?: (self: T) => boolean): Array<T> {\n    const klassName = this.name;\n    const allData = RecordCache.read<T[]>(klassName, ActiveRecord$Persistence.RECORD_ALL, 'array');\n\n    let leavedData = [];\n    let deleteData = [];\n    allData.forEach((record) => {\n      if (filter) {\n        if (filter(record)) {\n          deleteData.push(record);\n        } else {\n          leavedData.push(record);\n        }\n      } else {\n        deleteData.push(record);\n      }\n    });\n    RecordCache.update(klassName, ActiveRecord$Persistence.RECORD_ALL, leavedData);\n\n    deleteData.forEach((record) => Object.freeze(record));\n    return deleteData;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mdestroyAll\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mself\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m leavedData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m deleteData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfilter\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          leavedData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m leavedData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    deleteData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m deleteData\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          20,
          41
        ]
      }
    },
    "instance": {
      "save": {
        "text": "save(opts?: { validate: boolean }): boolean {\n    const {\n      RUE_RECORD_ID,\n      RUE_AUTO_INCREMENT_RECORD_ID,\n      RUE_CREATED_AT,\n      RUE_UPDATED_AT,\n      RECORD_ALL,\n    } = ActiveRecord$Persistence;\n\n    opts = opts == undefined ? { validate: true } : opts;\n    // @ts-ignore\n    const _this = this as ActiveRecord$Base;\n\n    if (!opts.validate || _this.isValid()) {\n      const klassName = this.constructor.name;\n      _ensureRecordCache(klassName);\n\n      const now = dayjs().format();\n      _this[RUE_CREATED_AT] = _this[RUE_CREATED_AT] || now;\n      _this[RUE_UPDATED_AT] = now;\n\n      // do not exists record\n      if (!_this[RUE_RECORD_ID]) {\n        let __record_aid__ = RecordCache.read<number>(\n          klassName,\n          RUE_AUTO_INCREMENT_RECORD_ID,\n          'value'\n        );\n        _this[RUE_RECORD_ID] = __record_aid__;\n        __record_aid__ = __record_aid__ + 1;\n        RecordCache.update(klassName, RUE_AUTO_INCREMENT_RECORD_ID, __record_aid__);\n        RecordCache.create(klassName, RECORD_ALL, [this]);\n      } else {\n        const allRecords = RecordCache.read<ActiveRecord$Base[]>(klassName, RECORD_ALL, 'array');\n        allRecords.forEach((record) => {\n          if (record[RUE_RECORD_ID] === _this[RUE_RECORD_ID]) {\n            // @ts-ignore\n            record = this;\n          }\n        });\n        RecordCache.update(klassName, RECORD_ALL, allRecords);\n      }\n\n      return true;\n    } else {\n      return false;\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mopts\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m;\u001b[39m\n\n    opts \u001b[38;2;248;248;242m=\u001b[39m opts \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m opts\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mopts\u001b[38;2;248;248;242m.\u001b[39mvalidate \u001b[38;2;248;248;242m||\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mconst\u001b[39m now \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mdayjs\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mformat\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_CREATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m now\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_UPDATED_AT\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m now\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// do not exists record\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39m_this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mlet\u001b[39m __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;166;226;46mnumber\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n          klassName\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n          \u001b[38;2;166;226;46m'value'\u001b[39m\n        \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m __record_aid__\u001b[38;2;248;248;242m;\u001b[39m\n        __record_aid__ \u001b[38;2;248;248;242m=\u001b[39m __record_aid__ \u001b[38;2;248;248;242m+\u001b[39m \u001b[38;2;174;129;255m1\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_AUTO_INCREMENT_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m __record_aid__\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m allRecords \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mActiveRecord$Base\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        allRecords\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m _this\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n            record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m allRecords\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          43,
          90
        ]
      },
      "saveOrThrow": {
        "text": "saveOrThrow(): void | boolean {\n    const _this = this as any;\n    if (_this.isValid()) {\n      this.save({ validate: false });\n    } else {\n      throw errObj({\n        code: ErrCodes.RECORD_IS_INVALID,\n        params: {\n          inspect: _this.inspect(),\n        },\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116msaveOrThrow\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mvoid\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;230;219;116merrObj\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m\n        code\u001b[38;2;248;248;242m:\u001b[39m ErrCodes\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_IS_INVALID\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        params\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          inspect\u001b[38;2;248;248;242m:\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          92,
          104
        ]
      },
      "destroy": {
        "text": "destroy<T extends ActiveRecord$Base>(): T {\n    const destroyThis = this as any;\n\n    const klassName = this.constructor.name;\n    const allData = RecordCache.read<T[]>(klassName, ActiveRecord$Persistence.RECORD_ALL, 'array');\n    const filteredData = allData.filter(\n      (record) =>\n        record[ActiveRecord$Persistence.RUE_RECORD_ID] !=\n        destroyThis[ActiveRecord$Persistence.RUE_RECORD_ID]\n    );\n\n    _ensureRecordCache(klassName);\n    RecordCache.update(klassName, ActiveRecord$Persistence.RECORD_ALL, filteredData);\n\n    Object.freeze(destroyThis);\n    return destroyThis as T;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m destroyThis \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m allData \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m filteredData \u001b[38;2;248;248;242m=\u001b[39m allData\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n      \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m!=\u001b[39m\n        destroyThis\u001b[38;2;248;248;242m[\u001b[39mActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRUE_RECORD_ID\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;230;219;116m_ensureRecordCache\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m ActiveRecord$Persistence\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m filteredData\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfreeze\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdestroyThis\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m destroyThis \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          106,
          122
        ]
      },
      "update": {
        "text": "update<T>(params?: Partial<T>): boolean {\n    const updateProps = (record: ActiveRecord$Base) => {\n      Object.keys(params).forEach((key) => {\n        record[key] = params[key];\n      });\n    };\n\n    // @ts-ignore\n    const _this = this as ActiveRecord$Base;\n    const oldRecord = _clone(_this);\n    updateProps(oldRecord);\n\n    if (oldRecord.isValid()) {\n      updateProps(_this);\n      _this.save({ validate: false });\n      return true;\n    } else {\n      return false;\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mupdateProps\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        record\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m params\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m oldRecord \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_clone\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39moldRecord\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misValid\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;230;219;116mupdateProps\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m{\u001b[39m validate\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          124,
          143
        ]
      }
    }
  },
  "ActiveRecord$QueryMethods": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/query_methods/core.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$QueryMethods extends RueModule {\n  static where<T extends ActiveRecord$Base, U = wct.WhereParams>(\n    params: Partial<U>\n  ): ActiveRecord$QueryMethods$WhereChain<T> {\n    // @ts-ignore\n    const _this = this as typeof ActiveRecord$Base;\n    // Records cannot be created correctly without lazy evaluation\n    const whereChain = new ActiveRecord$QueryMethods$WhereChain<T>(() => _this.all<T>());\n    return whereChain.where<U>(params);\n  }\n\n  static rewhere<T extends ActiveRecord$Base, U = wct.WhereParams>(\n    params: Partial<U>\n  ): ActiveRecord$QueryMethods$WhereChain<T> {\n    // @ts-ignore\n    const _this = this as typeof ActiveRecord$Base;\n    // Records cannot be created correctly without lazy evaluation\n    const whereChain = new ActiveRecord$QueryMethods$WhereChain<T>(() => _this.all<T>());\n    return whereChain.rewhere<U>(params);\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m wct\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mWhereParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// Records cannot be created correctly without lazy evaluation\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereChain \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m whereChain\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m wct\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mWhereParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// Records cannot be created correctly without lazy evaluation\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereChain \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m whereChain\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        10,
        30
      ]
    },
    "static": {
      "where": {
        "text": "static where<T extends ActiveRecord$Base, U = wct.WhereParams>(\n    params: Partial<U>\n  ): ActiveRecord$QueryMethods$WhereChain<T> {\n    // @ts-ignore\n    const _this = this as typeof ActiveRecord$Base;\n    // Records cannot be created correctly without lazy evaluation\n    const whereChain = new ActiveRecord$QueryMethods$WhereChain<T>(() => _this.all<T>());\n    return whereChain.where<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m wct\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mWhereParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// Records cannot be created correctly without lazy evaluation\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereChain \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m whereChain\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          11,
          19
        ]
      },
      "rewhere": {
        "text": "static rewhere<T extends ActiveRecord$Base, U = wct.WhereParams>(\n    params: Partial<U>\n  ): ActiveRecord$QueryMethods$WhereChain<T> {\n    // @ts-ignore\n    const _this = this as typeof ActiveRecord$Base;\n    // Records cannot be created correctly without lazy evaluation\n    const whereChain = new ActiveRecord$QueryMethods$WhereChain<T>(() => _this.all<T>());\n    return whereChain.rewhere<U>(params);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m,\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m wct\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mWhereParams\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    params\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m ActiveRecord$Base\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;130;146;162m// Records cannot be created correctly without lazy evaluation\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m whereChain \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m whereChain\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          21,
          29
        ]
      }
    }
  },
  "ActiveRecord$Scoping": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/scoping/core.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Scoping extends ActiveRecord$Scoping$Impl {}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Scoping\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Scoping$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        4,
        4
      ]
    }
  },
  "ActiveRecord$Scoping$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/scoping/impl.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Scoping$Impl extends RueModule {\n  static __rue_impl_class__ = ActiveSupport$ImplBase.__rue_impl_class__;\n  // ActiveRecord$Scoping$Named\n  static all: <T extends ActiveRecord$Base>() => Promise<ActiveRecord$Relation<T>>;\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Scoping$Impl\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m __rue_impl_class__ \u001b[38;2;248;248;242m=\u001b[39m ActiveSupport$ImplBase\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;130;146;162m// ActiveRecord$Scoping$Named\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m all\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Base\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        8,
        12
      ]
    }
  },
  "ActiveRecord$Scoping$Named": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/scoping/named.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Scoping$Named extends RueModule {\n  static all<T extends ActiveRecord$Base>(): Promise<ActiveRecord$Relation<T>> {\n    // @ts-ignore\n    const _this = this as ct.Constructor<T>;\n    const klassName = _this.name;\n\n    if (RecordCache.read<T[]>(klassName, RECORD_ALL, 'array').length > 0) {\n      const records = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n      const relation = new ActiveRecord$Relation<T>(_this, records);\n      return Promise.resolve(relation);\n    } else {\n      return new Promise((resolve, reject) => {\n        _this\n          // fetchAll is defined in ActiveRecord $ Base but is protected so I get a typescript error.\n          // @ts-ignore\n          .fetchAll()\n          .then((data) => {\n            const records = data.map((d) => {\n              const record = new _this(d);\n\n              record.save();\n\n              return record;\n            }) as Array<T>;\n\n            const relation = new ActiveRecord$Relation<T>(_this, records);\n            return resolve(relation);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    }\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Scoping$Named\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelation\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        _this\n          \u001b[38;2;130;146;162m// fetchAll is defined in ActiveRecord $ Base but is protected so I get a typescript error.\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m_this\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mconst\u001b[39m relation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelation\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mcatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        12,
        46
      ]
    },
    "static": {
      "all": {
        "text": "static all<T extends ActiveRecord$Base>(): Promise<ActiveRecord$Relation<T>> {\n    // @ts-ignore\n    const _this = this as ct.Constructor<T>;\n    const klassName = _this.name;\n\n    if (RecordCache.read<T[]>(klassName, RECORD_ALL, 'array').length > 0) {\n      const records = RecordCache.read<T[]>(klassName, RECORD_ALL, 'array');\n      const relation = new ActiveRecord$Relation<T>(_this, records);\n      return Promise.resolve(relation);\n    } else {\n      return new Promise((resolve, reject) => {\n        _this\n          // fetchAll is defined in ActiveRecord $ Base but is protected so I get a typescript error.\n          // @ts-ignore\n          .fetchAll()\n          .then((data) => {\n            const records = data.map((d) => {\n              const record = new _this(d);\n\n              record.save();\n\n              return record;\n            }) as Array<T>;\n\n            const relation = new ActiveRecord$Relation<T>(_this, records);\n            return resolve(relation);\n          })\n          .catch((error) => {\n            reject(error);\n          });\n      });\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mall\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _this \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m ct\u001b[38;2;248;248;242m.\u001b[39mConstructor\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m _this\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mRecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m RecordCache\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRECORD_ALL\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m relation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelation\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m\u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresolve\u001b[38;2;248;248;242m,\u001b[39m reject\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        _this\n          \u001b[38;2;130;146;162m// fetchAll is defined in ActiveRecord $ Base but is protected so I get a typescript error.\u001b[39m\n          \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfetchAll\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdata\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m data\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mconst\u001b[39m record \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116m_this\u001b[39m\u001b[38;2;248;248;242m(\u001b[39md\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              record\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msave\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n              \u001b[38;2;102;217;239mreturn\u001b[39m record\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n            \u001b[38;2;102;217;239mconst\u001b[39m relation \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m_this\u001b[38;2;248;248;242m,\u001b[39m records\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelation\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mcatch\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;230;219;116mreject\u001b[39m\u001b[38;2;248;248;242m(\u001b[39merror\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          13,
          45
        ]
      }
    }
  },
  "ActiveRecord$QueryMethods$WhereChain": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/query_methods/where_chain/base.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$QueryMethods$WhereChain<T extends ActiveRecord$Base> {\n  private params: t.WhereParams;\n  private allPromiseFn: () => Promise<ActiveRecord$Relation<T>>;\n\n  constructor(allPromiseFn: () => Promise<ActiveRecord$Relation<T>>) {\n    this.params = {};\n    this.allPromiseFn = allPromiseFn;\n  }\n\n  where<U>(params: Partial<U>): ActiveRecord$QueryMethods$WhereChain<T> {\n    Object.assign(this.params, params);\n    return this;\n  }\n\n  rewhere<U>(params: Partial<U>): ActiveRecord$QueryMethods$WhereChain<T> {\n    this.params = params || {};\n    return this;\n  }\n\n  inspect(): string {\n    const klassName = this.constructor.name;\n    let sorted = {};\n\n    const keys = Object.keys(this).sort();\n    keys.forEach(function (key) {\n      sorted[key] = this[key];\n    }, this);\n\n    return `${klassName} ${JSON.stringify(sorted, null, 2)}`;\n  }\n\n  // First evaluated here\n  toPromiseArray(): Promise<T[]> {\n    return this.allPromiseFn().then((relation: ActiveRecord$Relation<T>) => {\n      const records = relation.toA();\n      const result = records.reduce((acc: Array<T>, record: T) => {\n        const isMatch = Object.keys(this.params)\n          .map((key: string) => {\n            const val = this.params[key];\n            if (Array.isArray(val)) {\n              return val.includes(record[key]);\n            } else {\n              return (record as any)[key] === val;\n            }\n          })\n          .every(Boolean);\n        if (isMatch) acc.push(record);\n        return acc;\n      }, [] as Array<T>);\n      return Promise.resolve(result);\n    });\n  }\n\n  // alias toPromiseArray\n  toPA(): Promise<T[]> {\n    return this.toPromiseArray();\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m params\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mWhereParams\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mprivate\u001b[39m \u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mallPromiseFn \u001b[38;2;248;248;242m=\u001b[39m allPromiseFn\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m params\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m sorted \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m keys \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    keys\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mfunction\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      sorted\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mklassName\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39msorted\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// First evaluated here\u001b[39m\n  \u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelation\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m relation\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m isMatch \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m val \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m val\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misMatch\u001b[38;2;248;248;242m)\u001b[39m acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;130;146;162m// alias toPromiseArray\u001b[39m\n  \u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        8,
        65
      ]
    },
    "instance": {
      "where": {
        "text": "where<U>(params: Partial<U>): ActiveRecord$QueryMethods$WhereChain<T> {\n    Object.assign(this.params, params);\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mwhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m,\u001b[39m params\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          17,
          20
        ]
      },
      "rewhere": {
        "text": "rewhere<U>(params: Partial<U>): ActiveRecord$QueryMethods$WhereChain<T> {\n    this.params = params || {};\n    return this;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mrewhere\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mparams\u001b[38;2;248;248;242m:\u001b[39m Partial\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$QueryMethods$WhereChain\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m params \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          22,
          25
        ]
      },
      "inspect": {
        "text": "inspect(): string {\n    const klassName = this.constructor.name;\n    let sorted = {};\n\n    const keys = Object.keys(this).sort();\n    keys.forEach(function (key) {\n      sorted[key] = this[key];\n    }, this);\n\n    return `${klassName} ${JSON.stringify(sorted, null, 2)}`;\n  }",
        "highlightText": "\u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m sorted \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m keys \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    keys\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mfunction\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      sorted\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mklassName\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39msorted\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          27,
          37
        ]
      },
      "toPromiseArray": {
        "text": "toPromiseArray(): Promise<T[]> {\n    return this.allPromiseFn().then((relation: ActiveRecord$Relation<T>) => {\n      const records = relation.toA();\n      const result = records.reduce((acc: Array<T>, record: T) => {\n        const isMatch = Object.keys(this.params)\n          .map((key: string) => {\n            const val = this.params[key];\n            if (Array.isArray(val)) {\n              return val.includes(record[key]);\n            } else {\n              return (record as any)[key] === val;\n            }\n          })\n          .every(Boolean);\n        if (isMatch) acc.push(record);\n        return acc;\n      }, [] as Array<T>);\n      return Promise.resolve(result);\n    });\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mthen\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrelation\u001b[38;2;248;248;242m:\u001b[39m ActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m records \u001b[38;2;248;248;242m=\u001b[39m relation\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m records\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m record\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m isMatch \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m val \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m val\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mrecord \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mevery\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mBoolean\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misMatch\u001b[38;2;248;248;242m)\u001b[39m acc\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mrecord\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mresolve\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mresult\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          40,
          59
        ]
      },
      "toPA": {
        "text": "toPA(): Promise<T[]> {\n    return this.toPromiseArray();\n  }",
        "highlightText": "\u001b[38;2;230;219;116mtoPA\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mtoPromiseArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          62,
          64
        ]
      }
    },
    "$constructor": {
      "text": "constructor(allPromiseFn: () => Promise<ActiveRecord$Relation<T>>) {\n    this.params = {};\n    this.allPromiseFn = allPromiseFn;\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mallPromiseFn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;166;226;46mPromise\u001b[39m\u001b[38;2;248;248;242m<\u001b[39mActiveRecord$Relation\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mparams \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mallPromiseFn \u001b[38;2;248;248;242m=\u001b[39m allPromiseFn\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        12,
        15
      ]
    }
  },
  "ActiveRecord$Associations$CollectionProxy": {
    "metadata": {
      "filepath": "@rue/packages/activerecord/src/records/modules/associations/modules/collection_proxy/core.ts",
      "updatedAt": "2021/03/06 12:51:26 +09:00"
    },
    "class": {
      "text": "export class ActiveRecord$Associations$CollectionProxy extends RueModule {\n  static scope<T extends ActiveRecord$Base>(scopeName: string, fn: (...args) => t.ScopeVal<T>) {\n    Registry.create(this.name, 'scope', {\n      [scopeName]: fn,\n    });\n    _resolveScopes(this);\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveRecord$Associations$CollectionProxy\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39margs\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeVal\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'scope'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mscopeName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m fn\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116m_resolveScopes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        13,
        20
      ]
    },
    "static": {
      "scope": {
        "text": "static scope<T extends ActiveRecord$Base>(scopeName: string, fn: (...args) => t.ScopeVal<T>) {\n    Registry.create(this.name, 'scope', {\n      [scopeName]: fn,\n    });\n    _resolveScopes(this);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mscope\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m ActiveRecord$Base\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mscopeName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;230;219;116mfn\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39margs\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mScopeVal\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'scope'\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;248;248;242m[\u001b[39mscopeName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m fn\u001b[38;2;248;248;242m,\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;230;219;116m_resolveScopes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          14,
          19
        ]
      }
    }
  },
  "RueModule": {
    "metadata": {
      "filepath": "@rue/packages/activesupport/src/modules/base.ts",
      "updatedAt": "2021/03/06 12:51:12 +09:00"
    },
    "class": {
      "text": "export abstract class RueModule {\n  static readonly RUE_MODULE = RUE_MODULE;\n  static readonly RUE_IMPL_CLASS = RUE_IMPL_CLASS;\n  static readonly RUE_DESCRIPTION = RUE_DESCRIPTION;\n\n  static readonly __rue_module__ = true;\n  static readonly __rue_description__ = `\nThis is Rue Module(~ abstract class).\nRun 'RueModule.prototype' or 'Object.keys(RueModule)' and so on to see more details.\nIt has the following as internal static properties.\n\n__rue_module__ = true (readonly)`;\n\n  constructor() {\n    // RueModule description for display\n    `\nThis is Rue Module(~ abstract class).\nRun 'RueModule.prototype' or 'Object.keys(RueModule)' and so on to see more details.\nIt has the following as internal static properties.\n\n__rue_module__ = true (readonly)`;\n\n    throw `Could not create ${this.constructor.name} instance. Cause: ${this.constructor.name} is RueModule (~ abstract class)`;\n  }\n\n  static rueModuleIncludedFrom<T extends Function>(klass: T, opts: t.RueModuleOptions) {\n    if (this.__rue_module__) {\n      // Update Rue Ancestor Chain\n      updateRueAncestorChain(klass, this);\n\n      Object.keys(Object.getOwnPropertyDescriptors(this.prototype)).forEach((methodName) => {\n        if (opts && opts.only && opts.only.includes(methodName)) {\n          if (methodName != 'constructor') klass.prototype[methodName] = this.prototype[methodName];\n        }\n      });\n\n      // If the prototype of the Impl class is used, the methods implemented in the Impl class are also inherited.\n      const maybeImpl = Object.getPrototypeOf(this);\n      if (maybeImpl && maybeImpl.__rue_impl_class__) {\n        Object.keys(Object.getOwnPropertyDescriptors(maybeImpl.prototype)).forEach((methodName) => {\n          if (opts && opts.only && opts.only.includes(methodName)) {\n            if (methodName != 'constructor')\n              klass.prototype[methodName] = maybeImpl.prototype[methodName];\n          }\n        });\n      }\n    } else {\n      throw 'rueModuleIncludedFrom';\n    }\n  }\n\n  static rueModuleExtendedFrom<T extends Function>(klass: T, opts: t.RueModuleOptions) {\n    if (this.__rue_module__) {\n      // Update Rue Ancestor Chain\n      updateRueAncestorChain(klass, this);\n\n      Object.keys(Object.getOwnPropertyDescriptors(this)).forEach((methodName) => {\n        if (opts && opts.only && opts.only.includes(methodName)) {\n          if (methodName != 'name') klass[methodName] = this[methodName];\n        }\n      });\n\n      // If the prototype of the Impl class is used, the methods implemented in the Impl class are also inherited.\n      const maybeImpl = Object.getPrototypeOf(this);\n      if (maybeImpl && maybeImpl.__rue_impl_class__) {\n        Object.keys(Object.getOwnPropertyDescriptors(maybeImpl)).forEach((methodName) => {\n          if (opts && opts.only && opts.only.includes(methodName)) {\n            if (methodName != 'name') klass[methodName] = maybeImpl[methodName];\n          }\n        });\n      }\n    } else {\n      throw 'rueModuleExtendedFrom';\n    }\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mabstract\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_MODULE\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;249;38;114mRUE_MODULE\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m \u001b[38;2;249;38;114mRUE_DESCRIPTION\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;249;38;114mRUE_DESCRIPTION\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m __rue_module__ \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;102;217;239mreadonly\u001b[39m __rue_description__ \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m\u001b[39m\n\u001b[38;2;166;226;46mThis is Rue Module(~ abstract class).\u001b[39m\n\u001b[38;2;166;226;46mRun 'RueModule.prototype' or 'Object.keys(RueModule)' and so on to see more details.\u001b[39m\n\u001b[38;2;166;226;46mIt has the following as internal static properties.\u001b[39m\n\u001b[38;2;166;226;46m\u001b[39m\n\u001b[38;2;166;226;46m__rue_module__ = true (readonly)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// RueModule description for display\u001b[39m\n    \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m\u001b[39m\n\u001b[38;2;166;226;46mThis is Rue Module(~ abstract class).\u001b[39m\n\u001b[38;2;166;226;46mRun 'RueModule.prototype' or 'Object.keys(RueModule)' and so on to see more details.\u001b[39m\n\u001b[38;2;166;226;46mIt has the following as internal static properties.\u001b[39m\n\u001b[38;2;166;226;46m\u001b[39m\n\u001b[38;2;166;226;46m__rue_module__ = true (readonly)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould not create \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m instance. Cause: \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m is RueModule (~ abstract class)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mrueModuleIncludedFrom\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleOptions\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m__rue_module__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// Update Rue Ancestor Chain\u001b[39m\n      \u001b[38;2;230;219;116mupdateRueAncestorChain\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmethodName \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'constructor'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// If the prototype of the Impl class is used, the methods implemented in the Impl class are also inherited.\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m maybeImpl \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetPrototypeOf\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmaybeImpl \u001b[38;2;248;248;242m&&\u001b[39m maybeImpl\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmaybeImpl\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmethodName \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'constructor'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n              klass\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m maybeImpl\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m'rueModuleIncludedFrom'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mrueModuleExtendedFrom\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleOptions\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m__rue_module__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// Update Rue Ancestor Chain\u001b[39m\n      \u001b[38;2;230;219;116mupdateRueAncestorChain\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmethodName \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m klass\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// If the prototype of the Impl class is used, the methods implemented in the Impl class are also inherited.\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m maybeImpl \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetPrototypeOf\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmaybeImpl \u001b[38;2;248;248;242m&&\u001b[39m maybeImpl\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmaybeImpl\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmethodName \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m klass\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m maybeImpl\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m'rueModuleExtendedFrom'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        12,
        87
      ]
    },
    "static": {
      "rueModuleIncludedFrom": {
        "text": "static rueModuleIncludedFrom<T extends Function>(klass: T, opts: t.RueModuleOptions) {\n    if (this.__rue_module__) {\n      // Update Rue Ancestor Chain\n      updateRueAncestorChain(klass, this);\n\n      Object.keys(Object.getOwnPropertyDescriptors(this.prototype)).forEach((methodName) => {\n        if (opts && opts.only && opts.only.includes(methodName)) {\n          if (methodName != 'constructor') klass.prototype[methodName] = this.prototype[methodName];\n        }\n      });\n\n      // If the prototype of the Impl class is used, the methods implemented in the Impl class are also inherited.\n      const maybeImpl = Object.getPrototypeOf(this);\n      if (maybeImpl && maybeImpl.__rue_impl_class__) {\n        Object.keys(Object.getOwnPropertyDescriptors(maybeImpl.prototype)).forEach((methodName) => {\n          if (opts && opts.only && opts.only.includes(methodName)) {\n            if (methodName != 'constructor')\n              klass.prototype[methodName] = maybeImpl.prototype[methodName];\n          }\n        });\n      }\n    } else {\n      throw 'rueModuleIncludedFrom';\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mrueModuleIncludedFrom\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleOptions\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m__rue_module__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// Update Rue Ancestor Chain\u001b[39m\n      \u001b[38;2;230;219;116mupdateRueAncestorChain\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmethodName \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'constructor'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m klass\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// If the prototype of the Impl class is used, the methods implemented in the Impl class are also inherited.\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m maybeImpl \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetPrototypeOf\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmaybeImpl \u001b[38;2;248;248;242m&&\u001b[39m maybeImpl\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmaybeImpl\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmethodName \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'constructor'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n              klass\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m maybeImpl\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m'rueModuleIncludedFrom'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          37,
          61
        ]
      },
      "rueModuleExtendedFrom": {
        "text": "static rueModuleExtendedFrom<T extends Function>(klass: T, opts: t.RueModuleOptions) {\n    if (this.__rue_module__) {\n      // Update Rue Ancestor Chain\n      updateRueAncestorChain(klass, this);\n\n      Object.keys(Object.getOwnPropertyDescriptors(this)).forEach((methodName) => {\n        if (opts && opts.only && opts.only.includes(methodName)) {\n          if (methodName != 'name') klass[methodName] = this[methodName];\n        }\n      });\n\n      // If the prototype of the Impl class is used, the methods implemented in the Impl class are also inherited.\n      const maybeImpl = Object.getPrototypeOf(this);\n      if (maybeImpl && maybeImpl.__rue_impl_class__) {\n        Object.keys(Object.getOwnPropertyDescriptors(maybeImpl)).forEach((methodName) => {\n          if (opts && opts.only && opts.only.includes(methodName)) {\n            if (methodName != 'name') klass[methodName] = maybeImpl[methodName];\n          }\n        });\n      }\n    } else {\n      throw 'rueModuleExtendedFrom';\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mrueModuleExtendedFrom\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;102;217;239mextends\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m opts\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleOptions\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m__rue_module__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;130;146;162m// Update Rue Ancestor Chain\u001b[39m\n      \u001b[38;2;230;219;116mupdateRueAncestorChain\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmethodName \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m klass\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;130;146;162m// If the prototype of the Impl class is used, the methods implemented in the Impl class are also inherited.\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m maybeImpl \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetPrototypeOf\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmaybeImpl \u001b[38;2;248;248;242m&&\u001b[39m maybeImpl\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmaybeImpl\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mopts \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly \u001b[38;2;248;248;242m&&\u001b[39m opts\u001b[38;2;248;248;242m.\u001b[39monly\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mmethodName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mmethodName \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m klass\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m maybeImpl\u001b[38;2;248;248;242m[\u001b[39mmethodName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m'rueModuleExtendedFrom'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          63,
          86
        ]
      }
    },
    "$constructor": {
      "text": "constructor() {\n    // RueModule description for display\n    `\nThis is Rue Module(~ abstract class).\nRun 'RueModule.prototype' or 'Object.keys(RueModule)' and so on to see more details.\nIt has the following as internal static properties.\n\n__rue_module__ = true (readonly)`;\n\n    throw `Could not create ${this.constructor.name} instance. Cause: ${this.constructor.name} is RueModule (~ abstract class)`;\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;130;146;162m// RueModule description for display\u001b[39m\n    \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46m\u001b[39m\n\u001b[38;2;166;226;46mThis is Rue Module(~ abstract class).\u001b[39m\n\u001b[38;2;166;226;46mRun 'RueModule.prototype' or 'Object.keys(RueModule)' and so on to see more details.\u001b[39m\n\u001b[38;2;166;226;46mIt has the following as internal static properties.\u001b[39m\n\u001b[38;2;166;226;46m\u001b[39m\n\u001b[38;2;166;226;46m__rue_module__ = true (readonly)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mthrow\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;166;226;46mCould not create \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m instance. Cause: \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m is RueModule (~ abstract class)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        25,
        35
      ]
    }
  },
  "RueModuleAncestorController": {
    "metadata": {
      "filepath": "@rue/packages/activesupport/src/modules/base.ts",
      "updatedAt": "2021/03/06 12:51:12 +09:00"
    },
    "class": {
      "text": "export class RueModuleAncestorController {\n  public klass: RueModule;\n  public data: t.RueModuleAncestors;\n\n  constructor(klass: RueModule) {\n    this.klass = klass;\n    this.data = Registry.read<t.RueModuleAncestors>(this.klass['name'], RUE_ANCESTORS, 'array');\n  }\n\n  create(val: t.RueModuleAncestors) {\n    Registry.create(this.klass['name'], RUE_ANCESTORS, val);\n    this.data = val;\n  }\n\n  update(val: t.RueModuleAncestors) {\n    Registry.update(this.klass['name'], RUE_ANCESTORS, val);\n    this.data = Registry.read<t.RueModuleAncestors>(this.klass['name'], RUE_ANCESTORS, 'array');\n  }\n\n  ancestors(): t.RueModuleAncestors {\n    const _getAncestors = (\n      klass: RueModule,\n      result: t.RueModuleAncestors[]\n    ): t.RueModuleAncestors[] => {\n      const controller = new RueModuleAncestorController(klass);\n      if (!result.includes(klass as any)) result.push(klass as any);\n\n      controller.data.forEach((childKlass) => {\n        if (childKlass != Object) {\n          const childAncestors = _getAncestors(childKlass, result);\n          childAncestors.forEach((ancestor) => {\n            if (!result.includes(ancestor)) result.push(ancestor);\n          });\n        }\n      });\n\n      return result;\n    };\n\n    let result = [];\n    return _getAncestors(this.klass, result);\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mRueModuleAncestorController\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m klass\u001b[38;2;248;248;242m:\u001b[39m RueModule\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m data\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m:\u001b[39m RueModule\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass \u001b[38;2;248;248;242m=\u001b[39m klass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRueModuleAncestors\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_ANCESTORS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_ANCESTORS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m val\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_ANCESTORS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m val\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRueModuleAncestors\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_ANCESTORS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mancestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _getAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      klass\u001b[38;2;248;248;242m:\u001b[39m RueModule\u001b[38;2;248;248;242m,\u001b[39m\n      result\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m controller \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mRueModuleAncestorController\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      controller\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildKlass\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mchildKlass \u001b[38;2;248;248;242m!=\u001b[39m Object\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m childAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildKlass\u001b[38;2;248;248;242m,\u001b[39m result\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          childAncestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m,\u001b[39m result\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        89,
        131
      ]
    },
    "instance": {
      "create": {
        "text": "create(val: t.RueModuleAncestors) {\n    Registry.create(this.klass['name'], RUE_ANCESTORS, val);\n    this.data = val;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_ANCESTORS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m val\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          98,
          101
        ]
      },
      "update": {
        "text": "update(val: t.RueModuleAncestors) {\n    Registry.update(this.klass['name'], RUE_ANCESTORS, val);\n    this.data = Registry.read<t.RueModuleAncestors>(this.klass['name'], RUE_ANCESTORS, 'array');\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_ANCESTORS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m val\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRueModuleAncestors\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_ANCESTORS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          103,
          106
        ]
      },
      "ancestors": {
        "text": "ancestors(): t.RueModuleAncestors {\n    const _getAncestors = (\n      klass: RueModule,\n      result: t.RueModuleAncestors[]\n    ): t.RueModuleAncestors[] => {\n      const controller = new RueModuleAncestorController(klass);\n      if (!result.includes(klass as any)) result.push(klass as any);\n\n      controller.data.forEach((childKlass) => {\n        if (childKlass != Object) {\n          const childAncestors = _getAncestors(childKlass, result);\n          childAncestors.forEach((ancestor) => {\n            if (!result.includes(ancestor)) result.push(ancestor);\n          });\n        }\n      });\n\n      return result;\n    };\n\n    let result = [];\n    return _getAncestors(this.klass, result);\n  }",
        "highlightText": "\u001b[38;2;230;219;116mancestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m _getAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\n      klass\u001b[38;2;248;248;242m:\u001b[39m RueModule\u001b[38;2;248;248;242m,\u001b[39m\n      result\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\n    \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRueModuleAncestors\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m controller \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mRueModuleAncestorController\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      controller\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildKlass\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mchildKlass \u001b[38;2;248;248;242m!=\u001b[39m Object\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m childAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildKlass\u001b[38;2;248;248;242m,\u001b[39m result\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          childAncestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mresult\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m result\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m result\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m result \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m,\u001b[39m result\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          108,
          130
        ]
      }
    },
    "$constructor": {
      "text": "constructor(klass: RueModule) {\n    this.klass = klass;\n    this.data = Registry.read<t.RueModuleAncestors>(this.klass['name'], RUE_ANCESTORS, 'array');\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklass\u001b[38;2;248;248;242m:\u001b[39m RueModule\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass \u001b[38;2;248;248;242m=\u001b[39m klass\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata \u001b[38;2;248;248;242m=\u001b[39m Registry\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116mt\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mRueModuleAncestors\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mklass\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_ANCESTORS\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        93,
        96
      ]
    }
  },
  "ActiveSupport$Registry$Base": {
    "metadata": {
      "filepath": "@rue/packages/activesupport/src/registries/base.ts",
      "updatedAt": "2021/03/06 12:51:12 +09:00"
    },
    "class": {
      "text": "export class ActiveSupport$Registry$Base<T> {\n  public registryName: string;\n  public data: t.RegistryData<T>;\n\n  constructor(registryName: string) {\n    this.registryName = registryName;\n    this.data = {} as t.RegistryData<T>;\n  }\n\n  create(klassName: string, key: string, val: t.RegistryValue) {\n    if (Array.isArray(val)) {\n      this.ensure(klassName, key, 'array');\n      this.data[klassName][key].push(...val);\n    } else if (typeof val === 'object' && val != null) {\n      this.ensure(klassName, key, 'object');\n      Object.keys(val).forEach((dataKey) => {\n        const dataValue = val[dataKey];\n        this.data[klassName][key][dataKey] = dataValue;\n      });\n    } else {\n      this.ensure(klassName, key, 'value');\n      this.data[klassName][key] = val;\n    }\n  }\n\n  update(klassName: string, key: string, val: t.RegistryValue) {\n    if (Array.isArray(val)) {\n      this.ensure(klassName, key, 'array');\n      const beforeRegistryData = this.data[klassName][key];\n      this.data[klassName][key].splice(0, beforeRegistryData.length, ...val);\n    } else if (typeof val === 'object' && val != null) {\n      this.ensure(klassName, key, 'object');\n      Object.keys(val).forEach((dataKey) => {\n        const dataValue = val[dataKey];\n        this.data[klassName][key][dataKey] = dataValue;\n      });\n    } else {\n      this.ensure(klassName, key, 'value');\n      this.data[klassName][key] = val;\n    }\n  }\n\n  read<U>(klassName: string, key: string, ensureType?: t.RegistryType): U {\n    if (ensureType) this.ensure(klassName, key, ensureType);\n    if (this.data[klassName] == undefined) return undefined;\n    return this.data[klassName][key];\n  }\n\n  destroy(klassName: string) {\n    this.data[klassName] = {} as T;\n  }\n\n  private ensure(klassName, key: string, type: t.RegistryType) {\n    if (this.data[klassName] == undefined) {\n      this.data[klassName] = {} as T;\n    }\n\n    if (this.data[klassName][key] == undefined) {\n      if (type == 'array') {\n        this.data[klassName][key] = [];\n      } else if (type == 'object') {\n        this.data[klassName][key] = {};\n      } else if (type == 'value') {\n        this.data[klassName][key] = undefined;\n      }\n    }\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveSupport$Registry$Base\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m registryName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;102;217;239mpublic\u001b[39m data\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryData\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n  \u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mregistryName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mregistryName \u001b[38;2;248;248;242m=\u001b[39m registryName\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryData\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m val\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryValue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m val \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m val \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdataKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m dataValue \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m[\u001b[39mdataKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mdataKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m dataValue\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'value'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m val\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryValue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m beforeRegistryData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msplice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m beforeRegistryData\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m...\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m val \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m val \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdataKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m dataValue \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m[\u001b[39mdataKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mdataKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m dataValue\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'value'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m ensureType\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryType\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mensureType\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m ensureType\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mprivate\u001b[39m \u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mtype\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryType\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtype\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtype\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtype\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;166;226;46m'value'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        4,
        71
      ]
    },
    "instance": {
      "create": {
        "text": "create(klassName: string, key: string, val: t.RegistryValue) {\n    if (Array.isArray(val)) {\n      this.ensure(klassName, key, 'array');\n      this.data[klassName][key].push(...val);\n    } else if (typeof val === 'object' && val != null) {\n      this.ensure(klassName, key, 'object');\n      Object.keys(val).forEach((dataKey) => {\n        const dataValue = val[dataKey];\n        this.data[klassName][key][dataKey] = dataValue;\n      });\n    } else {\n      this.ensure(klassName, key, 'value');\n      this.data[klassName][key] = val;\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mcreate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m val\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryValue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m...\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m val \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m val \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdataKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m dataValue \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m[\u001b[39mdataKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mdataKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m dataValue\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'value'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          13,
          27
        ]
      },
      "update": {
        "text": "update(klassName: string, key: string, val: t.RegistryValue) {\n    if (Array.isArray(val)) {\n      this.ensure(klassName, key, 'array');\n      const beforeRegistryData = this.data[klassName][key];\n      this.data[klassName][key].splice(0, beforeRegistryData.length, ...val);\n    } else if (typeof val === 'object' && val != null) {\n      this.ensure(klassName, key, 'object');\n      Object.keys(val).forEach((dataKey) => {\n        const dataValue = val[dataKey];\n        this.data[klassName][key][dataKey] = dataValue;\n      });\n    } else {\n      this.ensure(klassName, key, 'value');\n      this.data[klassName][key] = val;\n    }\n  }",
        "highlightText": "\u001b[38;2;230;219;116mupdate\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m val\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryValue\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46mArray\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116misArray\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m beforeRegistryData \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msplice\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m beforeRegistryData\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m...\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m val \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m val \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mval\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdataKey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mconst\u001b[39m dataValue \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m[\u001b[39mdataKey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mdataKey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m dataValue\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;166;226;46m'value'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m val\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          29,
          44
        ]
      },
      "read": {
        "text": "read<U>(klassName: string, key: string, ensureType?: t.RegistryType): U {\n    if (ensureType) this.ensure(klassName, key, ensureType);\n    if (this.data[klassName] == undefined) return undefined;\n    return this.data[klassName][key];\n  }",
        "highlightText": "\u001b[38;2;230;219;116mread\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mU\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m ensureType\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryType\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mU\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mensureType\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m,\u001b[39m ensureType\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          46,
          50
        ]
      },
      "destroy": {
        "text": "destroy(klassName: string) {\n    this.data[klassName] = {} as T;\n  }",
        "highlightText": "\u001b[38;2;230;219;116mdestroy\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          52,
          54
        ]
      },
      "ensure": {
        "text": "private ensure(klassName, key: string, type: t.RegistryType) {\n    if (this.data[klassName] == undefined) {\n      this.data[klassName] = {} as T;\n    }\n\n    if (this.data[klassName][key] == undefined) {\n      if (type == 'array') {\n        this.data[klassName][key] = [];\n      } else if (type == 'object') {\n        this.data[klassName][key] = {};\n      } else if (type == 'value') {\n        this.data[klassName][key] = undefined;\n      }\n    }\n  }",
        "highlightText": "\u001b[38;2;102;217;239mprivate\u001b[39m \u001b[38;2;230;219;116mensure\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mklassName\u001b[38;2;248;248;242m,\u001b[39m key\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mtype\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryType\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtype\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;166;226;46m'array'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtype\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtype\u001b[39m \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;166;226;46m'value'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m[\u001b[39mklassName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "private",
        "line": [
          56,
          70
        ]
      }
    },
    "$constructor": {
      "text": "constructor(registryName: string) {\n    this.registryName = registryName;\n    this.data = {} as t.RegistryData<T>;\n  }",
      "highlightText": "\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mregistryName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mregistryName \u001b[38;2;248;248;242m=\u001b[39m registryName\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mdata \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mRegistryData\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        8,
        11
      ]
    }
  },
  "ActiveSupport$Base": {
    "metadata": {
      "filepath": "@rue/packages/activesupport/src/supports/base.ts",
      "updatedAt": "2021/03/06 12:51:12 +09:00"
    },
    "class": {
      "text": "export class ActiveSupport$Base extends ActiveSupport$Impl {\n  static inspect(instance: any): string {\n    const klassName = instance.constructor.name;\n    let sorted = {};\n\n    const keys = Object.keys(instance).sort();\n    keys.forEach(function (key) {\n      sorted[key] = this[key];\n    }, instance);\n\n    return `${klassName} ${JSON.stringify(sorted, null, 2)}`;\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveSupport$Base\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mActiveSupport$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39minstance\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m instance\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m sorted \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m keys \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39minstance\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    keys\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mfunction\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      sorted\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m instance\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mklassName\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39msorted\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        4,
        16
      ]
    },
    "static": {
      "inspect": {
        "text": "static inspect(instance: any): string {\n    const klassName = instance.constructor.name;\n    let sorted = {};\n\n    const keys = Object.keys(instance).sort();\n    keys.forEach(function (key) {\n      sorted[key] = this[key];\n    }, instance);\n\n    return `${klassName} ${JSON.stringify(sorted, null, 2)}`;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116minspect\u001b[39m\u001b[38;2;248;248;242m(\u001b[39minstance\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m klassName \u001b[38;2;248;248;242m=\u001b[39m instance\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mname\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m sorted \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m keys \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39minstance\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116msort\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    keys\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mfunction\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mkey\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      sorted\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mkey\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m instance\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mklassName\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m \u001b[39m\u001b[38;2;248;248;242m${\u001b[39m\u001b[38;2;249;38;114mJSON\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstringify\u001b[39m\u001b[38;2;248;248;242m(\u001b[39msorted\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;174;129;255m2\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          5,
          15
        ]
      }
    }
  },
  "ActiveSupport$ImplBase": {
    "metadata": {
      "filepath": "@rue/packages/activesupport/src/supports/impl.ts",
      "updatedAt": "2021/03/06 12:51:12 +09:00"
    },
    "class": {
      "text": "export abstract class ActiveSupport$ImplBase {\n  // Prepared for checking with hasOwnProperty ()\n  static __rue_impl_class__ = true;\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mabstract\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveSupport$ImplBase\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// Prepared for checking with hasOwnProperty ()\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m __rue_impl_class__ \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        10,
        13
      ]
    }
  },
  "ActiveSupport$Impl": {
    "metadata": {
      "filepath": "@rue/packages/activesupport/src/supports/impl.ts",
      "updatedAt": "2021/03/06 12:51:12 +09:00"
    },
    "class": {
      "text": "interface ActiveSupport$Impl {}",
      "highlightText": "\u001b[38;2;102;217;239minterface\u001b[39m \u001b[38;2;230;219;116mActiveSupport$Impl\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        29,
        29
      ]
    }
  },
  "ActiveSupport$Info": {
    "metadata": {
      "filepath": "@rue/packages/activesupport/src/supports/modules/info/core.ts",
      "updatedAt": "2021/03/06 12:51:12 +09:00"
    },
    "class": {
      "text": "export class ActiveSupport$Info extends RueModule {\n  // Support Rue Module\n  // https://qiita.com/suin/items/b807769388c54c57a8be\n  static getMethodsWithNamespace(obj?: Function | object | RueModule): t.MethodWithNamespace[] {\n    const { RUE_MODULE, RUE_IMPL_CLASS } = RueModule;\n\n    const publicOnlyFilter = (name: string) => !name.startsWith('_');\n    const removePrototypeFilter = (obj: Function) => (name: string) =>\n      obj.name != '' ? name != 'prototype' : true;\n    const skipImplClassFilter = (obj: Function) => (name: string) =>\n      obj.hasOwnProperty(RUE_IMPL_CLASS) ? false : true;\n    const removeBuiltinMethodsFilter = (name: string) => !BUILTIN_METHODS.includes(name);\n\n    const getOwnMethods = (obj: Function | RueModule) => {\n      return Object.entries(Object.getOwnPropertyDescriptors(obj))\n        .filter(([name, { value }]) => typeof value === 'function')\n        .map(([name]) => name);\n    };\n\n    const transformerFn = (isInstance: boolean) => (obj: Function | RueModule) => {\n      let klassOrModuleName;\n      let methods;\n\n      if (obj[RUE_MODULE]) {\n        klassOrModuleName = `${obj['name']} (RueModule)`;\n\n        if (isInstance) {\n          methods = Object.keys(Object.getOwnPropertyDescriptors(obj['prototype']) || []);\n        } else {\n          methods = Object.keys(Object.getOwnPropertyDescriptors(obj) || []);\n        }\n      } else {\n        klassOrModuleName = obj['name'];\n\n        if (isInstance) {\n          methods = getOwnMethods(obj.constructor);\n        } else {\n          methods = getOwnMethods(obj);\n        }\n      }\n\n      // https://stackoverflow.com/questions/56659303/what-is-base-object-in-javascript\n      // cosmetic namespace\n      if (klassOrModuleName === '') {\n        klassOrModuleName = 'Function';\n      } else if (klassOrModuleName === undefined) {\n        klassOrModuleName = 'Object';\n      }\n\n      // prettier-ignore\n      return {\n        [klassOrModuleName]: methods\n          .filter(publicOnlyFilter)\n          .filter(removePrototypeFilter(obj as Function))\n          .filter(skipImplClassFilter(obj as Function))\n          .filter(removeBuiltinMethodsFilter),\n      };\n    };\n\n    // main\n\n    const target = obj ? obj : this;\n    const isInstance = typeof target === 'object' ? true : false;\n\n    return this.getAncestors(target, transformerFn(isInstance)).reduce((acc, item) => {\n      Object.assign(acc, item);\n      return acc;\n    }, {} as any);\n  }\n\n  static getProperties(obj: Function): string[] {\n    let target = new (this as any)();\n    if (obj) target = obj;\n\n    const descriptors = Object.getOwnPropertyDescriptors(target);\n    return Object.keys(descriptors);\n  }\n\n  static getAncestors<T = string>(\n    obj?: Function | object,\n    transformer?: (obj: Function) => T\n  ): T[] {\n    const { RUE_MODULE } = RueModule;\n\n    // @important\n    // RueModule's ancestor chain and JavaScript prototype chain are not related.\n    // Therefore you have to reassemble the chain yourself\n\n    const _getAncestors = <T>(f: Function, ancestors: T[]) => {\n      const proto = Object.getPrototypeOf(f);\n\n      if (proto == null) return ancestors;\n      const fRueModuleAncestors = new RueModuleAncestorController(f);\n\n      if (fRueModuleAncestors.data.length > 0) {\n        fRueModuleAncestors.ancestors().forEach((ancestor: T) => {\n          const proto = Object.getPrototypeOf(ancestor);\n          if (proto.__rue_impl_class__) {\n            const controller = new RueModuleAncestorController(proto);\n            const willAddAncestors = [ancestor, ...controller.ancestors()];\n            willAddAncestors.forEach((childAncestor: T) => {\n              if (!ancestors.includes(childAncestor)) ancestors.push(childAncestor);\n            });\n          } else {\n            if (!ancestors.includes(ancestor)) ancestors.push(ancestor);\n          }\n        });\n        return _getAncestors(proto, ancestors);\n      } else {\n        if (f && f['name'] && !ancestors.includes(f as any)) ancestors.push(f as any);\n        return _getAncestors(proto, ancestors);\n      }\n    };\n\n    const defaultTransformer = (obj: Function): string => {\n      let ancestorName;\n\n      if (obj[RUE_MODULE]) {\n        ancestorName = `${obj['name']} (RueModule)`;\n      } else {\n        ancestorName = obj['name'];\n      }\n\n      // https://stackoverflow.com/questions/56659303/what-is-base-object-in-javascript\n      // cosmetic namespace\n      if (ancestorName === '') {\n        ancestorName = 'Function';\n      } else if (ancestorName === undefined) {\n        ancestorName = 'Object';\n      }\n\n      return ancestorName;\n    };\n\n    let target;\n    if (obj) {\n      target = obj;\n      if (typeof obj === 'object') target = obj.constructor;\n    } else {\n      target = this;\n      // @ts-ignore\n      if (typeof this === 'object') target = this.constructor;\n    }\n\n    let ancestors = [];\n    let useTransformer;\n    if (transformer) {\n      useTransformer = transformer;\n      ancestors = _getAncestors(target, ancestors);\n    } else {\n      useTransformer = defaultTransformer;\n      ancestors = _getAncestors(target, ancestors);\n    }\n\n    // Add base class to ancestors\n    const funcAncs = Function.prototype;\n    const objAncs = Object.prototype;\n    if (!ancestors.includes(funcAncs)) ancestors.push(funcAncs);\n    if (!ancestors.includes(objAncs)) ancestors.push(objAncs);\n\n    return ancestors.map(useTransformer);\n  }\n\n  static getOwnerFrom(obj: Function | object, propName: string): Function | RueModule {\n    const { RUE_IMPL_CLASS } = RueModule;\n    const isStatic = typeof obj === 'function' ? true : false;\n\n    let foundOwner;\n    const ancestors = this.getAncestors(obj, (obj) => obj);\n    for (let i = 0; i < ancestors.length; i++) {\n      const ancestor = ancestors[i];\n      if (!ancestor.hasOwnProperty(RUE_IMPL_CLASS)) {\n        if (isStatic && ancestor.hasOwnProperty(propName)) {\n          foundOwner = ancestor;\n          break;\n        } else if (!isStatic && ancestor.prototype.hasOwnProperty(propName)) {\n          foundOwner = ancestor;\n          break;\n        }\n      }\n    }\n\n    return foundOwner;\n  }\n}",
      "highlightText": "\u001b[38;2;102;217;239mexport\u001b[39m \u001b[38;2;102;217;239mclass\u001b[39m \u001b[38;2;230;219;116mActiveSupport$Info\u001b[39m \u001b[38;2;102;217;239mextends\u001b[39m \u001b[38;2;230;219;116mRueModule\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n  \u001b[38;2;130;146;162m// Support Rue Module\u001b[39m\n  \u001b[38;2;130;146;162m// https://qiita.com/suin/items/b807769388c54c57a8be\u001b[39m\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetMethodsWithNamespace\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m object \u001b[38;2;248;248;242m|\u001b[39m RueModule\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mMethodWithNamespace\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_MODULE\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m RueModule\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mpublicOnlyFilter\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m!\u001b[39mname\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstartsWith\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m'_'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mremovePrototypeFilter\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n      obj\u001b[38;2;248;248;242m.\u001b[39mname \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m name \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'prototype'\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mskipImplClassFilter\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n      obj\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mremoveBuiltinMethodsFilter\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;249;38;114mBUILTIN_METHODS\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mgetOwnMethods\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m RueModule\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mentries\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m value \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m value \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'function'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m name\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mtransformerFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misInstance\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m RueModule\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m klassOrModuleName\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m methods\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_MODULE\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        klassOrModuleName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m (RueModule)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misInstance\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          methods \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'prototype'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          methods \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        klassOrModuleName \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misInstance\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          methods \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mgetOwnMethods\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          methods \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mgetOwnMethods\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;130;146;162m// https://stackoverflow.com/questions/56659303/what-is-base-object-in-javascript\u001b[39m\n      \u001b[38;2;130;146;162m// cosmetic namespace\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklassOrModuleName \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        klassOrModuleName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'Function'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklassOrModuleName \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        klassOrModuleName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'Object'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;130;146;162m// prettier-ignore\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;248;248;242m[\u001b[39mklassOrModuleName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m methods\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpublicOnlyFilter\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mremovePrototypeFilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mskipImplClassFilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mremoveBuiltinMethodsFilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// main\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m obj \u001b[38;2;248;248;242m?\u001b[39m obj \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m isInstance \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m target \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtarget\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;230;219;116mtransformerFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39misInstance\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m item\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m item\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetProperties\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m descriptors \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtarget\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdescriptors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetAncestors\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    obj\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m object\u001b[38;2;248;248;242m,\u001b[39m\n    transformer\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_MODULE\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m RueModule\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @important\u001b[39m\n    \u001b[38;2;130;146;162m// RueModule's ancestor chain and JavaScript prototype chain are not related.\u001b[39m\n    \u001b[38;2;130;146;162m// Therefore you have to reassemble the chain yourself\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m _getAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m proto \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetPrototypeOf\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mproto \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m ancestors\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m fRueModuleAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mRueModuleAncestorController\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfRueModuleAncestors\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        fRueModuleAncestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mancestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m proto \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetPrototypeOf\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mproto\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m controller \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mRueModuleAncestorController\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mproto\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m willAddAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mancestor\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m...\u001b[39mcontroller\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mancestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            willAddAncestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildAncestor\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildAncestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildAncestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mproto\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mf \u001b[38;2;248;248;242m&&\u001b[39m f\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mproto\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m defaultTransformer \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m ancestorName\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_MODULE\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ancestorName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m (RueModule)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ancestorName \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;130;146;162m// https://stackoverflow.com/questions/56659303/what-is-base-object-in-javascript\u001b[39m\n      \u001b[38;2;130;146;162m// cosmetic namespace\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mancestorName \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ancestorName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'Function'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mancestorName \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ancestorName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'Object'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m ancestorName\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m target\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      target \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m obj \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      target \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m ancestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m useTransformer\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mtransformer\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      useTransformer \u001b[38;2;248;248;242m=\u001b[39m transformer\u001b[38;2;248;248;242m;\u001b[39m\n      ancestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtarget\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      useTransformer \u001b[38;2;248;248;242m=\u001b[39m defaultTransformer\u001b[38;2;248;248;242m;\u001b[39m\n      ancestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtarget\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;130;146;162m// Add base class to ancestors\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m funcAncs \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m objAncs \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfuncAncs\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfuncAncs\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobjAncs\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobjAncs\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39museTransformer\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\n  \u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetOwnerFrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m object\u001b[38;2;248;248;242m,\u001b[39m propName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m RueModule \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m RueModule\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m isStatic \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m obj \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'function'\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m foundOwner\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m ancestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m obj\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mfor\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mlet\u001b[39m i \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m i \u001b[38;2;248;248;242m<\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m i\u001b[38;2;248;248;242m++\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m ancestor \u001b[38;2;248;248;242m=\u001b[39m ancestors\u001b[38;2;248;248;242m[\u001b[39mi\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestor\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misStatic \u001b[38;2;248;248;242m&&\u001b[39m ancestor\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          foundOwner \u001b[38;2;248;248;242m=\u001b[39m ancestor\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mbreak\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39misStatic \u001b[38;2;248;248;242m&&\u001b[39m ancestor\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          foundOwner \u001b[38;2;248;248;242m=\u001b[39m ancestor\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mbreak\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m foundOwner\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m\n\u001b[38;2;248;248;242m}\u001b[39m",
      "line": [
        10,
        194
      ]
    },
    "static": {
      "getMethodsWithNamespace": {
        "text": "static getMethodsWithNamespace(obj?: Function | object | RueModule): t.MethodWithNamespace[] {\n    const { RUE_MODULE, RUE_IMPL_CLASS } = RueModule;\n\n    const publicOnlyFilter = (name: string) => !name.startsWith('_');\n    const removePrototypeFilter = (obj: Function) => (name: string) =>\n      obj.name != '' ? name != 'prototype' : true;\n    const skipImplClassFilter = (obj: Function) => (name: string) =>\n      obj.hasOwnProperty(RUE_IMPL_CLASS) ? false : true;\n    const removeBuiltinMethodsFilter = (name: string) => !BUILTIN_METHODS.includes(name);\n\n    const getOwnMethods = (obj: Function | RueModule) => {\n      return Object.entries(Object.getOwnPropertyDescriptors(obj))\n        .filter(([name, { value }]) => typeof value === 'function')\n        .map(([name]) => name);\n    };\n\n    const transformerFn = (isInstance: boolean) => (obj: Function | RueModule) => {\n      let klassOrModuleName;\n      let methods;\n\n      if (obj[RUE_MODULE]) {\n        klassOrModuleName = `${obj['name']} (RueModule)`;\n\n        if (isInstance) {\n          methods = Object.keys(Object.getOwnPropertyDescriptors(obj['prototype']) || []);\n        } else {\n          methods = Object.keys(Object.getOwnPropertyDescriptors(obj) || []);\n        }\n      } else {\n        klassOrModuleName = obj['name'];\n\n        if (isInstance) {\n          methods = getOwnMethods(obj.constructor);\n        } else {\n          methods = getOwnMethods(obj);\n        }\n      }\n\n      // https://stackoverflow.com/questions/56659303/what-is-base-object-in-javascript\n      // cosmetic namespace\n      if (klassOrModuleName === '') {\n        klassOrModuleName = 'Function';\n      } else if (klassOrModuleName === undefined) {\n        klassOrModuleName = 'Object';\n      }\n\n      // prettier-ignore\n      return {\n        [klassOrModuleName]: methods\n          .filter(publicOnlyFilter)\n          .filter(removePrototypeFilter(obj as Function))\n          .filter(skipImplClassFilter(obj as Function))\n          .filter(removeBuiltinMethodsFilter),\n      };\n    };\n\n    // main\n\n    const target = obj ? obj : this;\n    const isInstance = typeof target === 'object' ? true : false;\n\n    return this.getAncestors(target, transformerFn(isInstance)).reduce((acc, item) => {\n      Object.assign(acc, item);\n      return acc;\n    }, {} as any);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetMethodsWithNamespace\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m object \u001b[38;2;248;248;242m|\u001b[39m RueModule\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m t\u001b[38;2;248;248;242m.\u001b[39mMethodWithNamespace\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_MODULE\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m RueModule\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mpublicOnlyFilter\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m!\u001b[39mname\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mstartsWith\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;166;226;46m'_'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mremovePrototypeFilter\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n      obj\u001b[38;2;248;248;242m.\u001b[39mname \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m name \u001b[38;2;248;248;242m!=\u001b[39m \u001b[38;2;166;226;46m'prototype'\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mskipImplClassFilter\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m\n      obj\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mremoveBuiltinMethodsFilter\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m!\u001b[39m\u001b[38;2;249;38;114mBUILTIN_METHODS\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mname\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mgetOwnMethods\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m RueModule\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mentries\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mname\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m value \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m value \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'function'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n        \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m[\u001b[39mname\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m name\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;230;219;116mtransformerFn\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misInstance\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mboolean\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m RueModule\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m klassOrModuleName\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m methods\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_MODULE\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        klassOrModuleName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m (RueModule)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misInstance\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          methods \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'prototype'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          methods \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mObject\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m||\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        klassOrModuleName \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misInstance\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          methods \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mgetOwnMethods\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          methods \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116mgetOwnMethods\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;130;146;162m// https://stackoverflow.com/questions/56659303/what-is-base-object-in-javascript\u001b[39m\n      \u001b[38;2;130;146;162m// cosmetic namespace\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklassOrModuleName \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        klassOrModuleName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'Function'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mklassOrModuleName \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        klassOrModuleName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'Object'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;130;146;162m// prettier-ignore\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;248;248;242m[\u001b[39mklassOrModuleName\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m methods\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpublicOnlyFilter\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mremovePrototypeFilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;230;219;116mskipImplClassFilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\n          \u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mfilter\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mremoveBuiltinMethodsFilter\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// main\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m obj \u001b[38;2;248;248;242m?\u001b[39m obj \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m isInstance \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m target \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtarget\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;230;219;116mtransformerFn\u001b[39m\u001b[38;2;248;248;242m(\u001b[39misInstance\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mreduce\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m item\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116massign\u001b[39m\u001b[38;2;248;248;242m(\u001b[39macc\u001b[38;2;248;248;242m,\u001b[39m item\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mreturn\u001b[39m acc\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          13,
          78
        ]
      },
      "getProperties": {
        "text": "static getProperties(obj: Function): string[] {\n    let target = new (this as any)();\n    if (obj) target = obj;\n\n    const descriptors = Object.getOwnPropertyDescriptors(target);\n    return Object.keys(descriptors);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetProperties\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m descriptors \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetOwnPropertyDescriptors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtarget\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mreturn\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mkeys\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mdescriptors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          80,
          86
        ]
      },
      "getAncestors": {
        "text": "static getAncestors<T = string>(\n    obj?: Function | object,\n    transformer?: (obj: Function) => T\n  ): T[] {\n    const { RUE_MODULE } = RueModule;\n\n    // @important\n    // RueModule's ancestor chain and JavaScript prototype chain are not related.\n    // Therefore you have to reassemble the chain yourself\n\n    const _getAncestors = <T>(f: Function, ancestors: T[]) => {\n      const proto = Object.getPrototypeOf(f);\n\n      if (proto == null) return ancestors;\n      const fRueModuleAncestors = new RueModuleAncestorController(f);\n\n      if (fRueModuleAncestors.data.length > 0) {\n        fRueModuleAncestors.ancestors().forEach((ancestor: T) => {\n          const proto = Object.getPrototypeOf(ancestor);\n          if (proto.__rue_impl_class__) {\n            const controller = new RueModuleAncestorController(proto);\n            const willAddAncestors = [ancestor, ...controller.ancestors()];\n            willAddAncestors.forEach((childAncestor: T) => {\n              if (!ancestors.includes(childAncestor)) ancestors.push(childAncestor);\n            });\n          } else {\n            if (!ancestors.includes(ancestor)) ancestors.push(ancestor);\n          }\n        });\n        return _getAncestors(proto, ancestors);\n      } else {\n        if (f && f['name'] && !ancestors.includes(f as any)) ancestors.push(f as any);\n        return _getAncestors(proto, ancestors);\n      }\n    };\n\n    const defaultTransformer = (obj: Function): string => {\n      let ancestorName;\n\n      if (obj[RUE_MODULE]) {\n        ancestorName = `${obj['name']} (RueModule)`;\n      } else {\n        ancestorName = obj['name'];\n      }\n\n      // https://stackoverflow.com/questions/56659303/what-is-base-object-in-javascript\n      // cosmetic namespace\n      if (ancestorName === '') {\n        ancestorName = 'Function';\n      } else if (ancestorName === undefined) {\n        ancestorName = 'Object';\n      }\n\n      return ancestorName;\n    };\n\n    let target;\n    if (obj) {\n      target = obj;\n      if (typeof obj === 'object') target = obj.constructor;\n    } else {\n      target = this;\n      // @ts-ignore\n      if (typeof this === 'object') target = this.constructor;\n    }\n\n    let ancestors = [];\n    let useTransformer;\n    if (transformer) {\n      useTransformer = transformer;\n      ancestors = _getAncestors(target, ancestors);\n    } else {\n      useTransformer = defaultTransformer;\n      ancestors = _getAncestors(target, ancestors);\n    }\n\n    // Add base class to ancestors\n    const funcAncs = Function.prototype;\n    const objAncs = Object.prototype;\n    if (!ancestors.includes(funcAncs)) ancestors.push(funcAncs);\n    if (!ancestors.includes(objAncs)) ancestors.push(objAncs);\n\n    return ancestors.map(useTransformer);\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetAncestors\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;248;248;242m=\u001b[39m\u001b[38;2;230;219;116m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;230;219;116m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;230;219;116m\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\n    obj\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m object\u001b[38;2;248;248;242m,\u001b[39m\n    transformer\u001b[38;2;248;248;242m?\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\n  \u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_MODULE\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m RueModule\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;130;146;162m// @important\u001b[39m\n    \u001b[38;2;130;146;162m// RueModule's ancestor chain and JavaScript prototype chain are not related.\u001b[39m\n    \u001b[38;2;130;146;162m// Therefore you have to reassemble the chain yourself\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m _getAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m<\u001b[39m\u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m>\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m proto \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetPrototypeOf\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mproto \u001b[38;2;248;248;242m==\u001b[39m \u001b[38;2;102;217;239mnull\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;102;217;239mreturn\u001b[39m ancestors\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m fRueModuleAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mRueModuleAncestorController\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mfRueModuleAncestors\u001b[38;2;248;248;242m.\u001b[39mdata\u001b[38;2;248;248;242m.\u001b[39mlength \u001b[38;2;248;248;242m>\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        fRueModuleAncestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mancestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          \u001b[38;2;102;217;239mconst\u001b[39m proto \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetPrototypeOf\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mproto\u001b[38;2;248;248;242m.\u001b[39m__rue_impl_class__\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m controller \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mnew\u001b[39m \u001b[38;2;230;219;116mRueModuleAncestorController\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mproto\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;102;217;239mconst\u001b[39m willAddAncestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39mancestor\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m...\u001b[39mcontroller\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mancestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            willAddAncestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mforEach\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildAncestor\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;249;38;114mT\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n              \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildAncestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mchildAncestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n            \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n            \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mancestor\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;248;248;242m}\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mproto\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mf \u001b[38;2;248;248;242m&&\u001b[39m f\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m \u001b[38;2;248;248;242m&&\u001b[39m \u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mf \u001b[38;2;102;217;239mas\u001b[39m \u001b[38;2;166;226;46many\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;102;217;239mreturn\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mproto\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mconst\u001b[39m defaultTransformer \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mlet\u001b[39m ancestorName\u001b[38;2;248;248;242m;\u001b[39m\n\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;249;38;114mRUE_MODULE\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ancestorName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m${\u001b[39mobj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;166;226;46m (RueModule)\u001b[39m\u001b[38;2;166;226;46m`\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ancestorName \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;166;226;46m'name'\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;130;146;162m// https://stackoverflow.com/questions/56659303/what-is-base-object-in-javascript\u001b[39m\n      \u001b[38;2;130;146;162m// cosmetic namespace\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mancestorName \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m''\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ancestorName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'Function'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mancestorName \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;102;217;239mundefined\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        ancestorName \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46m'Object'\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n\n      \u001b[38;2;102;217;239mreturn\u001b[39m ancestorName\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m target\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      target \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m obj \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m obj\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      target \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;130;146;162m// @ts-ignore\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mtypeof\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'object'\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m target \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;102;217;239mconstructor\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m ancestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;248;248;242m[\u001b[39m\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mlet\u001b[39m useTransformer\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mtransformer\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      useTransformer \u001b[38;2;248;248;242m=\u001b[39m transformer\u001b[38;2;248;248;242m;\u001b[39m\n      ancestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtarget\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      useTransformer \u001b[38;2;248;248;242m=\u001b[39m defaultTransformer\u001b[38;2;248;248;242m;\u001b[39m\n      ancestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;230;219;116m_getAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mtarget\u001b[38;2;248;248;242m,\u001b[39m ancestors\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;130;146;162m// Add base class to ancestors\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m funcAncs \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m objAncs \u001b[38;2;248;248;242m=\u001b[39m Object\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfuncAncs\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mfuncAncs\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mincludes\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobjAncs\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mpush\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobjAncs\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mmap\u001b[39m\u001b[38;2;248;248;242m(\u001b[39museTransformer\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          88,
          171
        ]
      },
      "getOwnerFrom": {
        "text": "static getOwnerFrom(obj: Function | object, propName: string): Function | RueModule {\n    const { RUE_IMPL_CLASS } = RueModule;\n    const isStatic = typeof obj === 'function' ? true : false;\n\n    let foundOwner;\n    const ancestors = this.getAncestors(obj, (obj) => obj);\n    for (let i = 0; i < ancestors.length; i++) {\n      const ancestor = ancestors[i];\n      if (!ancestor.hasOwnProperty(RUE_IMPL_CLASS)) {\n        if (isStatic && ancestor.hasOwnProperty(propName)) {\n          foundOwner = ancestor;\n          break;\n        } else if (!isStatic && ancestor.prototype.hasOwnProperty(propName)) {\n          foundOwner = ancestor;\n          break;\n        }\n      }\n    }\n\n    return foundOwner;\n  }",
        "highlightText": "\u001b[38;2;102;217;239mstatic\u001b[39m \u001b[38;2;230;219;116mgetOwnerFrom\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m object\u001b[38;2;248;248;242m,\u001b[39m propName\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mstring\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;166;226;46mFunction\u001b[39m \u001b[38;2;248;248;242m|\u001b[39m RueModule \u001b[38;2;248;248;242m{\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m \u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;248;248;242m=\u001b[39m RueModule\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m isStatic \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mtypeof\u001b[39m obj \u001b[38;2;248;248;242m===\u001b[39m \u001b[38;2;166;226;46m'function'\u001b[39m \u001b[38;2;248;248;242m?\u001b[39m \u001b[38;2;174;129;255mtrue\u001b[39m \u001b[38;2;248;248;242m:\u001b[39m \u001b[38;2;174;129;255mfalse\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n\n    \u001b[38;2;102;217;239mlet\u001b[39m foundOwner\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mconst\u001b[39m ancestors \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;102;217;239mthis\u001b[39m\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mgetAncestors\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m,\u001b[39m \u001b[38;2;248;248;242m(\u001b[39mobj\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m=>\u001b[39m obj\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n    \u001b[38;2;102;217;239mfor\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;102;217;239mlet\u001b[39m i \u001b[38;2;248;248;242m=\u001b[39m \u001b[38;2;174;129;255m0\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m i \u001b[38;2;248;248;242m<\u001b[39m ancestors\u001b[38;2;248;248;242m.\u001b[39mlength\u001b[38;2;248;248;242m;\u001b[39m i\u001b[38;2;248;248;242m++\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n      \u001b[38;2;102;217;239mconst\u001b[39m ancestor \u001b[38;2;248;248;242m=\u001b[39m ancestors\u001b[38;2;248;248;242m[\u001b[39mi\u001b[38;2;248;248;242m]\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n      \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39mancestor\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;249;38;114mRUE_IMPL_CLASS\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n        \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39misStatic \u001b[38;2;248;248;242m&&\u001b[39m ancestor\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          foundOwner \u001b[38;2;248;248;242m=\u001b[39m ancestor\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mbreak\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m \u001b[38;2;102;217;239melse\u001b[39m \u001b[38;2;102;217;239mif\u001b[39m \u001b[38;2;248;248;242m(\u001b[39m\u001b[38;2;248;248;242m!\u001b[39misStatic \u001b[38;2;248;248;242m&&\u001b[39m ancestor\u001b[38;2;248;248;242m.\u001b[39mprototype\u001b[38;2;248;248;242m.\u001b[39m\u001b[38;2;230;219;116mhasOwnProperty\u001b[39m\u001b[38;2;248;248;242m(\u001b[39mpropName\u001b[38;2;248;248;242m)\u001b[39m\u001b[38;2;248;248;242m)\u001b[39m \u001b[38;2;248;248;242m{\u001b[39m\n          foundOwner \u001b[38;2;248;248;242m=\u001b[39m ancestor\u001b[38;2;248;248;242m;\u001b[39m\n          \u001b[38;2;102;217;239mbreak\u001b[39m\u001b[38;2;248;248;242m;\u001b[39m\n        \u001b[38;2;248;248;242m}\u001b[39m\n      \u001b[38;2;248;248;242m}\u001b[39m\n    \u001b[38;2;248;248;242m}\u001b[39m\n\n    \u001b[38;2;102;217;239mreturn\u001b[39m foundOwner\u001b[38;2;248;248;242m;\u001b[39m\n  \u001b[38;2;248;248;242m}\u001b[39m",
        "isAsync": false,
        "visibility": "public",
        "line": [
          173,
          193
        ]
      }
    }
  }
}